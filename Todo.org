* 开发中遇见的各种软件问题 TODOList
*** General Contributions
#+ATTR_LATEX: :environment introduction
- [ ] org-mode，提交pr增加INCLUDE的行末倒数行数的行为代码x, 加入mailing-list提出FR
- [ ] C-plus-C-plus, 提交leetcode题解
- [ ] melpa，提交pr增加自己的leetgo package, WIP
- [X] consult-gh ，提交pr修改readme中的consult-gh-search-code的使用
- [X] melpa，提交pr增加自己的real-mono-themes
- [X] nixpkg，提交issue增加biospy等nix生理信号包
- [X] columndeeply/hosts，提交pr增加17868行新域名, +修改脚本为0.0.0.0+
- [X] pyim，提交issue修改%报错行为
- [X] addons.mozilla，eink插件


*** TODO write a eww-hook, when I use eww to visit a url, and  if the site(not local file) exsists more than 5 minuts, then download it to a dir I specific.
*** TODO how to customize face as for specific mode?
e.g., I want to have default face in calendar or compilation-mode use mono font, but stay my other face use proportional font still...
I know I can use set-face-attribute but the way of it is do it in globally.
(set-face-attribute 'no-emoji nil
                      :background (face-attribute 'default :background)
                      :foreground (face-attribute 'default :background)
                      :height 0.1)

*** TODO Advent of code in zig?
*** TODO package leego elisp package as emacs package
- description: do leetcode in emacs with leetgo
- require: wget/pandoc/leetgo/
- wget for fetch image
- pandoc for markdown to org
- leetgo for pick/commit questions
- simple init, use leetgo
- batch fetch, (leetcode-fetch-batch "1 2 3") to fetch 1/2/3 questions
- also you can fetch contest,
- auto detected browser cookie, no need to fill cookies by yourself
- offline test, use pre fetched testcase/makefile/awk to local test tasks.
- org format, local image, and generally you can easily export all questions.
- wait I finished doing leetcode
*** DONE how to have pop out behavior like cape, but for my function's output?
(completion-in-region (point) (point) (list))
*** FIXME How to modify org-mode's #+INCLUDE:                :pr:mailinglist:
**** how to contribute to org
https://orgmode.org/worg/org-contribute.html
https://orgmode.org/worg/org-mailing-list.html
**** explain FR
**Subject:** [FR] Add support for reverse (negative) line ranges in `#+INCLUDE:` `:lines`

Hi all,

Org’s current `#+INCLUDE:` keyword supports selecting lines using the `:lines` parameter, e.g.:

- `5-10` — lines 5 to 10
- `-10` — lines 1 to 10
- `10-` — line 10 to EOF

However, Org currently does **not** support selecting lines counted from the end of the file.

I would like to propose extending the syntax to support “reverse line numbers”, similar to how many tools allow negative indexing. Examples:

#+begin_example
#+INCLUDE: "x.txt" :lines "~5-"      ; last 5 lines to EOF
#+INCLUDE: "x.txt" :lines "~5-~1"   ; last 5 lines to last 1 line
#+INCLUDE: "x.txt" :lines "-~5"     ; from beginning to last 5 lines
#+INCLUDE: "x.txt" :lines "10-~1"   ; from line 10 to last 1 line
#+end_example

This would make it much easier to include “the last N lines” of logs, datasets, generated files, etc., without needing to preprocess the file externally.

If there is interest, I would be happy to help test or contribute patches.

Thanks!
—Qingsong

*** DONE how many hours of pc idle's power consumption is equal to hibernate save ram to disk? :0d2s:
*** DONE almost same vscode-emacs package.
*** DONE how to run current region's content (if not in region, run that line) into current project's vterm
current I get a command called "multi-vterm-project", when you are not in vterm and vterm is closed use multi-vterm-project to open(or turn on a vterm project shell window) it, and can use it again to toggle it close(not kill, just remove that window), if the project vterm winodw is open and cursor is not in that window, use multi-vterm-project will focus to vterm window. based on this, I want you to write run the current region/line's content into vterm, how it works?

Below is the exact design that matches your workflow **with `multi-vterm-project` already handling window creation/toggle/focus**.
You only need a function that:

1. Ensures the project vterm exists (by calling `multi-vterm-project` when needed).
2. Gets the project vterm buffer.
3. Sends region or current line.
4. Does not change your current window unless the vterm does not yet exist.
5. If the vterm window is already visible but not focused, **do not move focus**; only send text.

Assumption:
`multi-vterm-project` creates or returns a vterm buffer named like `*vterm-project: <project>*`.
If your naming differs, adjust the regexp.

Code:

```elisp
(require 'project)
(require 'vterm)
(require 'multi-vterm)

(defun my/get-project-vterm-buffer ()
  "Return the project vterm buffer, or nil if not exists."
  (let* ((proj (project-current t))
         (root (project-root proj))
         (name (file-name-nondirectory (directory-file-name root))))
    (catch 'found
      (dolist (buf (buffer-list))
        (when (string-match (format "\\*vterm-project: %s" name)
                            (buffer-name buf))
          (throw 'found buf)))
      nil)))

(defun my/ensure-project-vterm ()
  "Ensure project vterm exists. Do NOT focus it if already exists."
  (let ((buf (my/get-project-vterm-buffer)))
    (unless buf
      ;; Creates and shows it. Your toggle logic is inside multi-vterm-project.
      (multi-vterm-project)
      (setq buf (my/get-project-vterm-buffer)))
    buf))

(defun my/send-region-or-line-to-project-vterm ()
  "Send active region or current line to project vterm.
Does not move focus unless no vterm existed."
  (interactive)
  (let* ((text (if (use-region-p)
                   (buffer-substring-no-properties
                    (region-beginning) (region-end))
                 (buffer-substring-no-properties
                  (line-beginning-position) (line-end-position)))))
    ;; Make sure vterm exists
    (let ((vbuf (my/ensure-project-vterm)))
      (when vbuf
        (with-current-buffer vbuf
          (vterm-send-string text)
          (vterm-send-return))))))

(global-set-key (kbd "C-c e") #'my/send-region-or-line-to-project-vterm)
```

Operation summary:

If project vterm **does not exist**, this creates it by calling `multi-vterm-project`.
If project vterm **exists but hidden**, the function does not toggle it; it simply sends text silently.
If project vterm **exists and is visible**, the function does not steal focus; it sends text in place.
Region has priority. No region → send current line.

This integrates cleanly with your workflow where `multi-vterm-project` handles all window toggle/focus behavior.

*** DONE pyim % 字符触发 Not enough arguments for format string :authorfixed:
使用虎码码表https://github.com/welandx/huma-danzi.pyim，同样使用其readme中的配置
发现输入l时报错:
Debugger entered--Lisp error: (error "Not enough arguments for format string")
  message("[l              ]: 1.而 2.% (1/1) $ ")
  #f(compiled-function (string position tooltip) "使用 minibuffer 来显示 STRING。" #<bytecode -0x26f1e7f81176ed3>)("[l              ]: 1.而 2.% (1/1) $ " 620 minibuffer)
  apply(#f(compiled-function (string position tooltip) "使用 minibuffer 来显示 STRING。" #<bytecode -0x26f1e7f81176ed3>) "[l              ]: 1.而 2.% (1/1) $ " 620 minibuffer nil)
  pyim-page-show("[l              ]: 1.而 2.% (1/1) $ " 620 minibuffer)
  pyim-page--refresh(nil)
  pyim-process-ui-refresh()
  pyim-process-run()
  pyim-self-insert-command()
  funcall-interactively(pyim-self-insert-command)
  call-interactively(pyim-self-insert-command)
  pyim-process-input-method(108)
  pyim-input-method(108)

删除hmdz.pyim中的%或使用中文的％使用时不会报错，发现pyim 有 %  就报错:
Debugger entered--Lisp error: (error "Not enough arguments for format string")
  message("[l              ]: 1.% (1/1) $ ")
  #f(compiled-function (string position tooltip) "使用 minibuffer 来显示 STRING。" #<bytecode 0x1d8cdaf8ba1c112a>)("[l              ]: 1.% (1/1) $ " 624 minibuffer)
  apply(#f(compiled-function (string position tooltip) "使用 minibuffer 来显示 STRING。" #<bytecode 0x1d8cdaf8ba1c112a>) "[l              ]: 1.% (1/1) $ " 624 minibuffer nil)
  pyim-page-show("[l              ]: 1.% (1/1) $ " 624 minibuffer)
  pyim-page--refresh(nil)
  pyim-process-ui-refresh()
  pyim-process-run()
  pyim-self-insert-command()
  funcall-interactively(pyim-self-insert-command)
  call-interactively(pyim-self-insert-command)
  pyim-process-input-method(108)
  pyim-input-method(108)

*** DONE explain this wget command
wget -r -p -np -k <url>
含义：

-r
启用递归下载。
会下载 <url> 页面以及它引用的其他页面或资源（根据递归规则）。

-p
下载页面显示所需的所有资源。
包括图片、CSS、JS、字体等。
这是“下载完整页面以便离线浏览”的选项。

-np
不进入父目录（no parent）。
递归下载时不会爬到 <url> 的上级目录。
例如：
如果 <url> 是 http://example.com/a/b/page.html
它不会下载 http://example.com/a/ 或 http://example.com/ 下的内容。

-k
转换下载后的链接为本地相对路径。
方便本地离线浏览时页面中的链接仍然能点击访问
*** DONE how to do emacs overlay in nixos to config not to have somepackage natively exclude :noneed:
how to disable gomoku, I am getting addiction to that game...
*** DONE using consult-gh-notifications, and I just type wrong pass as my own pc's pass, not github token
it used to pop a dialog box at first time, then I input my linux user's password, then it just disappered.
why? I want to reinput, but it just no dialog anymore and it just show me:
ghub--handle-response-error: HTTP Error: 403, "Forbidden", "https://api.github.com/graphql", ((message . "Request forbidden by administrative rules. Please make sure your request has a User-Agent header (https://docs.github.com/en/rest/overview/resources-in-the-rest-api#user-agent-required). Check https://developer.github.com for other possible causes.") (documentation_url . "https://github.com/magit/ghub/wiki/Github-Errors"))

it's the issue of url-user-agent.
*** DONE how the  ~/.mozilla/firefox/profiles.ini looks like?
the profiles name is set in nix as " profiles.firefox = {", I want you to write the default looks of that file.
#+caption: ~/.mozilla/firefox/profiles.ini
#+begin_verse
[General]
StartWithLastProfile=1

[Profile0]
Name=firefox
IsRelative=1
Path=firefox
Default=1
#+end_verse

*** DONE add sway emacs pkg?                                         :noneed:
*** DONE how to make rm safer?                                       :noneed:
let rm delete file to trash
just don't use term+shell directly, use dired/magit...
*** DONE recentf moving file persisnt
every time I move my file and the path changed but the recentf didn't follow, causing production and memory lost.
just maintin my own recentf list.
*** DONE pull request to the porn site list project                      :pr:
fix the columndeeply/hosts 's 127.0.0.0 to 0.0.0.0

by clone and compare the problem is that "I include a lost non-porn site in to it".
not just "non-porn" sites, I also get a lot cdn server to block, which fetch from a lot of m3u8 streaming server. it may also block some movies which using the same server as porn sites...
so, there is only KLUDGE for thing like blocking porn site, first question: what is porn? really?
to be, the social media like twitter which spread sexual clip? the pornhub teaching mathmatic? the reddit/4chan/zhihu/weibo/... even the taobao can sell sex toys with sexual pictures, so blocking internet is blocking porn really? I don't know, it's a question for everyone.

finished, by

#+begin_src sh
  #!/usr/bin/env bash
set -euo pipefail

HOST_URLS=(
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts00"
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts01"
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts02"
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts03"
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts04"
  "https://raw.githubusercontent.com/columndeeply/hosts/main/hosts05"
)

TMPDIR="$(mktemp -d)"
REMOTE_DOMAINS="$TMPDIR/remote_domains"
YOUR_DOMAINS="$TMPDIR/your_domains"
OUTPUT="hosts6"

echo "[*] Downloading hostlists..."
> "$REMOTE_DOMAINS"
for url in "${HOST_URLS[@]}"; do
    echo "    -> $url"
    curl -sL "$url" \
        | grep -E "^[0-9:\.]+" \
        | awk '{print $2}' \
        >> "$REMOTE_DOMAINS"
done

echo "[*] Normalizing remote domains..."
sort -u "$REMOTE_DOMAINS" > "$TMPDIR/remote_sorted"

echo "[*] Extracting your domains..."
grep -E "^[0-9:\.]+" /etc/hosts \
    | awk '{print $2}' \
    | sort -u \
    > "$YOUR_DOMAINS"

echo "[*] Generating unique domains (hosts6)..."
comm -23 "$YOUR_DOMAINS" "$TMPDIR/remote_sorted" \
    | awk '{print "0.0.0.0", $1}' \
    > "$OUTPUT"

echo "[+] Done. Unique domains saved in $OUTPUT"
echo "    Total: $(wc -l < "$OUTPUT")"

#+end_src

#+RESULTS:
| [*] | Downloading                                                       | hostlists... |
| -> | https://raw.githubusercontent.com/columndeeply/hosts/main/hosts00 |            |

get uniq hosts, and update to github. it's I only get 23240 unique lines.

add 17868 new hosts

Used to maintain my hostslist, write a tempermonkey script with ublacklist addon to block chinese keyword search result automatically.

mainly it blocked sexual model gallary sites/Pirate JAV/and chinese porn m3u8 CDN which I filter from a github m3u8 collection repos/or anything non-programming like socialmedia/news/shopping..., occationally the script blocks org/edu/gov sites too.

I remove duplicate hosts in yours and delete non-porn sites, but there still too many which I can't checkout they all.

BTW, I didn't update my hostslist for a long time, because I just find blocking search engine and "hot" social-media instead porn sites is way more easier, I now use tavily/chatgpt/github in emacs only.

BTW, seems like use 0.0.0.0 instaed of 127.0.0.1 is faster.

*** DONE make [[file:~/Leere/Leetcode/README.org][Leetcode]] fresh tasks list
- have already?
- yes/no, yes, edit that file, no, get the files(testcase/question.md/solution.xxx)
- edit the files question to include src in end, solution.xxx to have mode line in header.
- download image to local, turn md in org format, and delete md one.
- add a allorg, to include all under src dir's question.org
- 支持无网本地测试，在源代码文件头部中加入mode line，在题目文件尾部中加入include 源代码
- 根据题号在相同的目录下抓取不同题目和几个指定语言，并下载至本地图片，再转化md为org格式
- 支持在根目录中得到src的所有org file的include
- md to org的==问题
- based on leetgo to creat a leetcode elisp pkg
- test leetcode emacs pkg instead
*** DONE learn how to reference in org
\cite, org-cite-insert unable to insert problem
*M-RET* to enter cite list.
*** DONE upload large files into the github repo
use sed to filter, use what to split into small files.
*** DONE try to package real-mono-theme to melpa                         :pr:
minic almost-mono-theme, creat recipe, make pr
wait for mainter check. I am familaring with github, feeling awesome!
**** reply from melpa maintiner :merged:

Thanks for this. I'm encouraged that you looked at other monochrome themes and went with a comprehensive approach here.

Typically themes are not byte compiled but you still want to maintain conventions across these "stub" files -

⸺ real-mono-sea-theme.el with byte-compile using Emacs 30.1:

real-mono-sea-theme.el:1:1: Warning: file has no `lexical-binding' directive on its first line

⸺ real-mono-old-theme.el with byte-compile using Emacs 30.1:

real-mono-old-theme.el:1:1: Warning: file has no `lexical-binding' directive on its first line

⸺ real-mono-girl-theme.el with byte-compile using Emacs 30.1:

real-mono-girl-theme.el:1:1: Warning: file has no `lexical-binding' directive on its first line

⸺ real-mono-eink-theme.el with byte-compile using Emacs 30.1:

real-mono-eink-theme.el:1:1: Warning: file has no `lexical-binding' directive on its first line

⸺ real-mono-dark-theme.el with byte-compile using Emacs 30.1:

real-mono-dark-theme.el:1:1: Warning: file has no `lexical-binding' directive on its first line

⸺ real-mono-sea-theme.el with package-lint 20250828.1506 and package-lint-main-file = "real-mono-themes.el":

1 issue found:
1:0: error: There is no `provide' form.

⸺ real-mono-old-theme.el with package-lint 20250828.1506 and package-lint-main-file = "real-mono-themes.el":

1 issue found:
1:0: error: There is no `provide' form.

⸺ real-mono-girl-theme.el with package-lint 20250828.1506 and package-lint-main-file = "real-mono-themes.el":

1 issue found:
1:0: error: There is no `provide' form.

⸺ real-mono-eink-theme.el with package-lint 20250828.1506 and package-lint-main-file = "real-mono-themes.el":

1 issue found:
1:0: error: There is no `provide' form.

⸺ real-mono-dark-theme.el with package-lint 20250828.1506 and package-lint-main-file = "real-mono-themes.el":

1 issue found:
1:0: error: There is no `provide' form.

⸺ real-mono-themes.el with melpazoid:

- real-mono-themes.el#L469: It's safer to sharp-quote function names; use `#'`

⸺ real-mono-sea-theme.el with checkdoc 0.6.2 (fix within reason):

real-mono-sea-theme.el:0: The first line should be of the form: ";;; package --- Summary"
real-mono-sea-theme.el:0: You should have a section marked ";;; Commentary:"
real-mono-sea-theme.el:2: You should have a section marked ";;; Code:"
real-mono-sea-theme.el:2: The footer should be: (provide 'real-mono-sea-theme)\n;;; real-mono-sea-theme.el ends here

⸺ real-mono-old-theme.el with checkdoc 0.6.2 (fix within reason):

real-mono-old-theme.el:0: The first line should be of the form: ";;; package --- Summary"
real-mono-old-theme.el:0: You should have a section marked ";;; Commentary:"
real-mono-old-theme.el:2: You should have a section marked ";;; Code:"
real-mono-old-theme.el:2: The footer should be: (provide 'real-mono-old-theme)\n;;; real-mono-old-theme.el ends here

⸺ real-mono-girl-theme.el with checkdoc 0.6.2 (fix within reason):

real-mono-girl-theme.el:0: The first line should be of the form: ";;; package --- Summary"
real-mono-girl-theme.el:0: You should have a section marked ";;; Commentary:"
real-mono-girl-theme.el:2: You should have a section marked ";;; Code:"
real-mono-girl-theme.el:2: The footer should be: (provide 'real-mono-girl-theme)\n;;; real-mono-girl-theme.el ends here

⸺ real-mono-eink-theme.el with checkdoc 0.6.2 (fix within reason):

real-mono-eink-theme.el:0: The first line should be of the form: ";;; package --- Summary"
real-mono-eink-theme.el:0: You should have a section marked ";;; Commentary:"
real-mono-eink-theme.el:2: You should have a section marked ";;; Code:"
real-mono-eink-theme.el:2: The footer should be: (provide 'real-mono-eink-theme)\n;;; real-mono-eink-theme.el ends here

⸺ real-mono-dark-theme.el with checkdoc 0.6.2 (fix within reason):

real-mono-dark-theme.el:0: The first line should be of the form: ";;; package --- Summary"
real-mono-dark-theme.el:0: You should have a section marked ";;; Commentary:"
real-mono-dark-theme.el:2: You should have a section marked ";;; Code:"
real-mono-dark-theme.el:2: The footer should be: (provide 'real-mono-dark-theme)\n;;; real-mono-dark-theme.el ends here

⸺ Package and license:

    Please specify :fetcher before :repo in your recipe
    real-mono-dark-theme.el needs formal license boilerplate and/or an SPDX-License-Identifier
    real-mono-eink-theme.el needs formal license boilerplate and/or an SPDX-License-Identifier
    real-mono-girl-theme.el needs formal license boilerplate and/or an SPDX-License-Identifier
    real-mono-old-theme.el needs formal license boilerplate and/or an SPDX-License-Identifier
    real-mono-sea-theme.el needs formal lic

    ense boilerplate and/or an SPDX-License-Identifier
*** DONE creat new account's github repos for github.io
have a usrname.github.io public repo, have index.html in it, in [[https://qingsongliao.github.io][url]]
*** DONE upload Purezen to github
+ description: theme that really monochrome
  A collection of real monochrome emacs themes in a couple of variants.
+ clone a monochrome and study it
  https://github.com/cryon/almost-mono-themes
+ minic a theme to creat a repo
  https://github.com/qingsongliao/real-mono-themes
