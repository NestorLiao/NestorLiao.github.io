* README.org
This is my blog and p(pdf)log, and emacs/nixos config, code snippest and even more, all in just one repo.

#+caption: 我能用这代码块重现我的电脑，怎么样? 帅吧!
#+begin_src sh :results none
if [[ ! -f "/home/$USER/.emacs.d" ]] then
    git clone --depth 1 https://github.com/jamescherti/minimal-emacs.d ~/.emacs.d
fi
ln -sf $PWD/post-init.el   ~/.emacs.d/;
ln -sf $PWD/snippets ~/.config/snippets;
ln -sf $PWD ~/.config/;
if [[ $XAPIAN_CJK_NGRAM != "true" ]]
   mkdir -p   $HOME/.config/sops/age
   cp .keys.txt  $HOME/.config/sops/age/keys.txt
   sudo nixos-rebuild switch --flake /home/$USER/.config/nixos#$hostname  --option substituters 'https://mirrors.ustc.edu.cn/nix-channels/store  https://cache.nixos.org' --cores 6 -j 12;
fi
#+end_src

* 编辑器哲学
**** 如果人生还有一次，我还选emacs
- minimal :: based on the clean and  fast minimal-emacs.
- purezen :: pure white and black theme written by me called "purezen".
- reproducible :: package manager is using *nixos*.
- simple :: just a 1500+ lines of  post-init.el.
- keyboard  :: for my *ZMK* conifg, the only one soul.
- effcient :: selecting elegantly like queen and editting fastly like king.
- zen :: the world is tremendously large, the items are enormously rich, only me along writting with leere feeling, true happiness come from nothing but within.

****  我的编辑器邪教之旅:

浏览器里的vimium C，因为wsl学习的neovim，因为换上nixos后抄的helix配置，因为大四没找工作太闲学的emacs。我每用一个就大呼“我草，早知道，还得是xx!”，然后给同学老师家人都安利安利，给同学说“我有一宝”，给老师说“看我操作”，给家人嘻嘻傻笑像是捡到五百钱。虽然这代表着我非常的闲，但是折腾emacs确实让我不是很闲到以至于抑郁，我还是在用Vimium C和emacs，赋予我闪电切换页面的神奇体验，当然，代价是它们也让我得了一种名为“换页面换buffer”的ADHD，再者，其实不用vim/emacs也会得，只不过叫作“懒得换页面就直接玩手机”ADHD，“懒得折腾电脑就去玩CSgo成了换弹癌”的ADHD。在这个时代，玩csgo和玩emacs有什么区别呢? 一个能炒皮肤，另一个能折腾皮肤，如是而矣。

****  我使用emacs没有太多原因就只是:
  1. 依赖少，之前用vim，我就要关心vim键位的app适合用来看pdf，看epub看文档，整vimium和vim一个键位/什么lazygit/tmux/fcitx/alacritty，还生怕它们之间有什么矛盾，关键vimscript也不适合作为灵活的语言，整天很困扰很憋屈，我还折腾colemak、虎码和nixos，我的天，对于任何一个大脑快定型的成年人来说，这简直是噩梦! 幸好有emacs解救我于快捷键地狱中，装包能list-package再一点就安装了，pyim配置虎码就一行的事，那里还要fcitx5怎么怎么样! 自从用了emacs，我再也没有折改过firefox，一是我没时间，二是我就只用emacs的eww，我也就不再在乎什么vimium的键位和vim不一样了， *能用就行* 才是真理! 再说用上了elisp，那才叫美梦成真，想写一个工具简直就比玩手机打游等更有意思多了。什么tmux/lazygit/nixos，现在我只想笑笑，我用vterm/magit/任何平台都能跑emacs不是爽多了吗? 只要给我emacs/编译器，写代码就是轻轻松松的事! emacs改好了我的强迫症和极多主义，现在我心宽又极简，感谢emacs!
  2. 功能多，之前用helix，虽是开箱即用但是很明显它的功能只限于写代码，快是快但是对我这样的学习困难型人来说，快和慢没有多大的区别，只会让我再难受于“我好慢它好快，我是不是x痿了”，helix是个自带丰富功能工具，但是对于习惯homerow的人来说其实用vim mode没有什么增益，只会让我更迷茫“我能直接不动手就能上下了，干啥还要这个hjkl??”。有插件和服务器模式这点就足以胜过helix了。当然我从helix的文档也学到了很多编辑知识，如果没有它的emacs主题和打算用scheme写插件系统，和让我折腾很久的helix eink主题，我也不会有潜移默化现在的编辑技术和极简主题审美了。
  3. 分心小，之前用vimium那就是一个换换换的感觉，总是想去换页面，看看新闻看看新工具，上下跳转，左右腾挪，helix功能太少不能在里面呆太久，而vimium是个浏览器插件在里面呆着又太容易去娱乐， +用vim主要是去youtube参加编辑器神战+ ，helix也好vimium也好。其实我学习emacs，到能快速掌握avy靠得是之前用过vimium，学习surrond/expand靠的是helix，能熟悉info/man/tldr靠得是之前在终端里学习vim。总之emacs必然是编辑技术的一个终点站。
  4. 定制化，没有一个term emulator支持比例字体的，只有emacs，没有一个editor的主题是可以自己完全定制的，vscode那样的使用javascript还难以控制还过于复杂资源又大的就算了。elisp/fsf/clean/simple，学emacs之前根本不能理解这话! 有些事情得是自己做了才能得之心而应之于手!
  5. 历史，50年历史的编辑器，计算机史的一页，还能写100年左右。
  6. 装b，(linus/stallman)开源巨人们/(rust/python/java/ruby/curl/各种函数式…)之父们钦定编辑器。

* 操作系统哲学
1. network, 471mb hosts to block internet out of my pc with dnsmasq and  dae proxy tool based on epbf... you know I am ill about internet? because I am in china, and the nsfw/trump/4chan dudes, I love they so much, so I add they into my hosts.
2. emacs editor, + nixos, they both ruin my early adult life.
3. wm: sway, minimal config, pure white look, although miku cursor.
4. shell: fish+foot, with all I need in, direnv/many alias/zoxide/git/and thefxxk or thefxxk updated to "chatgpt"'s codex nowadays?
5. browser: firefox [default uninstall], I use eww because I hate browser.
6. fully reproducible, even with dict/font/anime wallpaper!
7. zig/linux/ccpp doc  in ngnix, all kind texinfo can read in emacs.
8. with sops, to store my 0.1 dollar's deepseek account apikey, and chat with my ai girlfriend with my payment passward.
9. I am tired of nixos, but I can't leave it, because after using nixos eveything is hard to do in other distor, like show off to other distor users "BTW, I use NixOS".

论我怎么戒色?答:nixos。

** Zeroth, get your config in to position.
#+name: Get emacs can run shell
#+begin_src emacs-lisp :tangle yes
(org-babel-do-load-languages
'org-babel-load-languages '((emacs-lisp . t)(shell . t)))
#+end_src

#+name: copy your config to place
#+begin_src sh
mkdir -p   $HOME/Leere/
cp -r $PWD $HOME/Leere/
#+end_src

#+name: get device specific hardware config
#+begin_src sh
sudo cp /etc/hardware-configuration.nix $PWD/nixos/device/desktop/hardware-configuration.nix
chmod 777 $PWD/nixos/device/desktop/hardware-configuration.nix
#+end_src

#+name: place your config into right position
#+begin_src sh
mkdir -p ~/.config/spos/age/
ln -sf $PWD/nixos  ~/.config/
ln -sf $PWD/emacs.d   ~/.emacs.d
ln -sf $PWD/resource/keys.txt ~/.config/spos/age/keys.txt
#+end_src

#+RESULTS: place your config into right position

#+begin_src sh
sudo nix-channel --add https://nixos.org/channels/nixos-unstable
sudo nix-channel --update
#+end_src

#+begin_src sh
sudo nixos-rebuild switch --flake /home/leeao/.config/nixos#nixos  --option substituters 'https://mirrors.ustc.edu.cn/nix-channels/store  https://cache.nixos.org' --cores 6 -j 12 --option experimental-features "nix-command flakes"
#+end_src
* 键盘流哲学
- 与原生相合 (win)
- 不冲突 (special prefix)
- 合乎习惯 (stay base)
- home row效率 (home row effiction)
- general in os(browser, editor)
** nav
#+begin_src
(q[mark-sexp]w[mark-word]f[mark_defun]p[mark-whole-buffer]b[quick-sdcv-search-at-point])
                (g[er/expand-region])(m[toggle-truncate-lines])
(z[kill-current-buffer]x[delete-other-windows]c[split-window-below]d[switch_other]v[switch-to-buffer-other-window])
(enter[previous-error]/delete[next-error])
#+end_src

#+begin_src
(q[C-M-@]w[M-@]f[C-M-h]p[C-x h]b[c-c c-~ b])
                (g[c-c c-~ g])(m[c-c c-~ m])
(z[c-x 0]x[c-x 1]c[c-x 2]d[c-x o]v[c-c c-~ v])
(enter[M-g p]/delete[M-g n])
#+end_src

** num
#+begin_src
(j[pause]/l[full]/u[down]/y[leftright]/'[open-app]/)
(m[eink])
(k[kill-win]/h[full]/,[down]/.[leftright]//[rotate])
#+end_src

#+begin_src
(j[s-shift-j]/l[s-shift-l]/u[s-shift-u]/y[s-shift-y]/'[s-shift-'])
(m[s-shift-m])
(k[s-shift-k]/h[s-shift-h]/,[s-shift-s]/.[s-shift-.]//[s-shift-/])
#+end_src

** mos
#+begin_src
(q[gptel-menu]/w[consult-gh]/f[rg-dwim]/p[disproject-dispatch]/b[ibuffer])(j[font-lock-mode]/l[tldr]/u[delete-all-space]/y[global-hide-mode-line-mode]/'[vertico-flat-mode])
(a[comment]/r[quit]/s[find-file]/t[consult-buffer]/g[magit-status])(m[man])
(z[search-at-point]/x[query-replace-regexp]/c[disproject-compile]/d[dired]/v[multi-vterm-project])(k[kill-buffer])
(space[indent-rigidly])
#+end_src

#+begin_src
(q[c-c c-; q]/w[c-c c-; w]/f[c-c c-; f]/p[c-c c-; p]/b[c-x c-b])(j[c-c c-; j]/l[c-c c-; l]/u[c-c c-; u]/y[c-c c-; y]/'[c-c c-; '])
(a[c-x c-;]/r[c-g]/s[c-x c-f]/t[c-x b]/g[c-x g])(m[c-c c-; m])
(z[M-s .]/x[C-M-%]/c[c-c c-; c]/d[c-x d]/v[c-c c-; v])(k[c-x k])
(space[C-X tab])
#+end_src

** sym
#+begin_src
(prompt1[just_give_me_he_code]/prompt2[explain_in_chinese]/prompt3[Think_longer]/prompt4[Search_The_Web]/prompt5[error_fix_it])
(m[switch-to-gptel])
(password/id/qq/email/phone)
#+end_src

#+begin_src
(prompt1[just_give_me_he_code]/prompt2[explain_in_chinese]/prompt3[Think_longer]/prompt4[Search_The_Web]/prompt5[error_fix_it])
(m[s-m])
(password/id/qq/email/phone)
#+end_src

* 屏幕哲学

Real Mono Theme, two colors are enough for emacs.

** Feels:
A collection of real monochrome emacs themes in a couple of variants.

[[./figure/real-mono-eink.png]]
[[./figure/real-mono-dark.png]]
[[./figure/real-mono-girl.png]]
[[./figure/real-mono-old.png]]
[[./figure/real-mono-sea.png]]

pictures's font list: bookerly, ubuntumono, firacode, terminess,
bookerly blod ltalic.

** Features:
1. *Not Greyscale*, no blur anymore, it's much better to use eink screen
   for pure black and white!
2. *Easy* to customize, can set the only two colors by config the
   default face's foreground/background color.
3. *Distraction-free*, no extra info-overwhelming causing by font-lock,
   only few font diversity in magit/dired etc for better function
   recognize.
4. *Full*, configed 370+ faces, I didn't see any monochrome theme can
   reach that much, as my daily driver, it's good enough.

** Tips for mono:
- (global-hide-mode-line-mode 1), build your own brain memory
- (no-emoji 1), alter emacs to be "text editor" instead of discord
- (show-paren-mode -1), build your own eye insight
- (window-divider-mode -1), too, build your memory
- (display-line-numbers-mode -1), too, build your own eye insight

(defvar my-alternate-font "-DAMA-UbuntuMono Nerd Font-regular-normal-normal-*-13-*-*-*-m-0-iso10646-1")
(defvar my-default-font "bookerly")
(defvar fontfont 1)
(defun my-toggle-font ()
  "Toggle between UbuntuMono and bookerly fonts."
  (interactive)
  (if (= fontfont 1)
      (progn (set-face-attribute 'default nil :font my-default-font :height 160) (setq fontfont 0))
    (progn (set-face-attribute 'default nil :font my-alternate-font :height 210) (setq fontfont 1))))
#+end_src

- fringe specific mode auto hide

#+begin_src lisp
(defun my-set-fringe-face ()
  "auto hide fringe face depending on major mode."
  (if (derived-mode-p '(occur-mode gud-mode))
      (set-face-attribute 'fringe nil
                          :background (face-attribute 'default :background)
                          :foreground (face-attribute 'default :foreground))
    (set-face-attribute 'fringe nil
                        :background (face-attribute 'default :background)
                        :foreground (face-attribute 'default :background))))
(add-hook 'after-change-major-mode-hook #'my-set-fringe-face)

- elisp for toggling paperlike-hd to swtich between read and watch.
``` elisp
(defvar monitor-state 0
  "Current monitor state, either 0 for read or  1 for watch.")
(defun monitor ()
  "swtich monitor from read mode to watch mode"
  (interactive)
  (let((monitorpath "-i2c  /dev/i2c-4")
       (monitorcli "paperlike-cli ")
       (monitorarg '(" -contrast " " -speed " " -mode " " -clear"))
       (mode-state '(("9" "5" "1")  ("2" "1" "3"))))
    (split-window-below)
    (other-window 1)
    (switch-to-buffer "*Shell Command Output*")
    (split-window-below)
    (other-window 1)
    (switch-to-buffer "*Async Shell Command*")
    (progn
      (dotimes (number 3)
        (shell-command (concat
                        monitorcli
                        monitorpath
                        (car (nthcdr number monitorarg))
                        (car (nthcdr number (car (nthcdr monitor-state  mode-state)))))
                       ))
      (sleep-for 1))
    (setq monitor-state  (if (= 0 monitor-state) 1 0 ))
    (sleep-for 1.5)
    (sleep-for 0.5)
    (async-shell-command (concat monitorcli monitorpath " -clear"))
    (let ((async (get-buffer-window "*Async Shell Command*"))
          (shell (get-buffer-window "*Shell Command Output*")))
      (when async (delete-window async))
      (when shell  (delete-window shell)))
    (sleep-for 0.5)
    (kill-buffer "*Async Shell Command*")
    (kill-buffer "*Shell Command Output*")
    (donothing)))
#+end_src
