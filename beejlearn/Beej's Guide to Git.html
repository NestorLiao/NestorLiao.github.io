<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="" class="TridactylThemeAuto stizwtjf idc0_343" style="scroll-behavior: unset;"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Beej's Guide to Git</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- BG custom styling -->
  <style type="text/css">
  /* Fix for line numbers not visible */
  pre.numberSource code > span {
      left: -1em;
  }
  pre.numberSource {
      margin-left: initial;
  }

  /* Put some space after the section numbers */
  span.toc-section-number::after {
      content: "\a0\a0\a0";  /* non-breaking whitespace */
  }

  /* Hide underlines on code number links */
  pre > code.sourceCode > span > a:first-child::before {
      text-decoration: none;
  }

  /* Color the source blocks */
  div.sourceCode {
      background-color: #f0f0f0;
  }

  /* Fix iOS big text rendering issue */
  pre > code.sourceCode > span {
      display: initial;
  }


  /* Color the inline code */
  code:not(.sourceCode) {
      background: #f0f0f0;
      padding-left: 0.2em;
      padding-right: 0.2em;
      border-radius: 0.2em;
  }

  pre.sourceCode {
      border: 1px solid #ccc;
      padding: 0.5em;
      border-radius: 0.2em;
  }

  /* Keep code tags from wrapping in tables */
  tbody code {
      white-space: nowrap;
  }

  /* Prevent hyphenation and hyphen breaks in code*/
  code {
      word-break: keep-all;
  }

  td {
      vertical-align: top;
  }

  body {
      font-size: 12pt;
      max-width: 43em;
      font-family: sans-serif;
  }

  html {
      background: #f9f9f9;
  }

  figure > embed {
      max-width: 100%;
  }

  figure {
      text-align: center;
      margin-top: 2em;
      margin-bottom: 2em;
  }

  figcaption {
      font-size: 0.9em;
      font-style: italic;
      margin-top: 0.6em;
  }

  body {
      counter-reset: figure-counter-major;
      counter-reset: figure-counter-minor;
  }

  figure {
      counter-increment: figure-counter-minor;
  }

  figcaption::before {
      content: "Figure " counter(figure-counter-major) "." counter(figure-counter-minor) ": ";
  }

  blockquote {
      border-left: 2px solid #bbb;
      color: #444;
  }

  /*
  In multipage, we need to reset the figure counter to the chapter
  number. Luckily, this is in the <h1 data-number> attribute. Unluckily,
  there is no way to get this in a general way.

  This doesn't work:

    h1[data-number] {
      counter-set: figure-counter-major attr(data-number);
    }

  Nor this:

    h1[data-number] {
      --figure-counter-major-value: attr(data-number);
      counter-set: figure-counter-major var(--figure-counter-major-value);
    }

  So, dumbly, we have a bunch of rules for all these sections, up to the
  maximum possible section.

  Here's a program to generate them:

    for (let i = 1; i < 100; i++)
        console.log(`h1[data-number="${i}"]{counter-set:figure-counter-major ${i};counter-reset:figure-counter-minor;}`);

  Note to self: never write a book with more than 99 frickin' chapters.
  */

  h1[data-number="1"]{counter-set:figure-counter-major 1;counter-reset:figure-counter-minor;}
  h1[data-number="2"]{counter-set:figure-counter-major 2;counter-reset:figure-counter-minor;}
  h1[data-number="3"]{counter-set:figure-counter-major 3;counter-reset:figure-counter-minor;}
  h1[data-number="4"]{counter-set:figure-counter-major 4;counter-reset:figure-counter-minor;}
  h1[data-number="5"]{counter-set:figure-counter-major 5;counter-reset:figure-counter-minor;}
  h1[data-number="6"]{counter-set:figure-counter-major 6;counter-reset:figure-counter-minor;}
  h1[data-number="7"]{counter-set:figure-counter-major 7;counter-reset:figure-counter-minor;}
  h1[data-number="8"]{counter-set:figure-counter-major 8;counter-reset:figure-counter-minor;}
  h1[data-number="9"]{counter-set:figure-counter-major 9;counter-reset:figure-counter-minor;}
  h1[data-number="10"]{counter-set:figure-counter-major 10;counter-reset:figure-counter-minor;}
  h1[data-number="11"]{counter-set:figure-counter-major 11;counter-reset:figure-counter-minor;}
  h1[data-number="12"]{counter-set:figure-counter-major 12;counter-reset:figure-counter-minor;}
  h1[data-number="13"]{counter-set:figure-counter-major 13;counter-reset:figure-counter-minor;}
  h1[data-number="14"]{counter-set:figure-counter-major 14;counter-reset:figure-counter-minor;}
  h1[data-number="15"]{counter-set:figure-counter-major 15;counter-reset:figure-counter-minor;}
  h1[data-number="16"]{counter-set:figure-counter-major 16;counter-reset:figure-counter-minor;}
  h1[data-number="17"]{counter-set:figure-counter-major 17;counter-reset:figure-counter-minor;}
  h1[data-number="18"]{counter-set:figure-counter-major 18;counter-reset:figure-counter-minor;}
  h1[data-number="19"]{counter-set:figure-counter-major 19;counter-reset:figure-counter-minor;}
  h1[data-number="20"]{counter-set:figure-counter-major 20;counter-reset:figure-counter-minor;}
  h1[data-number="21"]{counter-set:figure-counter-major 21;counter-reset:figure-counter-minor;}
  h1[data-number="22"]{counter-set:figure-counter-major 22;counter-reset:figure-counter-minor;}
  h1[data-number="23"]{counter-set:figure-counter-major 23;counter-reset:figure-counter-minor;}
  h1[data-number="24"]{counter-set:figure-counter-major 24;counter-reset:figure-counter-minor;}
  h1[data-number="25"]{counter-set:figure-counter-major 25;counter-reset:figure-counter-minor;}
  h1[data-number="26"]{counter-set:figure-counter-major 26;counter-reset:figure-counter-minor;}
  h1[data-number="27"]{counter-set:figure-counter-major 27;counter-reset:figure-counter-minor;}
  h1[data-number="28"]{counter-set:figure-counter-major 28;counter-reset:figure-counter-minor;}
  h1[data-number="29"]{counter-set:figure-counter-major 29;counter-reset:figure-counter-minor;}
  h1[data-number="30"]{counter-set:figure-counter-major 30;counter-reset:figure-counter-minor;}
  h1[data-number="31"]{counter-set:figure-counter-major 31;counter-reset:figure-counter-minor;}
  h1[data-number="32"]{counter-set:figure-counter-major 32;counter-reset:figure-counter-minor;}
  h1[data-number="33"]{counter-set:figure-counter-major 33;counter-reset:figure-counter-minor;}
  h1[data-number="34"]{counter-set:figure-counter-major 34;counter-reset:figure-counter-minor;}
  h1[data-number="35"]{counter-set:figure-counter-major 35;counter-reset:figure-counter-minor;}
  h1[data-number="36"]{counter-set:figure-counter-major 36;counter-reset:figure-counter-minor;}
  h1[data-number="37"]{counter-set:figure-counter-major 37;counter-reset:figure-counter-minor;}
  h1[data-number="38"]{counter-set:figure-counter-major 38;counter-reset:figure-counter-minor;}
  h1[data-number="39"]{counter-set:figure-counter-major 39;counter-reset:figure-counter-minor;}
  h1[data-number="40"]{counter-set:figure-counter-major 40;counter-reset:figure-counter-minor;}
  h1[data-number="41"]{counter-set:figure-counter-major 41;counter-reset:figure-counter-minor;}
  h1[data-number="42"]{counter-set:figure-counter-major 42;counter-reset:figure-counter-minor;}
  h1[data-number="43"]{counter-set:figure-counter-major 43;counter-reset:figure-counter-minor;}
  h1[data-number="44"]{counter-set:figure-counter-major 44;counter-reset:figure-counter-minor;}
  h1[data-number="45"]{counter-set:figure-counter-major 45;counter-reset:figure-counter-minor;}
  h1[data-number="46"]{counter-set:figure-counter-major 46;counter-reset:figure-counter-minor;}
  h1[data-number="47"]{counter-set:figure-counter-major 47;counter-reset:figure-counter-minor;}
  h1[data-number="48"]{counter-set:figure-counter-major 48;counter-reset:figure-counter-minor;}
  h1[data-number="49"]{counter-set:figure-counter-major 49;counter-reset:figure-counter-minor;}
  h1[data-number="50"]{counter-set:figure-counter-major 50;counter-reset:figure-counter-minor;}
  h1[data-number="51"]{counter-set:figure-counter-major 51;counter-reset:figure-counter-minor;}
  h1[data-number="52"]{counter-set:figure-counter-major 52;counter-reset:figure-counter-minor;}
  h1[data-number="53"]{counter-set:figure-counter-major 53;counter-reset:figure-counter-minor;}
  h1[data-number="54"]{counter-set:figure-counter-major 54;counter-reset:figure-counter-minor;}
  h1[data-number="55"]{counter-set:figure-counter-major 55;counter-reset:figure-counter-minor;}
  h1[data-number="56"]{counter-set:figure-counter-major 56;counter-reset:figure-counter-minor;}
  h1[data-number="57"]{counter-set:figure-counter-major 57;counter-reset:figure-counter-minor;}
  h1[data-number="58"]{counter-set:figure-counter-major 58;counter-reset:figure-counter-minor;}
  h1[data-number="59"]{counter-set:figure-counter-major 59;counter-reset:figure-counter-minor;}
  h1[data-number="60"]{counter-set:figure-counter-major 60;counter-reset:figure-counter-minor;}
  h1[data-number="61"]{counter-set:figure-counter-major 61;counter-reset:figure-counter-minor;}
  h1[data-number="62"]{counter-set:figure-counter-major 62;counter-reset:figure-counter-minor;}
  h1[data-number="63"]{counter-set:figure-counter-major 63;counter-reset:figure-counter-minor;}
  h1[data-number="64"]{counter-set:figure-counter-major 64;counter-reset:figure-counter-minor;}
  h1[data-number="65"]{counter-set:figure-counter-major 65;counter-reset:figure-counter-minor;}
  h1[data-number="66"]{counter-set:figure-counter-major 66;counter-reset:figure-counter-minor;}
  h1[data-number="67"]{counter-set:figure-counter-major 67;counter-reset:figure-counter-minor;}
  h1[data-number="68"]{counter-set:figure-counter-major 68;counter-reset:figure-counter-minor;}
  h1[data-number="69"]{counter-set:figure-counter-major 69;counter-reset:figure-counter-minor;}
  h1[data-number="70"]{counter-set:figure-counter-major 70;counter-reset:figure-counter-minor;}
  h1[data-number="71"]{counter-set:figure-counter-major 71;counter-reset:figure-counter-minor;}
  h1[data-number="72"]{counter-set:figure-counter-major 72;counter-reset:figure-counter-minor;}
  h1[data-number="73"]{counter-set:figure-counter-major 73;counter-reset:figure-counter-minor;}
  h1[data-number="74"]{counter-set:figure-counter-major 74;counter-reset:figure-counter-minor;}
  h1[data-number="75"]{counter-set:figure-counter-major 75;counter-reset:figure-counter-minor;}
  h1[data-number="76"]{counter-set:figure-counter-major 76;counter-reset:figure-counter-minor;}
  h1[data-number="77"]{counter-set:figure-counter-major 77;counter-reset:figure-counter-minor;}
  h1[data-number="78"]{counter-set:figure-counter-major 78;counter-reset:figure-counter-minor;}
  h1[data-number="79"]{counter-set:figure-counter-major 79;counter-reset:figure-counter-minor;}
  h1[data-number="80"]{counter-set:figure-counter-major 80;counter-reset:figure-counter-minor;}
  h1[data-number="81"]{counter-set:figure-counter-major 81;counter-reset:figure-counter-minor;}
  h1[data-number="82"]{counter-set:figure-counter-major 82;counter-reset:figure-counter-minor;}
  h1[data-number="83"]{counter-set:figure-counter-major 83;counter-reset:figure-counter-minor;}
  h1[data-number="84"]{counter-set:figure-counter-major 84;counter-reset:figure-counter-minor;}
  h1[data-number="85"]{counter-set:figure-counter-major 85;counter-reset:figure-counter-minor;}
  h1[data-number="86"]{counter-set:figure-counter-major 86;counter-reset:figure-counter-minor;}
  h1[data-number="87"]{counter-set:figure-counter-major 87;counter-reset:figure-counter-minor;}
  h1[data-number="88"]{counter-set:figure-counter-major 88;counter-reset:figure-counter-minor;}
  h1[data-number="89"]{counter-set:figure-counter-major 89;counter-reset:figure-counter-minor;}
  h1[data-number="90"]{counter-set:figure-counter-major 90;counter-reset:figure-counter-minor;}
  h1[data-number="91"]{counter-set:figure-counter-major 91;counter-reset:figure-counter-minor;}
  h1[data-number="92"]{counter-set:figure-counter-major 92;counter-reset:figure-counter-minor;}
  h1[data-number="93"]{counter-set:figure-counter-major 93;counter-reset:figure-counter-minor;}
  h1[data-number="94"]{counter-set:figure-counter-major 94;counter-reset:figure-counter-minor;}
  h1[data-number="95"]{counter-set:figure-counter-major 95;counter-reset:figure-counter-minor;}
  h1[data-number="96"]{counter-set:figure-counter-major 96;counter-reset:figure-counter-minor;}
  h1[data-number="97"]{counter-set:figure-counter-major 97;counter-reset:figure-counter-minor;}
  h1[data-number="98"]{counter-set:figure-counter-major 98;counter-reset:figure-counter-minor;}
  h1[data-number="99"]{counter-set:figure-counter-major 99;counter-reset:figure-counter-minor;}


  </style>
<style id="_fc_">[d__],[d__][style]{color:rgba(0, 0, 0, 1)!important}[s__='1']{font-size: calc(1px + 15%)!important}
[s__='2']{font-size: calc(2px + 15%)!important}
[s__='3']{font-size: calc(3px + 15%)!important}
[s__='4']{font-size: calc(4px + 15%)!important}
[s__='5']{font-size: calc(5px + 15%)!important}
[s__='6']{font-size: calc(6px + 15%)!important}
[s__='7']{font-size: calc(7px + 15%)!important}
[s__='8']{font-size: calc(8px + 15%)!important}
[s__='9']{font-size: calc(9px + 15%)!important}
[s__='10']{font-size: calc(10px + 15%)!important}
[s__='11']{font-size: calc(11px + 15%)!important}
[s__='12']{font-size: calc(12px + 15%)!important}
[s__='13']{font-size: calc(13px + 15%)!important}
[s__='14']{font-size: calc(14px + 15%)!important}
::placeholder{opacity:1!important;}[b__]{border:1px solid black!important}</style></head>
<body>
<header id="title-block-header">
<h1 class="title" d__="">Beej's Guide to Git</h1>
<p class="author" d__="">Brian “Beej Jorgensen” Hall</p>
<p class="date" d__="">v0.12.3, Copyright © November 24, 2024</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#foreword" id="toc-foreword" d__=""><span class="toc-section-number" d__="">1</span> Foreword</a>
<ul>
<li><a href="#audience" id="toc-audience" d__=""><span class="toc-section-number" d__="">1.1</span> Audience</a></li>
<li><a href="#official-homepage" id="toc-official-homepage" d__=""><span class="toc-section-number" d__="">1.2</span> Official Homepage</a></li>
<li><a href="#email-policy" id="toc-email-policy" d__="" style=""><span class="toc-section-number" d__="">1.3</span> Email Policy</a></li>
<li><a href="#mirroring" id="toc-mirroring" d__=""><span class="toc-section-number" d__="">1.4</span> Mirroring</a></li>
<li><a href="#note-for-translators" id="toc-note-for-translators" d__=""><span class="toc-section-number" d__="">1.5</span> Note for Translators</a></li>
<li><a href="#copyright-and-distribution" id="toc-copyright-and-distribution" d__=""><span class="toc-section-number" d__="">1.6</span> Copyright and Distribution</a></li>
<li><a href="#dedication" id="toc-dedication" d__=""><span class="toc-section-number" d__="">1.7</span> Dedication</a></li>
</ul></li>
<li><a href="#git-basics" id="toc-git-basics" d__=""><span class="toc-section-number" d__="">2</span> Git Basics</a>
<ul>
<li><a href="#what-is-git" id="toc-what-is-git" d__=""><span class="toc-section-number" d__="">2.1</span> What is Git?</a>
<ul>
<li><a href="#definitions" id="toc-definitions" d__=""><span class="toc-section-number" d__="">2.1.1</span> Definitions:</a></li>
</ul></li>
<li><a href="#what-is-github" id="toc-what-is-github" d__=""><span class="toc-section-number" d__="">2.2</span> What is GitHub?</a></li>
<li><a href="#what-is-github-1" id="toc-what-is-github-1" d__=""><span class="toc-section-number" d__="">2.3</span> What is GitHub?</a></li>
<li><a href="#the-most-basic-git-workflow" id="toc-the-most-basic-git-workflow" d__=""><span class="toc-section-number" d__="">2.4</span> The Most Basic Git Workflow</a>
<ul>
<li><a href="#definitions-1" id="toc-definitions-1" d__=""><span class="toc-section-number" d__="">2.4.1</span> Definitions:</a></li>
</ul></li>
<li><a href="#what-is-cloning" id="toc-what-is-cloning" d__=""><span class="toc-section-number" d__="">2.5</span> What is Cloning?</a>
<ul>
<li><a href="#definitions-2" id="toc-definitions-2" d__=""><span class="toc-section-number" d__="">2.5.1</span> Definitions:</a></li>
</ul></li>
<li><a href="#how-do-clones-interact" id="toc-how-do-clones-interact" d__=""><span class="toc-section-number" d__="">2.6</span> How Do Clones Interact?</a></li>
<li><a href="#actual-git-usage" id="toc-actual-git-usage" d__=""><span class="toc-section-number" d__="">2.7</span> Actual Git Usage</a>
<ul>
<li><a href="#step-0-one-time-setup" id="toc-step-0-one-time-setup" d__=""><span class="toc-section-number" d__="">2.7.1</span> Step 0: One-time Setup</a></li>
<li><a href="#step-1-clone-an-existing-repo" id="toc-step-1-clone-an-existing-repo" d__=""><span class="toc-section-number" d__="">2.7.2</span> Step 1: Clone an Existing Repo</a></li>
<li><a href="#step-2-make-some-local-changes" id="toc-step-2-make-some-local-changes" d__=""><span class="toc-section-number" d__="">2.7.3</span> Step 2: Make Some Local Changes</a></li>
<li><a href="#step-3-add-changes-to-the-stage" id="toc-step-3-add-changes-to-the-stage" d__=""><span class="toc-section-number" d__="">2.7.4</span> Step 3: Add Changes to the Stage</a></li>
<li><a href="#step-4-commit-those-changes" id="toc-step-4-commit-those-changes" d__=""><span class="toc-section-number" d__="">2.7.5</span> Step 4: Commit those Changes</a></li>
<li><a href="#step-5-push-your-changes-to-the-remote-repo" id="toc-step-5-push-your-changes-to-the-remote-repo" d__=""><span class="toc-section-number" d__="">2.7.6</span> Step 5: Push Your Changes to the Remote Repo</a></li>
</ul></li>
</ul></li>
<li><a href="#github-how-to-use-it" id="toc-github-how-to-use-it" d__=""><span class="toc-section-number" d__="">3</span> GitHub: How To Use It</a>
<ul>
<li><a href="#making-a-github-account" id="toc-making-a-github-account" d__=""><span class="toc-section-number" d__="">3.1</span> Making a GitHub Account</a></li>
<li><a href="#creating-a-new-repo-on-github" id="toc-creating-a-new-repo-on-github" d__=""><span class="toc-section-number" d__="">3.2</span> Creating a New Repo on GitHub</a></li>
<li><a href="#authentication" id="toc-authentication" d__=""><span class="toc-section-number" d__="">3.3</span> Authentication</a>
<ul>
<li><a href="#github-cli" id="toc-github-cli" d__=""><span class="toc-section-number" d__="">3.3.1</span> GitHub CLI</a></li>
<li><a href="#ssh-keys" id="toc-ssh-keys" d__=""><span class="toc-section-number" d__="">3.3.2</span> SSH Keys</a></li>
<li><a href="#using-personal-access-tokens" id="toc-using-personal-access-tokens" d__=""><span class="toc-section-number" d__="">3.3.3</span> Using Personal Access Tokens</a></li>
</ul></li>
<li><a href="#make-a-local-clone-of-the-repo" id="toc-make-a-local-clone-of-the-repo" d__=""><span class="toc-section-number" d__="">3.4</span> Make a Local Clone of the Repo</a>
<ul>
<li><a href="#cloning-from-github-with-github-cli" id="toc-cloning-from-github-with-github-cli" d__=""><span class="toc-section-number" d__="">3.4.1</span> Cloning from GitHub with GitHub CLI</a></li>
<li><a href="#cloning-from-github-with-ssh-keys" id="toc-cloning-from-github-with-ssh-keys" d__=""><span class="toc-section-number" d__="">3.4.2</span> Cloning from GitHub with SSH Keys</a></li>
</ul></li>
<li><a href="#make-changes-and-push" id="toc-make-changes-and-push" d__=""><span class="toc-section-number" d__="">3.5</span> Make Changes and Push!</a></li>
<li><a href="#collaboration-on-github" id="toc-collaboration-on-github" d__=""><span class="toc-section-number" d__="">3.6</span> Collaboration on GitHub</a></li>
</ul></li>
<li><a href="#the-git-log-and-head" id="toc-the-git-log-and-head" d__=""><span class="toc-section-number" d__="">4</span> The Git Log and <code s__="13" d__="">HEAD</code></a>
<ul>
<li><a href="#an-example-log" id="toc-an-example-log" d__=""><span class="toc-section-number" d__="">4.1</span> An Example Log</a></li>
<li><a href="#whats-in-the-log" id="toc-whats-in-the-log" d__=""><span class="toc-section-number" d__="">4.2</span> What’s in the log?</a></li>
<li><a href="#the-head-reference" id="toc-the-head-reference" d__=""><span class="toc-section-number" d__="">4.3</span> The <code s__="13" d__="">HEAD</code> Reference</a></li>
<li><a href="#going-back-in-time-and-detached-head" id="toc-going-back-in-time-and-detached-head" d__=""><span class="toc-section-number" d__="">4.4</span> Going Back In Time and Detached <code s__="13" d__="">HEAD</code></a></li>
<li><a href="#the-new-command-git-switch" id="toc-the-new-command-git-switch" d__=""><span class="toc-section-number" d__="">4.5</span> The New Command: <code s__="13" d__="">git switch</code></a></li>
<li><a href="#commits-relative-to-head" id="toc-commits-relative-to-head" d__=""><span class="toc-section-number" d__="">4.6</span> Commits Relative to <code s__="13" d__="">HEAD</code></a></li>
</ul></li>
<li><a href="#branches-and-fast-forward-merges" id="toc-branches-and-fast-forward-merges" d__=""><span class="toc-section-number" d__="">5</span> Branches and Fast-Forward Merges</a>
<ul>
<li><a href="#what-is-a-branch" id="toc-what-is-a-branch" d__=""><span class="toc-section-number" d__="">5.1</span> What is a Branch?</a></li>
<li><a href="#a-quick-note-about-git-pull" id="toc-a-quick-note-about-git-pull" d__=""><span class="toc-section-number" d__="">5.2</span> A Quick Note about <code s__="13" d__="">git pull</code></a></li>
<li><a href="#head-and-branches" id="toc-head-and-branches" d__=""><span class="toc-section-number" d__="">5.3</span> <code s__="13" d__="">HEAD</code> and Branches</a></li>
<li><a href="#creating-a-branch" id="toc-creating-a-branch" d__=""><span class="toc-section-number" d__="">5.4</span> Creating a Branch</a></li>
<li><a href="#make-some-commits-on-a-branch" id="toc-make-some-commits-on-a-branch" d__=""><span class="toc-section-number" d__="">5.5</span> Make Some Commits on a Branch</a></li>
<li><a href="#merging-fast-forward" id="toc-merging-fast-forward" d__=""><span class="toc-section-number" d__="">5.6</span> Merging: Fast-Forward</a></li>
<li><a href="#deleting-a-branch" id="toc-deleting-a-branch" d__=""><span class="toc-section-number" d__="">5.7</span> Deleting a Branch</a></li>
</ul></li>
<li><a href="#merging-and-conflicts" id="toc-merging-and-conflicts" d__=""><span class="toc-section-number" d__="">6</span> Merging and Conflicts</a>
<ul>
<li><a href="#an-example-of-divergent-branches" id="toc-an-example-of-divergent-branches" d__=""><span class="toc-section-number" d__="">6.1</span> An Example of Divergent Branches</a></li>
<li><a href="#merging-divergent-branches" id="toc-merging-divergent-branches" d__=""><span class="toc-section-number" d__="">6.2</span> Merging Divergent Branches</a></li>
<li><a href="#merge-conflicts" id="toc-merge-conflicts" d__=""><span class="toc-section-number" d__="">6.3</span> Merge Conflicts</a></li>
<li><a href="#what-a-conflict-looks-like" id="toc-what-a-conflict-looks-like" d__=""><span class="toc-section-number" d__="">6.4</span> What a Conflict Looks Like</a></li>
<li><a href="#why-merge-conflicts-happen" id="toc-why-merge-conflicts-happen" d__=""><span class="toc-section-number" d__="">6.5</span> Why Merge Conflicts Happen</a></li>
<li><a href="#merging-with-ides-or-other-merge-tools" id="toc-merging-with-ides-or-other-merge-tools" d__=""><span class="toc-section-number">6.6</span> Merging with IDEs or other Merge Tools</a></li>
<li><a href="#merge-big-ideas" id="toc-merge-big-ideas" d__=""><span class="toc-section-number">6.7</span> Merge Big Ideas</a></li>
</ul></li>
<li><a href="#using-subdirectories-with-git" id="toc-using-subdirectories-with-git" d__=""><span class="toc-section-number">7</span> Using Subdirectories with Git</a>
<ul>
<li><a href="#repos-and-subdirectories" id="toc-repos-and-subdirectories" d__=""><span class="toc-section-number">7.1</span> Repos and Subdirectories</a>
<ul>
<li><a href="#what-about-subprojects" id="toc-what-about-subprojects" d__=""><span class="toc-section-number">7.1.1</span> What about Subprojects?</a></li>
</ul></li>
<li><a href="#accidentally-making-a-repo-in-your-home-directory" id="toc-accidentally-making-a-repo-in-your-home-directory" d__=""><span class="toc-section-number">7.2</span> Accidentally Making a Repo in your Home Directory</a></li>
<li><a href="#empty-subdirectories-in-repos" id="toc-empty-subdirectories-in-repos" d__=""><span class="toc-section-number">7.3</span> Empty Subdirectories in Repos</a></li>
</ul></li>
<li><a href="#ignoring-files-with-.gitignore" id="toc-ignoring-files-with-.gitignore" d__=""><span class="toc-section-number">8</span> Ignoring Files with <code s__="13">.gitignore</code></a>
<ul>
<li><a href="#adding-a-.gitignore-file" id="toc-adding-a-.gitignore-file" d__=""><span class="toc-section-number">8.1</span> Adding a <code s__="13">.gitignore</code> File</a></li>
<li><a href="#can-i-specify-subdirectories-in-.gitignore" id="toc-can-i-specify-subdirectories-in-.gitignore" d__=""><span class="toc-section-number">8.2</span> Can I Specify Subdirectories in <code s__="13">.gitignore</code>?</a></li>
<li><a href="#where-do-i-put-the-.gitignore" id="toc-where-do-i-put-the-.gitignore" d__=""><span class="toc-section-number">8.3</span> Where do I Put the <code s__="13">.gitignore</code>?</a></li>
<li><a href="#wildcards" id="toc-wildcards" d__=""><span class="toc-section-number">8.4</span> Wildcards</a></li>
<li><a href="#negated-.gitignore-rules" id="toc-negated-.gitignore-rules" d__=""><span class="toc-section-number">8.5</span> Negated <code s__="13">.gitignore</code> Rules</a></li>
<li><a href="#how-to-ignore-all-files-except-a-few" id="toc-how-to-ignore-all-files-except-a-few" d__=""><span class="toc-section-number">8.6</span> How To Ignore All Files Except a Few?</a></li>
<li><a href="#getting-premade-.gitignore-files" id="toc-getting-premade-.gitignore-files" d__=""><span class="toc-section-number">8.7</span> Getting Premade <code s__="13">.gitignore</code> Files</a></li>
</ul></li>
<li><a href="#remotes-repos-in-other-places" id="toc-remotes-repos-in-other-places" d__=""><span class="toc-section-number">9</span> Remotes: Repos in Other Places</a>
<ul>
<li><a href="#remote-and-branch-notation" id="toc-remote-and-branch-notation" d__=""><span class="toc-section-number">9.1</span> Remote and Branch Notation</a></li>
<li><a href="#getting-a-list-of-remotes" id="toc-getting-a-list-of-remotes" d__=""><span class="toc-section-number">9.2</span> Getting a List of Remotes</a></li>
<li><a href="#renaming-a-remote" id="toc-renaming-a-remote" d__=""><span class="toc-section-number">9.3</span> Renaming a Remote</a></li>
<li><a href="#adding-a-remote" id="toc-adding-a-remote" d__=""><span class="toc-section-number">9.4</span> Adding a Remote</a></li>
</ul></li>
<li><a href="#remote-tracking-branches" id="toc-remote-tracking-branches" d__=""><span class="toc-section-number">10</span> Remote Tracking Branches</a>
<ul>
<li><a href="#branches-on-remotes" id="toc-branches-on-remotes" d__=""><span class="toc-section-number">10.1</span> Branches on Remotes</a></li>
<li><a href="#pushing-to-a-remote" id="toc-pushing-to-a-remote" d__=""><span class="toc-section-number">10.2</span> Pushing to a Remote</a></li>
<li><a href="#making-a-branch-and-pushing-to-remote" id="toc-making-a-branch-and-pushing-to-remote" d__=""><span class="toc-section-number">10.3</span> Making a Branch and Pushing to Remote</a></li>
</ul></li>
<li><a href="#file-states" id="toc-file-states" d__=""><span class="toc-section-number">11</span> File States</a>
<ul>
<li><a href="#what-states-can-files-in-git-be-in" id="toc-what-states-can-files-in-git-be-in" d__=""><span class="toc-section-number">11.1</span> What States Can Files in Git Be In?</a></li>
<li><a href="#unmodified-to-untracked" id="toc-unmodified-to-untracked" d__=""><span class="toc-section-number">11.2</span> Unmodified to Untracked</a></li>
<li><a href="#files-in-multiple-states" id="toc-files-in-multiple-states" d__=""><span class="toc-section-number">11.3</span> Files In Multiple States</a></li>
</ul></li>
<li><a href="#comparing-files-with-diff" id="toc-comparing-files-with-diff" d__=""><span class="toc-section-number">12</span> Comparing Files with Diff</a>
<ul>
<li><a href="#basic-usage" id="toc-basic-usage" d__=""><span class="toc-section-number">12.1</span> Basic Usage</a></li>
<li><a href="#diffing-the-stage" id="toc-diffing-the-stage" d__=""><span class="toc-section-number">12.2</span> Diffing the Stage</a></li>
<li><a href="#more-diff-fun" id="toc-more-diff-fun" d__=""><span class="toc-section-number">12.3</span> More Diff Fun</a>
<ul>
<li><a href="#diff-any-commits-or-branches" id="toc-diff-any-commits-or-branches" d__=""><span class="toc-section-number">12.3.1</span> Diff Any Commits or Branches</a></li>
<li><a href="#diffing-with-parent-commit" id="toc-diffing-with-parent-commit" d__=""><span class="toc-section-number">12.3.2</span> Diffing with Parent Commit</a></li>
<li><a href="#more-context" id="toc-more-context" d__=""><span class="toc-section-number">12.3.3</span> More Context</a></li>
<li><a href="#just-the-file-names" id="toc-just-the-file-names" d__=""><span class="toc-section-number">12.3.4</span> Just the File Names</a></li>
<li><a href="#ignoring-whitespace" id="toc-ignoring-whitespace" d__=""><span class="toc-section-number">12.3.5</span> Ignoring Whitespace</a></li>
<li><a href="#just-certain-files" id="toc-just-certain-files" d__=""><span class="toc-section-number">12.3.6</span> Just Certain Files</a></li>
<li><a href="#inter-branch-diffs" id="toc-inter-branch-diffs" d__=""><span class="toc-section-number">12.3.7</span> Inter-branch Diffs</a></li>
</ul></li>
<li><a href="#difftool" id="toc-difftool" d__=""><span class="toc-section-number">12.4</span> Difftool</a></li>
</ul></li>
<li><a href="#renaming-and-removing-files" id="toc-renaming-and-removing-files" d__=""><span class="toc-section-number">13</span> Renaming and Removing Files</a>
<ul>
<li><a href="#renaming-files" id="toc-renaming-files" d__=""><span class="toc-section-number">13.1</span> Renaming Files</a></li>
<li><a href="#removing-files" id="toc-removing-files" d__=""><span class="toc-section-number">13.2</span> Removing Files</a></li>
</ul></li>
<li><a href="#collaboration-across-branches" id="toc-collaboration-across-branches" d__=""><span class="toc-section-number">14</span> Collaboration across Branches</a>
<ul>
<li><a href="#communication-and-delegation" id="toc-communication-and-delegation" d__=""><span class="toc-section-number">14.1</span> Communication and Delegation</a></li>
<li><a href="#approach-everyone-uses-one-branch" id="toc-approach-everyone-uses-one-branch" d__=""><span class="toc-section-number">14.2</span> Approach: Everyone Uses One Branch</a></li>
<li><a href="#approach-everyone-uses-their-own-branch" id="toc-approach-everyone-uses-their-own-branch" d__=""><span class="toc-section-number">14.3</span> Approach: Everyone Uses Their Own Branch</a></li>
<li><a href="#approach-everyone-merges-to-the-dev-branch" id="toc-approach-everyone-merges-to-the-dev-branch" d__=""><span class="toc-section-number">14.4</span> Approach: Everyone Merges to the Dev Branch</a></li>
</ul></li>
<li><a href="#rebasing-moving-commits" id="toc-rebasing-moving-commits" d__=""><span class="toc-section-number">15</span> Rebasing: Moving Commits</a>
<ul>
<li><a href="#contrasted-to-merging" id="toc-contrasted-to-merging" d__=""><span class="toc-section-number">15.1</span> Contrasted to Merging</a></li>
<li><a href="#how-it-works" id="toc-how-it-works" d__=""><span class="toc-section-number">15.2</span> How it Works</a></li>
<li><a href="#when-should-i-do-this" id="toc-when-should-i-do-this" d__=""><span class="toc-section-number">15.3</span> When Should I Do This?</a></li>
<li><a href="#pulling-and-rebasing" id="toc-pulling-and-rebasing" d__=""><span class="toc-section-number">15.4</span> Pulling and Rebasing</a></li>
<li><a href="#rebasing-conflicts" id="toc-rebasing-conflicts" d__=""><span class="toc-section-number">15.5</span> Conflicts</a></li>
<li><a href="#squashing-commits" id="toc-squashing-commits" d__=""><span class="toc-section-number">15.6</span> Squashing Commits</a>
<ul>
<li><a href="#squash-versus-fixup" id="toc-squash-versus-fixup" d__=""><span class="toc-section-number">15.6.1</span> Squash versus Fixup</a></li>
</ul></li>
<li><a href="#multiple-conflicts-in-the-rebase" id="toc-multiple-conflicts-in-the-rebase" d__=""><span class="toc-section-number">15.7</span> Multiple Conflicts in the Rebase</a></li>
</ul></li>
<li><a href="#stashing-temporarily-set-changes-aside" id="toc-stashing-temporarily-set-changes-aside" d__=""><span class="toc-section-number">16</span> Stashing: Temporarily Set Changes Aside</a>
<ul>
<li><a href="#example" id="toc-example" d__=""><span class="toc-section-number">16.1</span> Example</a></li>
<li><a href="#the-stash-stack" id="toc-the-stash-stack" d__=""><span class="toc-section-number">16.2</span> The Stash Stack</a></li>
<li><a href="#conflicts" id="toc-conflicts" d__=""><span class="toc-section-number">16.3</span> Conflicts</a></li>
<li><a href="#stashing-new-files" id="toc-stashing-new-files" d__=""><span class="toc-section-number">16.4</span> Stashing New Files</a></li>
</ul></li>
<li><a href="#github-forking-and-pull-requests" id="toc-github-forking-and-pull-requests" d__=""><span class="toc-section-number">17</span> GitHub: Forking and Pull Requests</a>
<ul>
<li><a href="#making-a-fork" id="toc-making-a-fork" d__=""><span class="toc-section-number">17.1</span> Making a Fork</a></li>
<li><a href="#making-your-changes" id="toc-making-your-changes" d__=""><span class="toc-section-number">17.2</span> Making Your Changes</a></li>
<li><a href="#syncing-the-upstream-with-your-fork" id="toc-syncing-the-upstream-with-your-fork" d__=""><span class="toc-section-number">17.3</span> Syncing the Upstream with Your Fork</a></li>
<li><a href="#making-a-pull-request" id="toc-making-a-pull-request" d__=""><span class="toc-section-number">17.4</span> Making a Pull Request</a></li>
<li><a href="#flipside-merging-a-pull-request" id="toc-flipside-merging-a-pull-request" d__=""><span class="toc-section-number">17.5</span> Flipside: Merging a Pull Request</a></li>
<li><a href="#making-many-pull-requests-with-branches" id="toc-making-many-pull-requests-with-branches" d__=""><span class="toc-section-number">17.6</span> Making Many Pull Requests with Branches</a></li>
<li><a href="#deleting-a-pull-request" id="toc-deleting-a-pull-request" d__=""><span class="toc-section-number">17.7</span> Deleting a Pull Request</a></li>
<li><a href="#sync-cl" id="toc-sync-cl" d__=""><span class="toc-section-number">17.8</span> Syncing on the Command Line</a></li>
</ul></li>
<li><a href="#reverting-undoing-commits" id="toc-reverting-undoing-commits" d__=""><span class="toc-section-number">18</span> Reverting: Undoing Commits</a>
<ul>
<li><a href="#performing-the-revert" id="toc-performing-the-revert" d__=""><span class="toc-section-number">18.1</span> Performing the Revert</a></li>
<li><a href="#revert-conflicts" id="toc-revert-conflicts" d__=""><span class="toc-section-number">18.2</span> Revert Conflicts</a></li>
<li><a href="#reverting-multiple-commits" id="toc-reverting-multiple-commits" d__=""><span class="toc-section-number">18.3</span> Reverting Multiple Commits</a></li>
</ul></li>
<li><a href="#reset-moving-branches-around" id="toc-reset-moving-branches-around" d__=""><span class="toc-section-number">19</span> Reset: Moving Branches Around</a>
<ul>
<li><a href="#soft-reset" id="toc-soft-reset" d__=""><span class="toc-section-number">19.1</span> Soft Reset</a></li>
<li><a href="#mixed-reset" id="toc-mixed-reset" d__=""><span class="toc-section-number">19.2</span> Mixed Reset</a></li>
<li><a href="#hard-reset" id="toc-hard-reset" d__=""><span class="toc-section-number">19.3</span> Hard Reset</a></li>
<li><a href="#reset-to-a-divergent-branch" id="toc-reset-to-a-divergent-branch" d__=""><span class="toc-section-number">19.4</span> Reset to a Divergent Branch</a></li>
<li><a href="#resetting-files" id="toc-resetting-files" d__=""><span class="toc-section-number">19.5</span> Resetting Files</a></li>
<li><a href="#pushing-branch-changes-to-a-remote" id="toc-pushing-branch-changes-to-a-remote" d__=""><span class="toc-section-number">19.6</span> Pushing Branch Changes to a Remote</a>
<ul>
<li><a href="#forcing-the-push" id="toc-forcing-the-push" d__=""><span class="toc-section-number">19.6.1</span> Forcing the Push</a></li>
<li><a href="#example-rewrite-public-history" id="toc-example-rewrite-public-history" d__=""><span class="toc-section-number">19.6.2</span> Example: Rewrite Public History</a></li>
<li><a href="#example-receiving-rewritten-history" id="toc-example-receiving-rewritten-history" d__=""><span class="toc-section-number">19.6.3</span> Example: Receiving Rewritten History</a></li>
</ul></li>
<li><a href="#resetting-without-moving-head" id="toc-resetting-without-moving-head" d__=""><span class="toc-section-number">19.7</span> Resetting Without Moving <code s__="13">HEAD</code></a></li>
<li><a href="#resetting-to-remove-credentials" id="toc-resetting-to-remove-credentials" d__=""><span class="toc-section-number">19.8</span> Resetting to Remove Credentials</a></li>
</ul></li>
<li><a href="#the-reference-log-reflog" id="toc-the-reference-log-reflog" d__=""><span class="toc-section-number">20</span> The Reference Log, “reflog”</a>
<ul>
<li><a href="#what-can-we-use-it-for" id="toc-what-can-we-use-it-for" d__=""><span class="toc-section-number">20.1</span> What Can We Use It For?</a></li>
<li><a href="#looking-back-at-an-orphan-commit" id="toc-looking-back-at-an-orphan-commit" d__=""><span class="toc-section-number">20.2</span> Looking Back at an Orphan Commit</a></li>
<li><a href="#reflog-selectors" id="toc-reflog-selectors" d__=""><span class="toc-section-number">20.3</span> Reflog Selectors</a></li>
</ul></li>
<li><a href="#patch-mode-applying-partial-changes" id="toc-patch-mode-applying-partial-changes" d__=""><span class="toc-section-number">21</span> Patch Mode: Applying Partial Changes</a>
<ul>
<li><a href="#adding-files-in-patch-mode" id="toc-adding-files-in-patch-mode" d__=""><span class="toc-section-number">21.1</span> Adding Files in Patch Mode</a></li>
<li><a href="#resetting-files-in-patch-mode" id="toc-resetting-files-in-patch-mode" d__=""><span class="toc-section-number">21.2</span> Resetting Files in Patch Mode</a></li>
<li><a href="#other-patch-mode-commands" id="toc-other-patch-mode-commands" d__=""><span class="toc-section-number">21.3</span> Other Patch Mode Commands</a></li>
</ul></li>
<li><a href="#cherry-pick-bringing-in-specific-commits" id="toc-cherry-pick-bringing-in-specific-commits" d__=""><span class="toc-section-number">22</span> Cherry-Pick: Bringing in Specific Commits</a>
<ul>
<li><a href="#cherry-pick-example" id="toc-cherry-pick-example" d__=""><span class="toc-section-number">22.1</span> Cherry-Pick Example</a></li>
<li><a href="#cherry-pick-conflicts" id="toc-cherry-pick-conflicts" d__=""><span class="toc-section-number">22.2</span> Cherry-Pick Conflicts</a></li>
</ul></li>
<li><a href="#whos-to-blame-for-this-code" id="toc-whos-to-blame-for-this-code" d__=""><span class="toc-section-number">23</span> Who’s to Blame for this Code?</a>
<ul>
<li><a href="#fancier-blaming" id="toc-fancier-blaming" d__=""><span class="toc-section-number">23.1</span> Fancier Blaming</a></li>
</ul></li>
<li><a href="#configuration" id="toc-configuration" d__=""><span class="toc-section-number">24</span> Configuration</a>
<ul>
<li><a href="#local-configuration" id="toc-local-configuration" d__=""><span class="toc-section-number">24.1</span> Local Configuration</a></li>
<li><a href="#listing-the-current-config" id="toc-listing-the-current-config" d__=""><span class="toc-section-number">24.2</span> Listing the Current Config</a></li>
<li><a href="#getting-setting-and-deleting-variables" id="toc-getting-setting-and-deleting-variables" d__=""><span class="toc-section-number">24.3</span> Getting, Setting, and Deleting Variables</a></li>
<li><a href="#some-popular-variables" id="toc-some-popular-variables" d__=""><span class="toc-section-number">24.4</span> Some Popular Variables</a></li>
<li><a href="#editing-the-config-directly" id="toc-editing-the-config-directly" d__=""><span class="toc-section-number">24.5</span> Editing the Config Directly</a></li>
<li><a href="#conditional-configuration" id="toc-conditional-configuration" d__=""><span class="toc-section-number">24.6</span> Conditional Configuration</a></li>
<li><a href="#config-old" id="toc-config-old" d__=""><span class="toc-section-number">24.7</span> Older Git Versions</a></li>
</ul></li>
<li><a href="#git-aliases" id="toc-git-aliases" d__=""><span class="toc-section-number">25</span> Git Aliases</a>
<ul>
<li><a href="#creating-an-alias" id="toc-creating-an-alias" d__=""><span class="toc-section-number">25.1</span> Creating an Alias</a></li>
<li><a href="#displaying-aliases" id="toc-displaying-aliases" d__=""><span class="toc-section-number">25.2</span> Displaying Aliases</a></li>
<li><a href="#some-neat-sample-aliases" id="toc-some-neat-sample-aliases" d__=""><span class="toc-section-number">25.3</span> Some Neat Sample Aliases</a></li>
<li><a href="#seeing-gits-alias-expansion" id="toc-seeing-gits-alias-expansion" d__="" class=""><span class="toc-section-number">25.4</span> Seeing Git’s Alias Expansion</a></li>
</ul></li>
<li><a href="#changing-identity" id="toc-changing-identity" d__="" class=""><span class="toc-section-number">26</span> Changing Identity</a>
<ul>
<li><a href="#changing-the-user-configuration-variables" id="toc-changing-the-user-configuration-variables" d__="" class=""><span class="toc-section-number">26.1</span> Changing the User Configuration Variables</a></li>
<li><a href="#changing-the-ssh-authentication-key" id="toc-changing-the-ssh-authentication-key" d__="" class=""><span class="toc-section-number">26.2</span> Changing the SSH Authentication Key</a></li>
<li><a href="#changing-your-gpg-signing-key" id="toc-changing-your-gpg-signing-key" d__="" class=""><span class="toc-section-number">26.3</span> Changing your GPG Signing Key</a></li>
<li><a href="#changing-your-ssh-signing-key" id="toc-changing-your-ssh-signing-key" d__="" class=""><span class="toc-section-number">26.4</span> Changing your SSH Signing Key</a></li>
</ul></li>
<li><a href="#amending-commits" id="toc-amending-commits" d__="" class=""><span class="toc-section-number">27</span> Amending Commits</a>
<ul>
<li><a href="#amending-the-commit-message" id="toc-amending-the-commit-message" d__="" class=""><span class="toc-section-number">27.1</span> Amending the Commit Message</a></li>
<li><a href="#adding-some-files-to-the-commit" id="toc-adding-some-files-to-the-commit" d__="" class=""><span class="toc-section-number">27.2</span> Adding some Files to the Commit</a></li>
</ul></li>
<li><a href="#difftool-1" id="toc-difftool-1" d__="" class=""><span class="toc-section-number">28</span> Difftool</a>
<ul>
<li><a href="#configuring" id="toc-configuring" d__="" class=""><span class="toc-section-number">28.1</span> Configuring</a></li>
<li><a href="#available-difftools" id="toc-available-difftools" d__="" class=""><span class="toc-section-number">28.2</span> Available Difftools</a></li>
</ul></li>
<li><a href="#mergetool" id="toc-mergetool" d__="" class=""><span class="toc-section-number">29</span> Mergetool</a>
<ul>
<li><a href="#merge-tool-operations" id="toc-merge-tool-operations" d__="" class=""><span class="toc-section-number">29.1</span> Merge Tool Operations</a></li>
<li><a href="#some-example-merge-tools" id="toc-some-example-merge-tools" d__="" class=""><span class="toc-section-number">29.2</span> Some Example Merge Tools</a></li>
<li><a href="#using-vimdiff-as-a-merge-tool" id="toc-using-vimdiff-as-a-merge-tool" d__="" class=""><span class="toc-section-number">29.3</span> Using Vimdiff as a Merge Tool</a></li>
<li><a href="#backing-up-the-originals" id="toc-backing-up-the-originals" d__="" class=""><span class="toc-section-number">29.4</span> Backing up the Originals</a></li>
</ul></li>
<li><a href="#making-playground" id="toc-making-playground" d__="" class=""><span class="toc-section-number">30</span> Appendix: Making a Playground</a>
<ul>
<li><a href="#cloning-bare-repos" id="toc-cloning-bare-repos" d__="" class=""><span class="toc-section-number">30.1</span> Cloning Bare Repos</a></li>
<li><a href="#automating-playground-builds" id="toc-automating-playground-builds" d__="" class=""><span class="toc-section-number">30.2</span> Automating Playground Builds</a></li>
</ul></li>
<li><a href="#editor-get-out" id="toc-editor-get-out" d__="" class=""><span class="toc-section-number">31</span> Appendix: Getting Out of Editors</a></li>
<li><a href="#appendix-errors-and-scary-messages" id="toc-appendix-errors-and-scary-messages" d__="" class=""><span class="toc-section-number">32</span> Appendix: Errors and Scary Messages</a>
<ul>
<li><a href="#detached-head" id="toc-detached-head" d__="" class=""><span class="toc-section-number">32.1</span> Detached Head</a></li>
<li><a href="#upstream-branch-name-doesnt-match-current" id="toc-upstream-branch-name-doesnt-match-current" d__="" class=""><span class="toc-section-number">32.2</span> Upstream Branch Name Doesn’t Match Current</a></li>
<li><a href="#current-branch-has-no-upstream-branch" id="toc-current-branch-has-no-upstream-branch" d__="" class=""><span class="toc-section-number">32.3</span> Current Branch Has No Upstream Branch</a></li>
</ul></li>
<li><a href="#appendix-other-references" id="toc-appendix-other-references" d__="" class=""><span class="toc-section-number">33</span> Appendix: Other References</a></li>
</ul>
</nav>
<!-- BG_NEW_CHAPTER -->
<!-- Beej's guide to Git

# vim: ts=4:sw=4:nosi:et:tw=72
-->
<!-- No hyphenation -->
<!-- \hyphenation{scalbn} -->
<!-- Index see alsos -->
<p> </p>
<h1 data-number="1" id="foreword" d__=""><span class="header-section-number">1</span> Foreword</h1>
<p d__="">Hello again, everyone! In my role as an industry 
professional-turned-college instructor, I definitely see my fair share 
of students struggling with Git.</p>
<p d__="">And who can blame ’em? It’s a seemingly-overcomplicated system
 with lots of pitfalls and merge conflicts and detached heads and 
remotes and cherrypicks and rebases and an endless array of other 
commands that do who-knows-what.</p>
<p d__="">Which leads us directly to the goal: let’s make sense of all 
this. We’ll start off easy (allegedly) with commands mixed in with some 
theory of operation. And we’ll see that understanding what Git does 
under the hood is critical to using it correctly.</p>
<p d__="">And I <em>promise</em> there’s definitely a chance that after 
you get through some of this guide, you might actually start to 
appreciate Git and like using it.</p>
<p d__="">I’ve been using it for years (I’m using it for the source code
 for this guide right now) and I can certainly vouch for it becoming 
easier over time, and then, even, second nature.</p>
<p d__="">But first, some boilerplate!</p>
<h2 data-number="1.1" id="audience" d__=""><span class="header-section-number">1.1</span> Audience</h2>
<p d__="">The initial draft of this guide was put online for the 
university students where I worked (or maybe still work, depending on 
when you’re reading this) as an instructor. So it’s pretty natural to 
assume that’s the audience I had in mind.</p>
<p d__="">But I’m also hoping that there are enough other folks out 
there who might get something of use from the guide as well, and I’ve 
written it in a more general sense with all you non-college students in 
mind.</p>
<p d__="">This guide assumes that you have basic POSIX shell (i.e.&nbsp;Bash, Zsh, etc.) usage skills, i.e.:</p>
<ul>
<li d__="">You know basic commands like <code s__="13">cd</code>, <code s__="13">ls</code>, <code s__="13">mkdir</code>, <code s__="13">cp</code>, etc.</li>
<li d__="">You can install more software.</li>
</ul>
<p d__="">It also assumes you’re in a Unix-like environment, 
e.g.&nbsp;Linux, BSD, Unix, macOS, WSL, etc. with a POSIX shell. The 
farther you are away from that (e.g.&nbsp;PowerShell, Commodore 64), the
 more manual translation you’ll have to do.</p>
<p d__="">Windows is naturally the sticking point, there. Luckily Git 
for Windows comes with a Bash shell variant called Git Bash. You can 
also install <a href="https://learn.microsoft.com/en-us/windows/wsl/" d__="">WSL</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup s__="13" d__="">1</sup></a>
 to get a Linux environment running on your Windows box. I 
wholeheartedly recommend this for hacker types, since Unix-like systems 
are hacker-awesome, and additionally I recommend you all become hacker 
types.</p>
<h2 data-number="1.2" id="official-homepage" d__=""><span class="header-section-number">1.2</span> Official Homepage</h2>
<p d__="">This official location of this document is (currently) <a href="https://beej.us/guide/bggit/" d__="">https://beej.us/guide/bggit/</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup s__="13" d__="">2</sup></a>.</p>
<h2 data-number="1.3" id="email-policy" d__=""><span class="header-section-number">1.3</span> Email Policy</h2>
<p d__="">I’m generally available to help out with email questions so 
feel free to write in, but I can’t guarantee a response. I lead a pretty
 busy life and there are times when I just can’t answer a question you 
have. When that’s the case, I usually just delete the message. It’s 
nothing personal; I just won’t ever have the time to give the detailed 
answer you require.</p>
<p d__="">As a rule, the more complex the question, the less likely I am
 to respond. If you can narrow down your question before mailing it and 
be sure to include any pertinent information (like platform, compiler, 
error messages you’re getting, and anything else you think might help me
 troubleshoot), you’re much more likely to get a response.</p>
<p d__="">If you don’t get a response, hack on it some more, try to find
 the answer, and if it’s still elusive, then write me again with the 
information you’ve found and hopefully it will be enough for me to help 
out.</p>
<p d__="">Now that I’ve badgered you about how to write and not write me, I’d just like to let you know that I <em>fully</em>
 appreciate all the praise the guide has received over the years. It’s a
 real morale boost, and it gladdens me to hear that it is being used for
 good! <code s__="13">:-)</code> Thank you!</p>
<h2 data-number="1.4" id="mirroring" d__=""><span class="header-section-number">1.4</span> Mirroring</h2>
<p d__="">You are more than welcome to mirror this site, whether 
publicly or privately. If you publicly mirror the site and want me to 
link to it from the main page, drop me a line at <a href="mailto:beej@beej.us"><code s__="13" d__="">beej@beej.us</code></a>.</p>
<h2 data-number="1.5" id="note-for-translators" d__=""><span class="header-section-number">1.5</span> Note for Translators</h2>
<p d__=""> If you want to translate the guide into another language, write me at <a href="mailto:beej@beej.us"><code s__="13" d__="">beej@beej.us</code></a> and I’ll link to your translation from the main page. Feel free to add your name and contact info to the translation.</p>
<p d__="">Please note the license restrictions in the Copyright and Distribution section, below. </p>
<h2 data-number="1.6" id="copyright-and-distribution" d__=""><span class="header-section-number">1.6</span> Copyright and Distribution</h2>
<p d__="">Beej’s Guide to Git is Copyright © 2024 Brian “Beej Jorgensen” Hall.</p>
<p d__="">With specific exceptions for source code and translations, 
below, this work is licensed under the Creative Commons 
Attribution-Noncommercial-No Derivative Works 3.0 License. To view a 
copy of this license, visit <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/"><code s__="13" d__="">https://creativecommons.org/licenses/by-nc-nd/3.0/</code></a> or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.</p>
<p d__="">One specific exception to the “No Derivative Works” portion of
 the license is as follows: this guide may be freely translated into any
 language, provided the translation is accurate, and the guide is 
reprinted in its entirety. The same license restrictions apply to the 
translation as to the original guide. The translation may also include 
the name and contact information for the translator.</p>
<p d__="">The programming source code presented in this document is 
hereby granted to the public domain, and is completely free of any 
license restriction.</p>
<p d__="">Educators are freely encouraged to recommend or supply copies of this guide to their students.</p>
<p d__="">Contact <a href="mailto:beej@beej.us"><code s__="13" d__="">beej@beej.us</code></a> for more information.</p>
<h2 data-number="1.7" id="dedication" d__=""><span class="header-section-number">1.7</span> Dedication</h2>
<p d__="">The hardest things about writing these guides are:</p>
<ul>
<li d__="">Learning the material in enough detail to be able to explain it</li>
<li d__="">Figuring out the best way to explain it clearly, a seemingly-endless iterative process</li>
<li d__="">Putting myself out there as a so-called <em>authority</em>, when really I’m just a regular human trying to make sense of it all, just like everyone else</li>
<li d__="">Keeping at it when so many other things draw my attention</li>
</ul>
<p d__="">A lot of people have helped me through this process, and I want to acknowledge those who have made this book possible:</p>
<ul>
<li d__="">Everyone on the Internet who decided to help share their 
knowledge in one form or another. The free sharing of instructive 
information is what makes the Internet the great place that it is.</li>
<li d__="">Everyone who submitted corrections and pull-requests on everything from misleading instructions to typos.</li>
</ul>
<p d__="">Thank you! ♥</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="2" id="git-basics" d__=""><span class="header-section-number">2</span> Git Basics</h1>
<p d__="">Welcome to the <em>Beej’s Guide to Git</em>!</p>
<p d__="">This guide has two goals, in no particular order:</p>
<ol type="1">
<li d__="">Help you get some familiarity with Git syntax on the command line.</li>
<li d__="">Help you get a mental model that describes how Git stores its information.</li>
</ol>
<p d__="">I feel the second of these is very important for becoming even
 remotely adept at using Git, which is why I spend so much time talking 
about it. Yes, you can get by with a cheat-sheet of common Git commands,
 but if you want to fearlessly use the tool to its full effectiveness, 
you gotta learn the internals!</p>
<h2 data-number="2.1" id="what-is-git" d__=""><span class="header-section-number">2.1</span> What is Git?</h2>
<p d__="">Git is a <em>source code control system</em>, also known as a <em>version control system</em>.</p>
<p d__="">Clear? OK, not really? Let’s dive in a bit more, then!</p>
<p d__="">Git’s main job is to keep a log of <em>snapshots</em> of the current state of all your source code in a particular directory tree.</p>
<p d__="">The idea is that you’ll make some changes (to implement a feature, for example), and then you’ll <em>commit</em> those changes to the <em>source code repo</em> (repository) once the feature is ready. This saves the changes to the repo and allows other collaborators to see them.</p>
<p d__="">And if you ever change something you didn’t want to, or you want to see how things were implemented in the past, you can always <em>check out</em> a previous commit and take a look.</p>
<p d__="">Git keeps a history of all the commits you’ve ever made. 
Assuming nothing criminal is happening, this should be a great relief to
 you; if you accidentally delete a bunch of code, you can look at a 
previous commit and get it all back.</p>
<p d__="">But that’s not all! As we’ll see, Git also works well as a 
remote backup mechanism, and works wonderfully when cooperating with a 
team on the same codebase.</p>
<h3 data-number="2.1.1" id="definitions" d__=""><span class="header-section-number">2.1.1</span> Definitions:</h3>
<ul>
<li><p d__=""><strong>Source Code Control System</strong>/<strong>Version Control System</strong>:
 Software that manages changes to a software project potentially 
consisting of thousands of source files edited by potentially hundreds 
of developers. Git is a source code control system. There are many 
others.</p></li>
<li><p d__=""> <strong>Commit</strong>: An explicit moment in time where
 a snapshot of the contents of all the source files are recorded in the 
source code control system. Very, very typically the code is in a 
working state when the commit is made; in other words, the commit 
represents in some ways a seal of approval that the repo in this state 
is in working order even if the changes aren’t complete.</p>
<p d__="">Example commits might be:</p>
<ul>
<li d__="">“Add feature <em>X</em> to the codebase”</li>
<li d__="">“Fix bug <em>Y</em>”</li>
<li d__="">“Merge other contributor’s changes into the codebase”</li>
<li d__="">“Partially complete the Spanish translation”</li>
</ul></li>
<li><p d__=""><strong>Repo</strong>/<strong>Source Code Repository</strong>:
 This is where a particular software project is stored in the source 
code control system. Typically each project has its own repo. For 
example, you might “create a Git repo” to hold a new project you’re 
working on.</p>
<p d__="">Sometimes repos are local to your computer, and sometimes they’re stored on other, remote computers.</p></li>
<li><p d__=""><strong>Check out</strong>: To look at a particular commit (or branch—more later).</p></li>
</ul>
<h2 data-number="2.2" id="what-is-github" d__=""><span class="header-section-number">2.2</span> What is GitHub?</h2>
<p d__=""><a href="https://github.com/" d__="">GitHub</a><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup s__="13" d__="">3</sup></a> is <strong>not</strong> Git.</p>
<h2 data-number="2.3" id="what-is-github-1" d__=""><span class="header-section-number">2.3</span> What is GitHub?</h2>
<p></p>
<p d__="">Oh, more?</p>
<p d__=""><a href="https://github.com/" d__="">GitHub</a> is a website that provides a front end to a lot of Git features, and some additional GitHub-specific features, as well.</p>
<p d__="">It also provides remote storage for your repo, which acts as a backup.</p>
<p d__="">Takeaway: GitHub is a web-based front-end to Git (specifically
 one that works on the copy of your repo at GitHub—stay tuned for more 
on that later).</p>
<blockquote>
<p d__=""><strong>What about GitLab and Gitea?</strong> <a href="https://gitlab.com/" d__="">GitLab</a><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup s__="13" d__="">4</sup></a> is a competitor to GitHub. <a href="https://docs.gitea.com/" d__="">Gitea</a><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup s__="13" d__="">5</sup></a>
 is an open-source competitor that allows you to basically run a 
GitHub-like front-end on your own server. None of this information is 
immediately important.</p>
</blockquote>
<p d__="">Regardless of whatever repos you have on GitHub, you’ll also have copies (known as <em>clones</em>)
 of those repos on your local system to work on. Periodically, in a 
common workflow, you’ll sync your copy of the repo with GitHub.</p>
<blockquote>
<p d__=""><strong>You don’t need GitHub.</strong> Even though you might 
be commonly using GitHub, there’s no law that says you have to. You can 
just create and destroy repos on your local system all you want, even if
 you’re not connected to the Internet. See <a href="#making-playground" d__="">Appendix: Making a Playground</a> for more information once you’re more comfortable with the basics.</p>
</blockquote>
<h2 data-number="2.4" id="the-most-basic-git-workflow" d__=""><span class="header-section-number">2.4</span> The Most Basic Git Workflow</h2>
<p></p>
<p d__="">There’s a super-common workflow that you’ll use repeatedly:</p>
<ol type="1">
<li d__=""><em>Clone</em> a <em>remote</em> repo. The remote repo is commonly on GitHub, but not necessarily.</li>
<li d__="">Make some local changes in your <em>working tree</em>, where the project files are on your computer.</li>
<li d__="">Add those changes to the <em>stage</em> (AKA the <em>index</em>).</li>
<li d__=""><em>Commit</em> those changes.</li>
<li d__=""><em>Push</em> your changes back to the remote repo.</li>
<li d__="">Go back to Step 2.</li>
</ol>
<p d__="">This is not the only workflow; there are others that are also not uncommon.</p>
<h3 data-number="2.4.1" id="definitions-1" d__=""><span class="header-section-number">2.4.1</span> Definitions:</h3>
<ul>
<li><p d__=""><strong>Clone</strong> (verb): to make a copy of a remote repo locally.</p></li>
<li><p d__=""><strong>Clone</strong> (noun): a local copy of a remote repo.</p></li>
<li><p d__=""><strong>Remote</strong>: In Git, a clone of a repo in another location.</p></li>
<li><p d__=""><strong>Working Tree</strong>: The directory that you go into to edit and change the files of the project. This is created when you clone.</p></li>
<li><p d__=""><strong>Stage</strong>: In Git, a place you add copies of 
files to in preparation for a commit. The commit will include all the 
files that you’ve placed on the stage. It will not include files you 
haven’t placed on the stage, even if you’ve modified those files.</p></li>
<li><p d__=""><strong>Index</strong>: A less-common name for the stage.</p></li>
</ul>
<h2 data-number="2.5" id="what-is-cloning" d__=""><span class="header-section-number">2.5</span> What is Cloning?</h2>
<p></p>
<p d__="">First, some backstory.</p>
<p d__="">Git is what’s known as a <em>distributed</em> version control 
system. This means that, unlike many version control systems, there’s no
 one central authority for the data. (Though commonly Git users treat a 
site like GitHub in this regard, loosely.)</p>
<p d__="">Instead, Git has <em>clones</em> of repos. These are complete,
 standalone copies of the entire commit history of that repo. Any clone 
can be recreated from any other. None of them are more powerful than any
 others.</p>
<p d__="">Looking back at The Most Basic Git Workflow, above, we see that Step 1 is to clone an existing repo.</p>
<p d__="">If you’re doing this from GitHub, it means you’re making a local copy of an entire, existing GitHub repo.</p>
<p d__="">Making a clone is a one time-process, typically (though you can make as many as you want).</p>
<h3 data-number="2.5.1" id="definitions-2" d__=""><span class="header-section-number">2.5.1</span> Definitions:</h3>
<ul>
<li><p d__=""><strong>Distributed Version Control System</strong>: A VCS in which there is no central authority of the data, and multiple clones of a repo exist.</p>
<p d__="">This means after you clone a repo, there are two: one that is remote, and one that is local to your computer.</p>
<p d__="">These clones are completely separate and changes you make to 
your local repo will not be reflected in the remote clone. Unless, that 
is, you explicitly make them interact.</p></li>
</ul>
<h2 data-number="2.6" id="how-do-clones-interact" d__=""><span class="header-section-number">2.6</span> How Do Clones Interact?</h2>
<p d__="">After you make a clone, there are two major operations you typically use:</p>
<ul>
<li><p d__=""><strong>Push</strong>: This takes your local commits and uploads them to the remote repo.</p></li>
<li><p d__=""><strong>Pull</strong>: This takes the remote commits and downloads them to your local repo.</p></li>
</ul>
<p d__="">Behind the scenes, there’s a process going on called a <em>merge</em>, but we’ll talk more about that later.</p>
<p d__="">Until you push, your local changes aren’t visible on the remote repo.</p>
<p d__="">Until you pull, the changes on the remote repo aren’t visible on your local repo.</p>
<p></p>
<h2 data-number="2.7" id="actual-git-usage" d__=""><span class="header-section-number">2.7</span> Actual Git Usage</h2>
<p></p>
<p d__="">Let’s put all this into play. This section assumes you have 
the command line Git tools installed. It also generally assumes you’re 
running a Unix shell like Bash or Zsh.</p>
<blockquote>
<p d__=""><strong>Where do you get these shells?</strong> Linux/BSD/Unix and Mac users will already have these shells. Recommendation for Windows users is to <a href="https://learn.microsoft.com/en-us/windows/wsl/" d__="">install and run Ubuntu with WSL</a><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup s__="13" d__="">6</sup></a> to get a virtual Linux installation.</p>
</blockquote>
<p d__="">For this example, we’ll assume we have a GitHub repo already in existence that we’re going to clone.</p>
<p d__="">Recall the process in The Most Basic Git Workflow, above:</p>
<ol type="1">
<li d__=""><em>Clone</em> a <em>remote</em> repo. The remote repo is commonly on GitHub, but not necessarily.</li>
<li d__="">Make some local changes.</li>
<li d__="">Add those changes to the <em>stage</em>.</li>
<li d__=""><em>Commit</em> those changes.</li>
<li d__=""><em>Push</em> your changes back to the remote repo.</li>
<li d__="">Go back to Step 2.</li>
</ol>
<h3 data-number="2.7.1" id="step-0-one-time-setup" d__=""><span class="header-section-number">2.7.1</span> Step 0: One-time Setup</h3>
<p></p>
<p d__="">“Wait! You didn’t say there was a Step 0!”</p>
<p d__="">Yes, one time, before you start using Git, you should tell it 
what your name and email address are. These will be attached to the 
commits you make to the repo.</p>
<p d__="">You can change them any time in the future, and you can even 
set them on a per-repo basis. But for now, let’s set them globally so 
Git doesn’t complain when you make a commit.</p>
<p d__="">You just have to do this once then never again (unless you want to).</p>
<p d__="">Type both of these on the command line, filling in the appropriate information.</p>
<blockquote>
<p d__=""><strong>In this guide, things you type at the shell prompt are indicated by a prefaced <code s__="13">$</code></strong>. Don’t type the <code s__="13">$</code>; just type what follows it. Your actual shell prompt might be <code s__="13">%</code> or <code s__="13">$</code> or something else, but here we use the <code s__="13">$</code> to indicate it.</p>
</blockquote>
<p></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb1-1" d__=""><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.name "Your Name"</span>
<span id="cb1-2" d__=""><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.email "your-email@example.com"</span></code></pre></div>
<p d__="">If you need to change them in the future, just run those commands again.</p>
<blockquote>
<p d__=""><strong>If you get an error with the above commands</strong> you might be running an older version of Git. Try them again, but leave out the word <code s__="13">set</code>. Or, better yet, see if you can get a newer version of Git.</p>
</blockquote>
<h3 data-number="2.7.2" id="step-1-clone-an-existing-repo" d__=""><span class="header-section-number">2.7.2</span> Step 1: Clone an Existing Repo</h3>
<p></p>
<p d__="">Let’s clone a repo! Here’s an example repo you can actually 
use. Don’t worry–you can’t mess anything up on the remote repo even 
though (and because) you don’t own it.</p>
<blockquote>
<p d__=""><strong>Like we said before, this isn’t the only workflow.</strong>
 Sometimes people make a local repo first, add some commits, then create
 a remote repo and push those commits. But for this example, we’ll 
assume the remote repo exists first, though this isn’t a requirement.</p>
</blockquote>
<p d__="">Switch in a subdirectory where you want the clone created. 
This command will create a new subdirectory out of there that will hold 
all the repo files.</p>
<p d__="">(In the example, anything that begins with <code s__="13">$</code> represents the shell prompt indicating this is input, not output. Don’t type the <code s__="13">$</code>; just type in the part after it.)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb2-1" d__=""><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>$ git clone https://github.com/beejjorgensen/git-example-repo.git</span></code></pre></div>
<p d__="">You should see some output similar to this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb3-1" d__=""><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Cloning into 'git-example-repo'...</span>
<span id="cb3-2" d__=""><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>remote: Enumerating objects: 4, done.</span>
<span id="cb3-3" d__=""><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>remote: Counting objects: 100% (4/4), done.</span>
<span id="cb3-4" d__=""><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>remote: Compressing objects: 100% (3/3), done.</span>
<span id="cb3-5" d__=""><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>remote: Total 4 (delta 0), reused 4 (delta 0), pack-reused 0</span>
<span id="cb3-6" d__=""><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>Receiving objects: 100% (4/4), done.</span></code></pre></div>
<p d__="">Congratulations! You have a clone of the repo. Let’s have a peek:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb4-1" d__=""><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>$ cd git-example-repo</span>
<span id="cb4-2" d__=""><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>$ ls -la</span></code></pre></div>
<p d__="">And we see a number of files:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb5-1" d__=""><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>total 16</span>
<span id="cb5-2" d__=""><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>drwxr-xr-x   5 user  user  160 Jan 26 11:50 .</span>
<span id="cb5-3" d__=""><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>drwxr-xr-x  14 user  user  448 Jan 26 11:50 ..</span>
<span id="cb5-4" d__=""><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>drwxr-xr-x  12 user  user  384 Jan 26 11:50 .git</span>
<span id="cb5-5" d__=""><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>-rw-r--r--   1 user  user   65 Jan 26 11:50 README.md</span>
<span id="cb5-6" d__=""><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>-rwxr-xr-x   1 user  user   47 Jan 26 11:50 hello.py</span></code></pre></div>
<p d__="">There are two files in this repo: <code s__="13">README.md</code> and <code s__="13">hello.py</code>.</p>
<blockquote>
<p d__=""><strong>The directory <code s__="13">.git</code> has special meaning;</strong>
 it’s the directory where Git keeps all its metadata and commits. You 
can look in there, but you don’t have to. If you do look, don’t change 
anything. The only thing that makes a directory a Git repo is the 
presence of a valid <code s__="13">.git</code> directory within it.</p>
</blockquote>
<p d__="">Let’s ask Git what it thinks the current status of the local repo is:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb6-1" d__=""><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>$ git status</span></code></pre></div>
<p d__="">Gives us:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb7-1" d__=""><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>On branch main</span>
<span id="cb7-2" d__=""><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Your branch is up to date with 'origin/main'.</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4" d__=""><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>nothing to commit, working tree clean</span></code></pre></div>
<p d__="">There’s a lot of information here, surprisingly.</p>
<p d__="">We haven’t talked about branching yet, but this is letting us know we’re on branch <code s__="13">main</code>. That’s fine for now.</p>
<p d__="">It also tells us this branch is up to date with a branch called <code s__="13">origin/main</code>.
 A branch in Git is just a reference to a certain commit that’s been 
made, like a Post-It note attached to that commit. (Recall that a commit
 is a snapshot of the code repo at some time.)</p>
<p d__="">We don’t want to get caught up in the intricacies of branching right now, but bear with me for a couple paragraphs.</p>
<p d__=""><code s__="13">origin</code> is an alias for the remote repository that we originally cloned from, so <code s__="13">origin/main</code> is “branch <code s__="13">main</code> on the repo you originally cloned from”.</p>
<p d__="">There is one important thing to notice here: there are two <code s__="13">main</code> branches. There’s the <code s__="13">main</code> branch on your local repo, and there’s a corresponding <code s__="13">main</code> branch on the remote (<code s__="13">origin</code>) repo.</p>
<p d__="">Remember how clones are separate? That is, changes you make on
 one clone aren’t automatically visible on the other? This is an 
indication of that. You can make changes your your local <code s__="13">main</code> branch, and these won’t affect the remotes <code s__="13">origin/main</code> branch. (At least, not until you push those changes!)</p>
<p d__="">Lastly, it mentions we’re up-to-date with the latest version of <code s__="13">origin/main</code>
 (that we know of), and that there’s nothing to commit because there are
 no local changes. We’re not sure what that means yet, but it all sounds
 like vaguely good news.</p>
<h3 data-number="2.7.3" id="step-2-make-some-local-changes" d__=""><span class="header-section-number">2.7.3</span> Step 2: Make Some Local Changes</h3>
<p d__="">Let’s edit a file and make some changes to it.</p>
<blockquote>
<p d__=""><strong>Again, don’t worry about messing up the remote repo</strong>—you don’t have permissions to do that. Your safety is completely assured from a Git perspective.</p>
</blockquote>
<p d__="">If you’re using VS Code, you can run it in the current directory like so:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb8-1" d__=""><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>$ code .</span></code></pre></div>
<p d__="">Otherwise, open the code in your favorite editor, which, admit it, is <a href="https://www.vim.org/" d__="">Vim</a><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup s__="13" d__="">7</sup></a>.</p>
<p d__="">Let’s change <code s__="13">hello.py</code>:</p>
<p d__="">It was:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource py numberLines"><code class="sourceCode python" s__="13"><span id="cb9-1"><a href="#cb9-1"></a><span class="co" d__="">#!/usr/bin/env python</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3" d__=""><a href="#cb9-3"></a><span class="bu" d__="">print</span>(<span class="st" d__="">"Hello, world!"</span>)</span></code></pre></div>
<p d__="">but let’s add a line so it reads:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource py numberLines"><code class="sourceCode python" s__="13"><span id="cb10-1"><a href="#cb10-1"></a><span class="co" d__="">#!/usr/bin/env python</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3" d__=""><a href="#cb10-3"></a><span class="bu" d__="">print</span>(<span class="st" d__="">"Hello, world!"</span>)</span>
<span id="cb10-4" d__=""><a href="#cb10-4"></a><span class="bu" d__="">print</span>(<span class="st" d__="">"Hello, again!"</span>)</span></code></pre></div>
<p d__="">And save that file.</p>
<p d__="">Let’s ask Git what the status is now.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb11-1" d__=""><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb11-2" d__=""><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb11-3" d__=""><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5" d__=""><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb11-6" d__=""><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb11-7" d__=""><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working</span>
<span id="cb11-8" d__=""><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb11-9" d__=""><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      modified:   hello.py</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11" d__=""><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">This is telling us a couple important things.</p>
<p d__="">First, Git has detected that we modified a file, namely <code s__="13">hello.py</code>, which we did.</p>
<p d__="">But it also says there are <code s__="13">no changes added to commit</code> (i.e.&nbsp;“there is nothing to make a commit with”). What does that mean?</p>
<p d__="">It means we haven’t added anything to the <em>stage</em> yet. Recall that the stage is where we can place items that we wish to include in the next commit. Let’s try that.</p>
<h4 data-number="2.7.3.1" id="step-2.1-reviewing-your-changes" d__=""><span class="header-section-number">2.7.3.1</span> Step 2.1: Reviewing Your Changes</h4>
<p d__="">We’re going to divert for just a moment to briefly introduce a new optional tool: <code s__="13">git diff</code> (short for “difference”, though we still pronounce it “diff”).</p>
<p d__="">If you make some changes to files and you need a refresher on 
all the things you’ve changed, you can run this command to see it. But, 
fair warning, the output is… <em>esoteric</em>.</p>
<p d__="">Let’s try it.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb12-1" d__=""><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>$ git diff</span>
<span id="cb12-2" d__=""><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/hello.py b/hello.py</span>
<span id="cb12-3" d__=""><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  index 42cc1f7..532d33e 100644</span>
<span id="cb12-4" d__=""><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  --- a/hello.py</span>
<span id="cb12-5" d__=""><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  +++ b/hello.py</span>
<span id="cb12-6" d__=""><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  @@ -1,4 +1,5 @@</span>
<span id="cb12-7" d__=""><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>   #!/usr/bin/env python</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9" d__=""><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>   print("Hello, world!")</span>
<span id="cb12-10" d__=""><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  +print("Hello, again!")</span></code></pre></div>
<p d__="">What the heck is this sorcery? If you’re lucky, it got 
color-coded for you with (by convention) added lines in green and 
deleted lines in red.</p>
<p d__="">For now, just notice a couple things:</p>
<ol type="1">
<li d__="">The file name. We see this change was to <code s__="13">hello.py</code>.</li>
<li d__="">The line with the <code s__="13">+</code> at the front. This indicates an added line.</li>
</ol>
<p d__="">A <code s__="13">-</code> at the front of a line would 
indicate the line was deleted. And changed lines are often shown as the 
old line being deleted and a new one added.</p>
<p d__="">Finally, if you want to see the diff for things you’ve added to the stage already (in the next step), you can run <code s__="13">git diff --staged</code>.</p>
<p d__="">We’ll dive more into diff later, but I wanted to introduce it here since it’s so useful.</p>
<h3 data-number="2.7.4" id="step-3-add-changes-to-the-stage" d__=""><span class="header-section-number">2.7.4</span> Step 3: Add Changes to the Stage</h3>
<p></p>
<p d__="">The Git status message, above, is trying to help us out. It says:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb13-1" d__=""><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">It’s suggesting that <code s__="13">git add</code> will add things to the stage—and it will.</p>
<p d__="">Now we, the developers, know that we modified <code s__="13">hello.py</code>,
 and that we’d like to make a commit that reflects the changes to that 
file. So we need to first add it to the stage so that we can make a 
commit.</p>
<p d__="">Let’s do it:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb14-1" d__=""><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>$ git add hello.py</span>
<span id="cb14-2" d__=""><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb14-3" d__=""><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb14-4" d__=""><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6" d__=""><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb14-7" d__=""><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb14-8" d__=""><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      modified:   hello.py</span></code></pre></div>
<p d__="">Now it’s changed from saying “Changes not staged for commit” 
to saying “Changes to be committed”, so we have successfully copied <code s__="13">hello.py</code> to the stage!</p>
<blockquote>
<p d__=""><strong>There’s also a helpful message there about how to <em>unstage</em> the file.</strong>
 Let’s say you accidentally added it to the stage and you changed your 
mind and wanted to not include it in the commit after all. You can run</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb15-1" d__=""><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>$ git restore --staged hello.py</span></code></pre></div>
<!-- ` vim markdown highlight bug workaround -->
<p d__="">and that will change it back to the “Changes not staged for commit” state.</p>
</blockquote>
<h3 data-number="2.7.5" id="step-4-commit-those-changes" d__=""><span class="header-section-number">2.7.5</span> Step 4: Commit those Changes</h3>
<p></p>
<p d__="">Now that we have something copied to the stage, we can make a 
commit. Recall that a commit is just a snapshot of the state of the repo
 given the modified files on the stage. Modified files not on the stage 
will not be included in the snapshot. Unmodified files are automatically
 included in the snapshot.</p>
<p d__="">In short, the commit snapshot will contain all the unmodified 
files Git currently tracks plus the modified files that are on the 
stage.</p>
<p d__="">Let’s do it:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb16-1" d__=""><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m "I added another print line"</span>
<span id="cb16-2" d__=""><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  [main 0e1ad42] I added another print line</span>
<span id="cb16-3" d__=""><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span></code></pre></div>
<blockquote>
<p d__=""><strong>The <code s__="13">-m</code> switch allows you to specify a commit message.</strong> If you don’t use <code s__="13">-m</code>,
 you’ll be popped into an editor, which will probably be Nano or Vim, to
 edit the commit message. If you’re not familiar with those, see <a href="#editor-get-out" d__="">Getting Out of Editors</a> for help.</p>
<p d__=""><strong>If you do get into the editor, know that every line in the commit message that begins with <code s__="13">#</code> is a comment</strong>
 that is ignored for the purposes of the commit. It’s a little weird 
that the commit message is a comment about the commit, and then you can 
have commented-out lines in the comment, but I don’t make the rules!</p>
</blockquote>
<p d__="">And that’s good news! Let’s check the status:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb17-1" d__=""><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb17-2" d__=""><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb17-3" d__=""><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  Your branch is ahead of 'origin/main' by 1 commit.</span>
<span id="cb17-4" d__=""><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    (use "git push" to publish your local commits)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6" d__=""><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span></code></pre></div>
<p d__="">“Nothing to commit, working tree clean” means we have no local changes to our branch.</p>
<p d__="">But look! We’re “ahead of ‘origin/main’ by 1 commit”! This means our local commit history on the <code s__="13">main</code> branch has one commit that the remote commit history on its <code s__="13">main</code> branch does not have.</p>
<p d__="">Which makes sense—the remote repo is a clone and so it’s 
independent of our local repo unless we explicitly try to sync them up. 
It doesn’t magically know that we’ve made changes to our local repo.</p>
<p d__="">And Git is helpfully telling us to run <code s__="13">git push</code> if we want to update the remote repo so that it also has our changes.</p>
<p d__="">So let’s try to do that. Let’s push our local changes to the remote repo.</p>
<h3 data-number="2.7.6" id="step-5-push-your-changes-to-the-remote-repo" d__=""><span class="header-section-number">2.7.6</span> Step 5: Push Your Changes to the Remote Repo</h3>
<p></p>
<p d__="">Let’s push our local changes to the remote repo:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb18-1" d__=""><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>$ git push</span></code></pre></div>
<p d__="">And that produces:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb19-1" d__=""><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Username for 'https://github.com':</span></code></pre></div>
<p d__="">Uh oh—trouble brewing. Let’s try entering our credentials:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb20-1" d__=""><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Username for 'https://github.com': my_username</span>
<span id="cb20-2" d__=""><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Password for 'https://beejjorgensen@github.com': [my_password]</span>
<span id="cb20-3" d__=""><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>remote: Support for password authentication was removed on August</span>
<span id="cb20-4" d__=""><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        13, 2021.</span>
<span id="cb20-5" d__=""><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>remote: Please see https://docs.github.com/en/get-started/getting-</span>
<span id="cb20-6" d__=""><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        started-with-git/about-remote-repositories#cloning-with-</span>
<span id="cb20-7" d__=""><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        https-urls for information on currently recommended modes</span>
<span id="cb20-8" d__=""><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        of authentication.</span>
<span id="cb20-9" d__=""><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>fatal: Authentication failed for 'https://github.com/beejjorgensen/</span>
<span id="cb20-10" d__=""><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>       git-example-repo.git/'</span></code></pre></div>
<p d__="">Well, that’s all kinds of not-working. Largely this is because
 you don’t have permission to write to that repo since you’re not the 
owner. And, notably, support for authenticating with a password seems to
 have been removed in 2021 which, last I checked, was in the past.</p>
<p d__="">So what do we do? Firstly, we should be the owner of the 
GitHub repo that we’ve cloned and that’ll solve some of the permission 
problems. Secondly, we’d better find another way to authenticate 
ourselves to GitHub that’s not plain password.</p>
<p d__="">Let’s try that in the next section.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="3" id="github-how-to-use-it" d__=""><span class="header-section-number">3</span> GitHub: How To Use It</h1>
<p d__="">Now, we’ve said that GitHub (which is a proprietary web 
front-end to Git run and owned by Microsoft) is not Git, and it’s true. 
It’s also true that you never even need to touch GitHub in order to use 
Git.</p>
<p d__="">That said, it’s <em>really</em> common for people to use GitHub, so we’ll get it set up in this chapter.</p>
<p d__="">Here we’ll make a new GitHub account and see how authentication works. This involves some one-time setup.</p>
<p d__="">If you already have a GitHub account, you can skip that section.</p>
<p d__="">If you already have authentication set up with GitHub CLI or with SSH keys, you can skip that section, as well.</p>
<p d__="">If you don’t need to use GitHub, you can skip the entire chapter!</p>
<h2 data-number="3.1" id="making-a-github-account" d__=""><span class="header-section-number">3.1</span> Making a GitHub Account</h2>
<p></p>
<p d__="">Head on over to <a href="https://github.com/" d__="">GitHub</a><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup s__="13" d__="">8</sup></a> and click <code s__="13">Sign Up</code>. Follow those instructions.</p>
<p d__="">Eventually you’ll end up on your home screen dashboard.</p>
<h2 data-number="3.2" id="creating-a-new-repo-on-github" d__=""><span class="header-section-number">3.2</span> Creating a New Repo on GitHub</h2>
<p></p>
<p d__="">This will make a repository on GitHub that you own. It does 
not make a local repository—you’ll have to clone the repo for that, 
something we’ll do later.</p>
<p d__="">In GitHub, there’s a green <code s__="13">New</code> button on the left of the dashboard.</p>
<p d__="">Also, there’s a <code s__="13">+</code> pulldown on the upper right center that has a “New Repository” option. Click one of those.</p>
<p d__="">On the subsequent page:</p>
<ol type="1">
<li><p d__="">Enter a “Repository name”, which can be anything as long as you don’t already have a repo by that name. Let’s use <code s__="13">test-repo</code> for this example.</p></li>
<li><p d__="">Check the “Add a README file” checkbox.</p>
<p d__="">(In the future, you might already have a local repo you’re going to push to this new repo. If that’s the case, do <strong>not</strong> check this box or it’ll prevent the push from happening.)</p></li>
<li><p d__="">Click <code s__="13">Create repository</code> at the bottom.</p></li>
</ol>
<p d__="">And there you have it.</p>
<h2 data-number="3.3" id="authentication" d__=""><span class="header-section-number">3.3</span> Authentication</h2>
<p></p>
<p d__="">Before we get to cloning, let’s talk authentication. In the 
previous part of the intro, we saw that username/password logins were 
disabled, so we have to do something different.</p>
<p d__="">There are a few options:</p>
<ul>
<li d__="">Use a tool called GitHub CLI</li>
<li d__="">Use SSH keys</li>
<li d__="">Use Personal Authentication Tokens</li>
</ul>
<p d__="">GitHub CLI is likely easier. SSH keys are geektacular. I only 
recently learned that you could authentication with personal access 
tokens, so I can’t really speak to them much.</p>
<p d__="">Personally, I use SSH keys. But other people… don’t. It’s up to you.</p>
<p d__="">If you already have authentication working with GitHub, skip these sections.</p>
<h3 data-number="3.3.1" id="github-cli" d__=""><span class="header-section-number">3.3.1</span> GitHub CLI</h3>
<p></p>
<p d__="">This is a command line interface to GitHub. It does a number 
of things, but one of them is providing an authentication helper so you 
can do things like actually push to a remote repo.</p>
<p d__=""><a href="https://cli.github.com/" d__="">Visit the GitHub CLI page</a><a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup s__="13" d__="">9</sup></a> and follow the installation instructions. If you’re using WSL, Linux, or another Unix variant, see their <a href="https://github.com/cli/cli#installation" d__="">installation instructions</a><a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup s__="13" d__="">10</sup></a> for other platforms.</p>
<p d__="">Once you have it installed, you should be able to run ‘gh –version’ and see some version information, e.g.:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb21-1" d__=""><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>$ gh --version</span>
<span id="cb21-2" d__=""><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  gh version 2.42.1 (2024-01-15)</span>
<span id="cb21-3" d__=""><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  https://github.com/cli/cli/releases/tag/v2.42.1</span></code></pre></div>
<p d__="">Then you’ll want to run the following two commands:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb22-1" d__=""><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>$ gh auth setup-git</span>
<span id="cb22-2" d__=""><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>$ gh auth login</span></code></pre></div>
<p d__="">The first is one-time only.</p>
<p d__="">The second command will take you through the login process. You’ll have to do this again if you log out.</p>
<p d__="">When choosing the authentication type between SSH and HTTPS, I
 recommend SSH. You’ll need to remember your choice when you go to clone
 a repo later.</p>
<h3 data-number="3.3.2" id="ssh-keys" d__=""><span class="header-section-number">3.3.2</span> SSH Keys</h3>
<p></p>
<p d__="">If you don’t want to install and use GitHub CLI, you can take 
this approach instead. This is more involved, but has more geek cred. 
This is what I use.</p>
<p d__="">If you already have an SSH keypair, you can skip the key generation step. You’d know you had one if you ran <code s__="13">ls ~/.ssh</code> and you saw a file like <code s__="13">id_rsa.pub</code> or <code s__="13">id_ed25519.pub</code>.</p>
<p d__="">To make a new keypair, run the following command:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb23-1" d__=""><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>$ ssh-keygen -t ed25519 -C youremail@example.com</span></code></pre></div>
<p d__="">(The <code s__="13">-C</code> sets a “comment” in the key. It can be anything, but an email address is common.)</p>
<p d__="">This results in a lot of prompts, but you can just hit ENTER for all of them.</p>
<blockquote>
<p d__=""><strong>Best practice is to use a password to access this key</strong>,
 otherwise anyone with access to the private key can impersonate you and
 access your GitHub account, and any other account you have set up to 
use that key. But it’s a pain to type the password every time you want 
to use the key (which is any time you do anything with GitHub from the 
command line), so people use a <em>key agent</em> which remembers the password for a while.</p>
<p d__="">If you don’t have a password on your key, you’re relying on 
the fact that no one can get a copy of the private portion of your key 
that’s stored on your computer. If you’re confident that your computer 
is secure, then you don’t need a password on the key. Do you feel lucky?</p>
<p d__="">Setting up the key agent is outside the scope of this document, and the author is unsure of how it even works in WSL. <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" d__="">GitHub has documentation on the matter</a><a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup s__="13" d__="">11</sup></a>.</p>
<p d__="">For this demo, we’ll just leave the password blank. All of 
this can be redone with a new key with a password if you choose to do 
that later.</p>
</blockquote>
<p d__="">Anyway, just hitting ENTER for all the prompts gets you something like this:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb24-1" d__=""><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>Generating public/private ed25519 key pair.</span>
<span id="cb24-2" d__=""><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>Enter file in which to save the key (/home/user/.ssh/id_ed25519):</span>
<span id="cb24-3" d__=""><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>Enter passphrase (empty for no passphrase):</span>
<span id="cb24-4" d__=""><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>Enter same passphrase again:</span>
<span id="cb24-5" d__=""><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>Your identification has been saved in id_ed25519</span>
<span id="cb24-6" d__=""><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>Your public key has been saved in id_ed25519.pub</span>
<span id="cb24-7" d__=""><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>The key fingerprint is:</span>
<span id="cb24-8" d__=""><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>SHA256:/lrT43BQBRPJpUXxpTBFInhdtZSQjQwxU4USwt5c0Lw user@locahost</span>
<span id="cb24-9" d__=""><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>The key's randomart image is:</span>
<span id="cb24-10" d__=""><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>+--[ED25519 256]--+</span>
<span id="cb24-11" d__=""><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>|        .o.X^%^=+|</span>
<span id="cb24-12" d__=""><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>|        ..oo*^.=o|</span>
<span id="cb24-13" d__=""><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>|        ..o = o..|</span>
<span id="cb24-14" d__=""><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>|         . + E   |</span>
<span id="cb24-15" d__=""><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>|        S .      |</span>
<span id="cb24-16" d__=""><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>|       .   o     |</span>
<span id="cb24-17" d__=""><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>|        . + +    |</span>
<span id="cb24-18" d__=""><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>|         o = .   |</span>
<span id="cb24-19" d__=""><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>|        ... .    |</span>
<span id="cb24-20" d__=""><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>+----[SHA256]-----+</span></code></pre></div>
<blockquote>
<p d__=""><strong>If you chose any file name other than the default for your key</strong>, you’ll have to do some <a href="https://www.baeldung.com/linux/ssh-private-key-git-command" d__="">additional configuration to get it to work with GitHub</a><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup s__="13" d__="">12</sup></a>.</p>
</blockquote>
<blockquote>
<p d__=""><strong>What’s that randomart thing with all the weird characters?</strong>
 It’s a visual representation of that key. There are ways to configure 
SSH so that you see the randomart every time you log in. And the idea is
 that if one day you see it looks different, something could be amiss 
security-wise. I doubt most people every look at it again once it’s been
 generated, though.</p>
</blockquote>
<p d__="">Now if you type <code s__="13">ls ~/.ssh</code> you should see something like this:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb25-1" d__=""><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>id_ed25519    id_ed25519.pub</span></code></pre></div>
<p d__="">The first file is your <em>private key</em>. This is never to be shared with anyone. You have no reason to even copy it.</p>
<p d__="">The second file is your <em>public key</em>. This can be freely shared with anyone, and we’re going to share it with GitHub in a second so that you can log in with it.</p>
<blockquote>
<p d__=""><strong>If you have trouble in the following subsections</strong>, try running these two commands:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb26-1" d__=""><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>$ chmod 700 ~/.ssh</span>
<span id="cb26-2" d__=""><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>$ chmod 600 ~/.ssh/*</span></code></pre></div>
<!-- ` -->
<p d__="">You only have to do that once, but SSH can be a bit picky if the file permissions on those files aren’t locked down.</p>
</blockquote>
<p d__="">Now in order to make this work, you have to tell GitHub what your public key is.</p>
<p d__="">First, get a copy of your public key in the clipboard. <strong><em>Be sure you’re getting the file with the <code s__="13">.pub</code> extension!</em></strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb27-1" d__=""><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>$ cat ~/.ssh/id_ed25519.pub</span></code></pre></div>
<p d__="">You should see something like this:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb28-1" d__=""><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ssh-ed25519 AAAC3N[a bunch of letters]V+znpoO youremail@example.com</span></code></pre></div>
<p d__="">Copy the entire thing into the clipboard so you can paste it later.</p>
<p d__="">Now go to GitHub, and click on your icon in the upper right.</p>
<p d__="">Choose “Settings”.</p>
<p d__="">Then on the left, choose “SSH and GPG keys”.</p>
<p d__="">Click “New SSH Key”.</p>
<p d__="">For the title, enter something identifying, like, “My laptop key”.</p>
<p d__="">Key type is “Authentication Key”.</p>
<p d__="">Then paste your key into the “Key” field.</p>
<p d__="">And click “Add SSH key”.</p>
<p d__="">We’ll be using SSH to clone URLs later. Remember that.</p>
<h3 data-number="3.3.3" id="using-personal-access-tokens" d__=""><span class="header-section-number">3.3.3</span> Using Personal Access Tokens</h3>
<p d__="">Remember last chapter when we tried to clone an HTTPS repo URL
 on the command line and it prompted for a username and password that 
didn’t work?</p>
<p d__="">Well, we get to actually make new passwords that <em>will</em> work in that case. They’re called <em>personal access tokens</em>.</p>
<p d__=""><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens" d__="">GitHub has a lot of documentation on this</a><a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup s__="13" d__="">13</sup></a> but the gist of it is that you’re going to create a <em>token</em>
 that represents some kind of access, e.g.&nbsp;“ability to read and 
write my repos”, and you’re going to use that in lieu of the password on
 the command line.</p>
<p d__="">So that last failed example would look like this:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb29-1" d__=""><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>Username for 'https://github.com': [MY USERNAME]</span>
<span id="cb29-2" d__=""><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>Password for 'https://beejjorgensen@github.com': [MY TOKEN]</span></code></pre></div>
<p d__="">In other words:</p>
<ol type="1">
<li d__="">Generate a token.</li>
<li d__="">Use that token as your password.</li>
</ol>
<p d__="">Your computer might automatically save those credentials so you don’t have to enter them every time. Or it might not.</p>
<p d__="">One of the main things personal access tokens can give you is 
fine-grained control over access. You can limit access to read-only, or 
just to certain repos, and so on.</p>
<p d__="">Additionally, you can use GitHub CLI authentication with a 
token as well. You just have to feed it in there on standard input. 
Let’s say you have your token in a file called <code s__="13">mytoken.txt</code>. You can authenticate with GitHub CLI like so:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb30-1" d__=""><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>$ gh auth login --with-token &lt; mytoken.txt</span></code></pre></div>
<p d__="">Like with SSH keys, if you lose a laptop that uses a 
particular access token, you can simply invalidate that token through 
GitHub’s UI so that mean people can’t use it.</p>
<h2 data-number="3.4" id="make-a-local-clone-of-the-repo" d__=""><span class="header-section-number">3.4</span> Make a Local Clone of the Repo</h2>
<p></p>
<p d__="">We need to figure out the URL to the repo so we can clone it.</p>
<p d__="">If you click on your icon in the upper right, then “My 
Repositories”, you should see a page with all your repos. At this point,
 it might just be your <code s__="13">test-repo</code> repo. Click on the name.</p>
<p d__="">And you should then be on the repo page. You can browse the 
files here, among other things, but really we want to get the clone URL.</p>
<p d__="">Click the big green “Code” button.</p>
<p d__="">What you do next depends on if you’re using GitHub CLI or SSH keys.</p>
<h3 data-number="3.4.1" id="cloning-from-github-with-github-cli" d__=""><span class="header-section-number">3.4.1</span> Cloning from GitHub with GitHub CLI</h3>
<p></p>
<p d__="">You have two options.</p>
<ul>
<li><p d__=""><strong>Option 1</strong>: Earlier when we authenticated with <code s__="13">gh auth login</code> I said to remember if you chose HTTPS or SSH. Depending on which you chose, you should choose that tab on this window.</p>
<p d__="">Copy the URL.</p>
<p d__="">Go to the command line and run <code s__="13">git clone [URL]</code> where <code s__="13">[URL]</code> is what you copied. So it’ll be this for HTTPS:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb31-1" d__=""><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>$ git clone https://github.com/user/test-repo.git</span></code></pre></div>
<p d__="">or this for SSH:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb32-1" d__=""><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>$ git clone git@github.com:user/test-repo.git</span></code></pre></div></li>
<li><p d__=""><strong>Option 2</strong>: Choose the “GitHub CLI” tab. Run the command as they have it, which will be something like:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb33-1" d__=""><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>$ gh repo clone user/test-repo</span></code></pre></div></li>
</ul>
<h3 data-number="3.4.2" id="cloning-from-github-with-ssh-keys" d__=""><span class="header-section-number">3.4.2</span> Cloning from GitHub with SSH Keys</h3>
<p></p>
<p d__="">If you set up an SSH key earlier, you can use this method.</p>
<p d__="">After hitting the green “Code” button, make sure the “SSH” tab is selected.</p>
<p d__="">Copy that URL.</p>
<p d__="">Go to the command line and run <code s__="13">git clone [URL]</code> where <code s__="13">[URL]</code> is what you copied. So it’ll be something like this:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb34-1" d__=""><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>$ git clone git@github.com:user/test-repo.git</span></code></pre></div>
<h2 data-number="3.5" id="make-changes-and-push" d__=""><span class="header-section-number">3.5</span> Make Changes and Push!</h2>
<p></p>
<p d__="">Now that you’ve cloned the repo, you should be able to <code s__="13">cd</code> into that directory, edit a file, <code s__="13">git add</code> it to the stage, then <code s__="13">git commit -m message</code> to make a commit…</p>
<p d__="">And then <code s__="13">git push</code> to push it back to the clone on GitHub!</p>
<p d__="">And after that if you go to the repo page on GitHub and hit reload, you should be able to see your changes there!</p>
<p d__="">And now we’re back to that standard common flow:</p>
<ol type="1">
<li d__=""><em>Clone</em> a <em>remote</em> repo.</li>
<li d__="">Make some local changes.</li>
<li d__="">Add those changes to the <em>stage</em>.</li>
<li d__=""><em>Commit</em> those changes.</li>
<li d__=""><em>Push</em> your changes back to the remote repo.</li>
<li d__="">Go back to Step 2.</li>
</ol>
<h2 data-number="3.6" id="collaboration-on-github" d__=""><span class="header-section-number">3.6</span> Collaboration on GitHub</h2>
<p></p>
<p d__="">There are two main techniques for this:</p>
<ol type="1">
<li d__="">Fork/pull request</li>
<li d__="">Add a collaborator</li>
</ol>
<p d__="">We’ll talk about the first one in the future.</p>
<p d__="">For now, the easiest way to add collaborators is to just add them to your repo.</p>
<p d__="">On the repo page on GitHub, choose “Settings”, then “Collaborators” on the left.</p>
<p d__="">After authenticating, you can click “Add people”. Enter the username of the person you want to collaborate with.</p>
<p d__="">They’ll have to accept the invitation from their GitHub inbox, but then they’ll have access to the repo.</p>
<p d__="">Be sure to only do this with people you trust!</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="4" id="the-git-log-and-head" d__=""><span class="header-section-number">4</span> The Git Log and <code>HEAD</code></h1>
<p></p>
<p d__="">When we make commits to a Git repo, it tracks each of those commits in a log that you can visit. Let’s take a look at that now.</p>
<h2 data-number="4.1" id="an-example-log" d__=""><span class="header-section-number">4.1</span> An Example Log</h2>
<p d__="">You can get the commit log by typing <code s__="13">git log</code>.</p>
<p d__="">Let’s say I’m in a repo with a single commit where I’ve just added a file with the commit message “Added”.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb35-1" d__=""><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>$ git log</span></code></pre></div>
<p d__="">produces:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb36-1" d__=""><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>commit 5a02fede3007edf55d18e2f9ee3e57979535e8f2 (HEAD -&gt; main)</span>
<span id="cb36-2" d__=""><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb36-3" d__=""><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 09:24:52 2024 -0800</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5" d__=""><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">If I make another commit, we get a longer log:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb37-1" d__=""><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>commit 5e8cb52cb813a371a11f75050ac2d7b9e15e4751 (HEAD -&gt; main)</span>
<span id="cb37-2" d__=""><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb37-3" d__=""><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 12:36:13 2024 -0800</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5" d__=""><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    More output</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7" d__=""><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>commit 5a02fede3007edf55d18e2f9ee3e57979535e8f2</span>
<span id="cb37-8" d__=""><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb37-9" d__=""><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 09:24:52 2024 -0800</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11" d__=""><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">Notice that the most recent commit entry is at the top of the output.</p>
<h2 data-number="4.2" id="whats-in-the-log" d__=""><span class="header-section-number">4.2</span> What’s in the log?</h2>
<p d__="">There are a few things to notice in the log:</p>
<ul>
<li d__="">The commit comment</li>
<li d__="">The date</li>
<li d__="">The user who made the commit</li>
</ul>
<p d__="">Also, we have those huge <a href="https://en.wikipedia.org/wiki/Hexadecimal" d__="">hex</a><a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup s__="13" d__="">14</sup></a> numbers after the word <code s__="13">commit</code>.</p>
<p d__="">This is the <em>commit ID</em> or <em>commit hash</em>. This is universally unique number that you can use to identify a particular commit.</p>
<p d__="">Normally you don’t need to know this, but it can be useful for
 going back in time or keeping track of commits in multi-developer 
projects.</p>
<p d__="">We also see a bit at the top that says <code s__="13">(HEAD -&gt; main)</code>. What’s that about?</p>
<h2 data-number="4.3" id="the-head-reference" d__=""><span class="header-section-number">4.3</span> The <code>HEAD</code> Reference</h2>
<p></p>
<p d__="">We’ve seen that each commit has a unique and unwieldy identifier like this:</p>
<p><code s__="13" d__="">5a02fede3007edf55d18e2f9ee3e57979535e8f2</code></p>
<p d__="">Luckily, there are a few ways to refer to commits with more human symbolic names.</p>
<p d__=""><code s__="13">HEAD</code> is one of these references. It 
indicates which branch or commit you’re looking at right now in your 
project subdirectory. Remember how we said you could go look at previous
 commits? The way you do that is by moving <code s__="13">HEAD</code> to them.</p>
<blockquote>
<p d__=""><strong>We haven’t talked about branches yet, but the <code s__="13">HEAD</code> normally refers to a branch.</strong> By default, it’s the <code s__="13">main</code> branch. But since we’re getting ahead of ourselves, I’m going to just keep saying that <code s__="13">HEAD</code> refers to a commit, even though it usually does it indirectly via a branch.</p>
<p d__="">So this is a bit of a lie, but I hope you forgive me.</p>
</blockquote>
<p d__="">Some terminology: the files in your git subdirectory you’re looking at right now is referred to as your <em>working tree</em>. The working tree is the files as they appear at the commit pointed to by <code s__="13">HEAD</code>, plus any uncommitted changes you might have made.</p>
<p d__="">So if you switch <code s__="13">HEAD</code> to another commit, the files in your working tree will be updated to reflect that.</p>
<p d__="">Okay then, how do we know which commit <code s__="13">HEAD</code> is referring to? Well, it’s right there at the top of the log:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb38-1" d__=""><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>commit 5e8cb52cb813a371a11f75050ac2d7b9e15e4751 (HEAD -&gt; main)</span>
<span id="cb38-2" d__=""><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb38-3" d__=""><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 12:36:13 2024 -0800</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5" d__=""><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    More output</span></code></pre></div>
<p d__="">We see <code s__="13">HEAD</code> right there on the first line, indicating that <code s__="13">HEAD</code> is referring to commit with ID:</p>
<p><code s__="13" d__="">5e8cb52cb813a371a11f75050ac2d7b9e15e4751</code></p>
<p d__="">Again, that’s a bit of a lie. The <code s__="13">HEAD -&gt; main</code> means that <code s__="13">HEAD</code> is actually referring to the <code s__="13">main</code> branch, and that <code s__="13">main</code> is referring to the commit. <code s__="13">HEAD</code> is therefore indirectly referring to the commit. More on that later.</p>
<h2 data-number="4.4" id="going-back-in-time-and-detached-head" d__=""><span class="header-section-number">4.4</span> Going Back In Time and Detached <code>HEAD</code></h2>
<p></p>
<p d__="">Here’s my full Git log:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb39-1" d__=""><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>commit 5e8cb52cb813a371a11f75050ac2d7b9e15e4751 (HEAD -&gt; main)</span>
<span id="cb39-2" d__=""><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb39-3" d__=""><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 12:36:13 2024 -0800</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5" d__=""><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    More output</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7" d__=""><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>commit 5a02fede3007edf55d18e2f9ee3e57979535e8f2</span>
<span id="cb39-8" d__=""><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb39-9" d__=""><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 09:24:52 2024 -0800</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11" d__=""><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">If I look at the files, I’ll see the changes indicated by the 
“More output” commit. But let’s say I want to go back in time to the 
previous commit and see what the files looked like then. How would I do 
that?</p>
<blockquote>
<p d__=""><strong>Maybe there were some changes that existed back in an earlier commit</strong> that had since been removed, and you wanted to look at them, for example.</p>
</blockquote>
<p d__="">I can use the <code s__="13">git checkout</code> command to make that happen.</p>
<p d__="">Let’s checkout the first commit, the one with ID <code s__="13">5a02fede3007edf55d18e2f9ee3e57979535e8f2</code>.</p>
<p d__="">Now, I could say:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb40-1" d__=""><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>$ git checkout 5a02fede3007edf55d18e2f9ee3e57979535e8f2</span></code></pre></div>
<p d__="">and that would work, but the rule is that you must specific at least 4 unique digits of the ID, so I could have also done this:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb41-1" d__=""><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>$ git checkout 5a02</span></code></pre></div>
<p d__="">for the same result.</p>
<p d__="">And that result is:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb42-1" d__=""><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>Note: switching to '5a02'.</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3" d__=""><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>You are in 'detached HEAD' state. You can look around, make</span>
<span id="cb42-4" d__=""><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>experimental changes and commit them, and you can discard any</span>
<span id="cb42-5" d__=""><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>commits you make in this state without impacting any branches by</span>
<span id="cb42-6" d__=""><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>switching back to a branch.</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8" d__=""><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>If you want to create a new branch to retain commits you create,</span>
<span id="cb42-9" d__=""><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>you may do so (now or later) by using -c with the switch command.</span>
<span id="cb42-10" d__=""><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>Example:</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12" d__=""><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  git switch -c &lt;new-branch-name&gt;</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14" d__=""><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>Or undo this operation with:</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-16" d__=""><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>  git switch -</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18" d__=""><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>Turn off this advice by setting config variable advice.detachedHead</span>
<span id="cb42-19" d__=""><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>to false</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-21" d__=""><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>HEAD is now at 5a02fed Added</span></code></pre></div>
<p d__="">Looks sort of scary, but look—Git is telling us how to undo the operation if we want, and so there’s really nothing to fear.</p>
<p d__="">Let’s take a look around with <code s__="13">git log</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb43-1" d__=""><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>commit 5a02fede3007edf55d18e2f9ee3e57979535e8f2 (HEAD)</span>
<span id="cb43-2" d__=""><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb43-3" d__=""><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 09:24:52 2024 -0800</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5" d__=""><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">That’s all! Just one commit?! Where’s the second commit I made? Is it gone forever?!</p>
<p d__="">No.&nbsp;Everything is fine.</p>
<p d__="">When you have <code s__="13">HEAD</code> at a certain commit, 
you’re looking at the world as it looked at that snapshot in time. 
Future commits haven’t “happened” yet from this perspective. They are 
still out there, but you’ll have to change back to them by name.</p>
<p d__="">Also, do you see anything different about that first line that reads <code s__="13">(HEAD)</code>? That’s right: no <code s__="13">main</code> to be seen.</p>
<p d__="">That’s because the <code s__="13">main</code> branch is still looking at the latest commit, the one with the “More output” comment. So we don’t see it from this perspective.</p>
<blockquote>
<p d__=""><strong>Remember earlier when I said it was a bit of a lie to say that <code s__="13">HEAD</code> points to a commit?</strong> Well, detached head state is the case where it actually <strong>does</strong>. Detached head state is just what happens when <code s__="13">HEAD</code> is pointing to a commit instead of a branch. To reattach it, you have to change it to point to a branch again.</p>
</blockquote>
<p d__="">Let’s get back to the <code s__="13">main</code> branch. There are three options:</p>
<ol type="1">
<li d__=""><code s__="13">git switch -</code>, just like the helpful message says.</li>
<li><code s__="13" d__="">git switch main</code></li>
<li><code s__="13" d__="">git checkout main</code></li>
</ol>
<p d__="">Git replies:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb44-1" d__=""><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>Previous HEAD position was 5a02fed Added</span>
<span id="cb44-2" d__=""><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>Switched to branch 'main'</span></code></pre></div>
<p d__="">And now if we <code s__="13">git log</code>, we see all our changes again:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb45-1" d__=""><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>commit 5e8cb52cb813a371a11f75050ac2d7b9e15e4751 (HEAD -&gt; main)</span>
<span id="cb45-2" d__=""><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb45-3" d__=""><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 12:36:13 2024 -0800</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5" d__=""><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    More output</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7" d__=""><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>commit 5a02fede3007edf55d18e2f9ee3e57979535e8f2</span>
<span id="cb45-8" d__=""><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb45-9" d__=""><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>Date:   Thu Feb 1 09:24:52 2024 -0800</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11" d__=""><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">and our working tree will be updated to show the files as they are in the <code s__="13">main</code> commit.</p>
<h2 data-number="4.5" id="the-new-command-git-switch" d__=""><span class="header-section-number">4.5</span> The New Command: <code>git switch</code></h2>
<p></p>
<p d__="">In ye olden days, <code s__="13">git checkout</code> did a lot
 of things, and it still does. Because it does so much, the maintainers 
of Git have been trying to break some of that functionality into a new 
command, <code s__="13">git switch</code>.</p>
<p d__="">We could redo the previous section by using just <code s__="13">git switch</code> instead of <code s__="13">git checkout</code>. Let’s try:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb46-1" d__=""><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>$ git switch 5a02</span></code></pre></div>
<p d__="">and it says:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb47-1" d__=""><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>fatal: a branch is expected, got commit '5a02'</span>
<span id="cb47-2" d__=""><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>hint: If you want to detach HEAD at the commit, try again with the</span>
<span id="cb47-3" d__=""><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>      --detach option.</span></code></pre></div>
<p d__="">Hmmm! <code s__="13">git switch</code> is warning us that 
we’re about to go into detached head state, and is that what we really 
want? It’s not a crime or anything to do so, but it’s just letting us 
know that we’re not going to be on a branch any longer.</p>
<p d__="">So we can override, just like it suggests:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb48-1" d__=""><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach 5a02</span>
<span id="cb48-2" d__=""><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  HEAD is now at 5a02fed Added</span></code></pre></div>
<p d__="">All right! No big message about being detached, but we don’t need it because we know it’s detached since we specified.</p>
<p d__="">And like before, we can get back to the <code s__="13">main</code> branch with either:</p>
<ol type="1">
<li d__=""><code s__="13">git switch -</code>, switch to the previous state</li>
<li><code s__="13" d__="">git switch main</code></li>
</ol>
<p d__="">Easy.</p>
<h2 data-number="4.6" id="commits-relative-to-head" d__=""><span class="header-section-number">4.6</span> Commits Relative to <code>HEAD</code></h2>
<p d__="">There are a couple shortcuts to get to commits that are earlier than <code s__="13">HEAD</code>, like, “I want to switch to the 3rd commit before this one.”</p>
<p d__="">Here’s a pretty useless example that we’ll start with:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb49-1" d__=""><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD</span></code></pre></div>
<p d__="">This moves <code s__="13">HEAD</code> to where <code s__="13">HEAD</code> was. That is, it moves it nowhere. (Though it does have the effect of detaching it from the branch.)</p>
<p d__="">But what if I wanted to move to the commit right <em>before</em> where <code s__="13">HEAD</code> is now? You can do it with <strong><em>caret notation</em></strong> like this:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb50-1" d__=""><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD^</span></code></pre></div>
<p d__="">And that gets you to the previous commit.</p>
<p d__="">What if you wanted to get to the <em>third-previous</em> commit? You can add more carets!</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb51-1" d__=""><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD^^^</span></code></pre></div>
<p d__="">Or the 10th previous commit!</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb52-1" d__=""><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD^^^^^^^^^^</span></code></pre></div>
<p d__="">Or the 100th previous commit!</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb53-1" d__=""><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD^^^^^^^^^^^^^^^^^^^^forget this</span></code></pre></div>
<p d__="">Typing all these carets is wearing me out. Luckily there’s <em>another</em> shorthand we have at our disposal with <strong><em>tilde notation</em></strong>. The two following lines are equivalent:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb54-1" d__=""><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD^^^</span>
<span id="cb54-2" d__=""><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD~3</span></code></pre></div>
<p d__="">After the tilde, you can just give the number of commits back you want to go. So back to my example:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb55-1" d__=""><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD~100   # Much easier</span></code></pre></div>
<p d__="">All this said, personally I usually just look at the log and go to a specific commit instead of counting back.</p>
<blockquote>
<p d__=""><em>“But that’s just, like, my opinion, man.”</em><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
—The Dude</p>
</blockquote>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="5" id="branches-and-fast-forward-merges" d__=""><span class="header-section-number">5</span> Branches and Fast-Forward Merges</h1>
<h2 data-number="5.1" id="what-is-a-branch" d__=""><span class="header-section-number">5.1</span> What is a Branch?</h2>
<p></p>
<p d__="">Normally you think of writing code as a linear sequence of 
changes. You start with an empty file, add some things, test them, add 
some more, test some more, and eventually the code is complete.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_010.svg" title="[A simple commit graph.]">
<figcaption aria-hidden="true" s__="14" d__="">A simple commit graph.</figcaption>
</figure>
<!--
``` {.default}
    (1)---(2)---(3)---(4)---(5)
```
-->
<p d__="">In Git we might think of this as a sequence of commits. Let’s 
look at a graph (Figure 5.1) where I’ve numbered commits 1-5. There, <code s__="13">(1)</code> was the first commit we made on the repo, <code s__="13">(2)</code> is some changes we made on top of <code s__="13">(1)</code>, and <code s__="13">(3)</code> is some changes we made on top of <code s__="13">(2)</code>, etc.</p>
<p d__="">Git always keeps track of the parent commit for any particular commit, e.g.&nbsp;it knows the parent commit of <code s__="13">(3)</code> is <code s__="13">(2)</code>
 in the above graph. In this graph, the parent relationship is indicated
 by an arrow. “The parent of commit 3 is commit 2”, etc. It’s a little 
confusing because clearly commit 3 came <em>after</em> commit 2 in terms of time, but the arrow points to the parent, which is the opposite of the nodes’ temporal relationship.</p>
<p d__="">A <em>branch</em> is like a name tag stuck on one <strong>specific</strong> commit. You can move the name tag around with various Git operations.</p>
<p d__="">The default branch is called <code s__="13">main</code>.</p>
<blockquote>
<p d__="">The default branch used to be called <code s__="13">master</code>, and still is called that in some older repos.</p>
</blockquote>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_020.svg" title="[The main branch on a commit.]">
<figcaption aria-hidden="true" s__="14" d__="">The main branch on a commit.</figcaption>
</figure>
<!--
``` {.default}
                           [main]
                             |
                             v
    (1)---(2)---(3)---(4)---(5)
```
-->
<p d__="">So to make it a little more complete, we can show that branch in Figure 5.2. There’s our <code s__="13">main</code> branch attached to the commit labeled <code s__="13">(5)</code>.</p>
<blockquote>
<p d__="">It’s tempting to think of the whole sequence of commits as 
“the branch”, but this author recommends against it. Better to keep in 
mind that the branch is just a name tag for a single commit, and that we
 can move that name tag around.</p>
</blockquote>
<p d__="">But Git offers something more powerful, allowing you (or collaborators) to pursue multiple branches simultaneously.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_030.svg" title="[Lots of branches.]">
<figcaption aria-hidden="true" s__="14" d__="">Lots of branches.</figcaption>
</figure>
<!--
``` {.default}
               [main]
                 |
                 v    [somebranch]
    (1)---(2)---(8)      |
            \            v
            (3)---(5)---(7)
              \
              (4)---(6)
                     ^
                     |
              [anotherbranch]
```
-->
<p d__="">So there might be multiple collaborators working on the project at the same time.</p>
<p d__="">And then, when you’re ready, you can <em>merge</em> those 
branches back together. In this diagram we’ve merged commit 6 and 7 into
 a new commit, commit 9. In Figure 5.4, commit 9 contains the changes of
 both commits 7 and 6.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_040.svg" title="[After merging somebranch and anotherbranch.]">
<figcaption aria-hidden="true" s__="14" d__="">After merging <code s__="13">somebranch</code> and <code s__="13">anotherbranch</code>.</figcaption>
</figure>
<!--
``` {.default}
               [main]
                 |
                 v      [somebranch|anotherbranch]
    (1)---(2)---(8)            |
            \                  v
            (3)---(5)---(7)---(9)
              \               /
              (4)-----------(6)
```
-->
<p d__="">In that case, <code s__="13">somebranch</code> and <code s__="13">anotherbranch</code> both point to the same commit. There’s no problem with this.</p>
<p d__="">And then we can keep merging if we want, until all the branches are pointing at the same commit (Figure 5.5).</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_050.svg" title="[After merging all branches.]">
<figcaption aria-hidden="true" s__="14" d__="">After merging all branches.</figcaption>
</figure>
<!--
``` {.default}
                     [main|somebranch|anotherbranch]
                                 |
                                 v
    (1)---(2)---(8)-------------(10)
            \                   /
            (3)---(5)---(7)---(9)
              \               /
              (4)-----------(6)
```
-->
<p></p>
<p d__="">And maybe after all this we decide to delete <code s__="13">somebranch</code> and <code s__="13">anotherbranch</code>; we can do this safely because they’re fully merged, and can do this without affecting <code s__="13">main</code> or any commits (Figure 5.6).</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_060.svg" title="[After deleting merged branches.]">
<figcaption aria-hidden="true" s__="14" d__="">After deleting merged branches.</figcaption>
</figure>
<!--
``` {.default}
                               [main]
                                 |
                                 v
    (1)---(2)---(8)-------------(10)
            \                   /
            (3)---(5)---(7)---(9)
              \               /
              (4)-----------(6)
```
-->
<p d__="">This chapter is all about getting good with branching and partially good with merging.</p>
<h2 data-number="5.2" id="a-quick-note-about-git-pull" d__=""><span class="header-section-number">5.2</span> A Quick Note about <code>git pull</code></h2>
<p></p>
<p d__="">When you do a pull, it actually does two things: (a) <em>fetch</em> all the changes from the remote repo and (b) <em>merge</em> those changes.</p>
<p d__="">If two or more people are committing to the same branch, eventually <code s__="13">git pull</code> is going to have to merge. And it turns out there are a few ways it can do this.</p>
<p d__="">For now, we’re going to tell <code s__="13">git pull</code> to always classically merge divergent branches, and you can do that with this one-time command:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb56-1" d__=""><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>$ git config --global pull.rebase false</span></code></pre></div>
<p d__="">If you don’t do that, Git will pop up an error message 
complaining about it the first time it has to merge on a pull. And 
you’ll have to do it then.</p>
<p d__="">When we talk about rebasing later, this will make more sense.</p>
<h2 data-number="5.3" id="head-and-branches" d__=""><span class="header-section-number">5.3</span> <code>HEAD</code> and Branches</h2>
<p></p>
<p d__="">We said earlier that <code s__="13">HEAD</code> refers to a specific commit, namely the commit you’re looking at right now in your working tree.</p>
<p d__="">And we also said that was a bit of a lie.</p>
<p d__="">In normal usage, <code s__="13">HEAD</code> points to a branch, not to a commit. In detached head state, <code s__="13">HEAD</code> points to a commit.</p>
<p d__="">It’s like Figure 5.7 when <code s__="13">HEAD</code> is pointing to a branch as per normal.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_070.svg" title="[HEAD pointing to a branch.]">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">HEAD</code> pointing to a branch.</figcaption>
</figure>
<!--
``` {.default}
                     [main]<--HEAD
                       |
                       v
    (1)---(2)---(3)---(4)
```
-->
<p d__="">But if we check out an earlier commit that doesn’t have a 
branch, we end up in detached head state, and it looks like Figure 5.8.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_080.svg" title="[HEAD pointing to a commit.]">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">HEAD</code> pointing to a commit.</figcaption>
</figure>
<!--
``` {.default}
               HEAD   [main]
                 |     |
                 v     v
    (1)---(2)---(3)---(4)
```
-->
<p d__="">So far, we’ve been making commits on the <code s__="13">main</code> branch without really even thinking about branching. Recalling that the <code s__="13">main</code> branch is just a label for a specific commit, how does the <code s__="13">main</code> branch know to “follow” our <code s__="13">HEAD</code> from commit to commit?</p>
<p d__="">It does it like this: the branch that <code s__="13">HEAD</code> points to follows the current commit. That is, when you make a commit, the branch <code s__="13">HEAD</code> points to moves along to that next commit.</p>
<p d__="">If we were here back at Figure 5.7, when <code s__="13">HEAD</code> was pointing to the <code s__="13">main</code> branch, we could make one more commit and get us to Figure 5.9.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_090.svg" title="[HEAD moving with a branch.]">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">HEAD</code> moving with a branch.</figcaption>
</figure>
<!--
``` {.default}
                           [main]<--HEAD
                             |
                             v
    (1)---(2)---(3)---(4)---(5)
```
-->
<p d__="">Contrast that to detached head state, back in Figure 5.8. If we were there, a new commit would get us to Figure 5.10, leaving <code s__="13">main</code> alone.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_100.svg" title="[A commit with detached HEAD.]">
<figcaption aria-hidden="true" s__="14" d__="">A commit with detached <code s__="13">HEAD</code>.</figcaption>
</figure>
<!--
``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)
                  \
                  (5)
                   ^
                   |
                  HEAD
```
-->
<p d__="">At this point, there’s nothing stopping you from creating a new branch at the same commit as <code s__="13">HEAD</code>, if you want to do that. Or maybe you are just messing around and decide to switch back to <code s__="13">main</code> later, abandoning the commits you’ve made in detached <code s__="13">HEAD</code> state.</p>
<p d__="">Now that we have the abstract theory stuff laid out, let’s talk specifics.</p>
<h2 data-number="5.4" id="creating-a-branch" d__=""><span class="header-section-number">5.4</span> Creating a Branch</h2>
<p></p>
<p d__="">When you make the first commit to a new repo, the <code s__="13">main</code> branch is automatically created for you at that commit.</p>
<p d__="">But what about new branches we want to make?</p>
<blockquote>
<p d__="">Why make a branch? A common case is that you want to work on 
your own commits without impacting the work of others. (In this case 
you’re really just putting off the work until you merge your branch with
 theirs, but it’s a good workflow.)</p>
<p d__="">Another case is that you want to mess around with some changes
 but you’re not sure if they’ll work. If they end up not working, you 
can just delete the branch. If they do work, you can merge your changes 
back into the non-messing-around branch.</p>
</blockquote>
<p d__="">The most common way to make new branches is this:</p>
<ol type="1">
<li><p d__="">Switch to the commit or branch from which you want to make the new branch.</p></li>
<li><p d__="">Make the new branch there and switch <code s__="13">HEAD</code> to point to the new branch.</p></li>
</ol>
<p d__="">Let’s try it. Let’s branch off <code s__="13">main</code>.</p>
<p d__="">You might already have <code s__="13">main</code> checked out (i.e.&nbsp;<code s__="13">HEAD</code> points to <code s__="13">main</code>), but let’s do it again to be safe, and then we’ll create a branch with <code s__="13">git switch</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb57-1" d__=""><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>$ git switch main</span>
<span id="cb57-2" d__=""><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>$ git switch -c newbranch</span></code></pre></div>
<p d__="">Normally you can just switch to another branch (i.e.&nbsp;have <code s__="13">HEAD</code> point to that branch) with <code s__="13">git switch branchname</code>. But if the branch doesn’t exist, you use the <code s__="13">-c</code> switch to create the branch before switching to it.</p>
<blockquote>
<p d__=""><strong>ProTip</strong>: Make sure all your local changes are committed before switching branches! If you <code s__="13">git status</code> it should say “working tree clean” before you switch. Later we’ll learn about another option with <code s__="13">git stash</code>.</p>
</blockquote>
<p d__="">So after checking out <code s__="13">main</code>, we have Figure 5.11.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_070.svg" title="[HEAD pointing to main.]">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">HEAD</code> pointing to <code s__="13">main</code>.</figcaption>
</figure>
<!--
``` {.default}
                      [main]<--HEAD
                       |
                       v
    (1)---(2)---(3)---(4)
```
-->
<p d__="">And then with <code s__="13">git switch -c newbranch</code>, we create and switch to <code s__="13">newbranch</code>, and that gets us to Figure 5.12.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_110.svg" title="[HEAD pointing to newbranch.]">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">HEAD</code> pointing to <code s__="13">newbranch</code>.</figcaption>
</figure>
<!--
``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)
                       ^
                       |
                   [newbranch]<--HEAD
```
-->
<p d__="">That’s not super exciting, since we’re still looking at the 
same commit, but let’s see what happens when we make some new commits on
 this new branch.</p>
<blockquote>
<p d__=""><strong>Important note</strong>: The branches we’re making 
here exist only on your local clone; they’re not automagically 
propagated back to wherever you cloned the repo from.</p>
<p d__="">The upshot is that if you accidentally (or deliberately) delete your local repo, when you <code s__="13">git clone</code> again, all your local branches will be gone (along with any commits that aren’t part of <code s__="13">main</code> or any other branches pushed to the server).</p>
<p d__="">There is a way to set up that connection where your local branches are uploaded when you push, called <em>remote-tracking branches</em>. <code s__="13">main</code> is an example of a remote-tracking branch, which is why <code s__="13">git push</code> from <code s__="13">main</code> works while <code s__="13">git push</code> from <code s__="13">newbranch</code> gives an error. But we’ll talk about all this later.</p>
</blockquote>
<h2 data-number="5.5" id="make-some-commits-on-a-branch" d__=""><span class="header-section-number">5.5</span> Make Some Commits on a Branch</h2>
<p d__="">This is not really that different than what we were doing with our commits before. Before we made a branch, we had <code s__="13">HEAD</code> pointing to <code s__="13">main</code>, and we were making commits on <code s__="13">main</code>.</p>
<p d__="">Now we have <code s__="13">HEAD</code> pointing to <code s__="13">newbranch</code> and our commits will go there, instead.</p>
<p d__="">Right after creating <code s__="13">newbranch</code>, we had 
the situation in Figure 5.12. Now let’s edit something in the working 
tree and make a new commit. With that, we’ll have the scenario in Figure
 5.13.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_120.svg" title="[Adding a new commit to newbranch.]">
<figcaption aria-hidden="true" s__="14" d__="">Adding a new commit to <code s__="13">newbranch</code>.</figcaption>
</figure>
<!--
``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)
                       ^
                       |
                   [newbranch]<--HEAD
```

``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)---(5)
                             ^
                             |
                         [newbranch]<--HEAD
```
-->
<p d__="">Right? Let’s make another commit and get to Figure 5.14.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_130.svg" title="[Adding another commit to newbranch.]">
<figcaption aria-hidden="true" s__="14" d__="">Adding another commit to <code s__="13">newbranch</code>.</figcaption>
</figure>
<!--
``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)---(5)---(6)
                                   ^
                                   |
                               [newbranch]<--HEAD
```
-->
<p d__="">We can see that <code s__="13">newbranch</code> and <code s__="13">main</code> are pointing at different commits.</p>
<blockquote>
<p d__="">If we wanted to see the state of the repo from <code s__="13">main</code>’s perspective, what would we have to do? We’d have to <code s__="13">git switch main</code> to look at that branch.</p>
</blockquote>
<p d__="">Now for another question. Let’s say we’ve decided that we’re happy with the changes on <code s__="13">newbranch</code>, and we want to merge them into the code in the <code s__="13">main</code> branch. How would we do that?</p>
<h2 data-number="5.6" id="merging-fast-forward" d__=""><span class="header-section-number">5.6</span> Merging: Fast-Forward</h2>
<p></p>
<p d__="">Bringing two branches back into sync is called <em>merging</em>.</p>
<p d__="">The branch you’re on is the branch you’re bringing other changes <em>into</em>.
 That is, if you’re on Branch A, and you tell git to Merge Branch B, 
Branch B’s changes will be applied onto Branch A. (Branch B remains 
unchanged in this scenario.)</p>
<p d__="">But in this section we’re going to be talking about a specific kind of merge: the <em>fast-forward</em>. This occurs when the branch you’re merging from is a direct ancestor of the branch you’re merging into.</p>
<p d__="">Let’s say we have <code s__="13">newbranch</code> checked out, like from the previous example in Figure 5.14.</p>
<!--
``` {.default}
                      [main]
                       |
                       v
    (1)---(2)---(3)---(4)---(5)---(6)
                                   ^
                                   |
                               [newbranch]<--HEAD
```
-->
<p d__="">I decide I want to merge <code s__="13">main</code>’s changes into <code s__="13">newbranch</code>, so (again, having <code s__="13">newbranch</code> checked out):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb58-1" d__=""><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>$ git merge main</span>
<span id="cb58-2" d__=""><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  Already up to date.</span></code></pre></div>
<p d__="">Nothing happened? What’s that mean? Well, if we look at the commit graph, above, all of <code s__="13">main</code>’s changes are already in <code s__="13">newbranch</code>, since <code s__="13">newbranch</code> is a direct ancestor.</p>
<p d__="">Git is saying, “Hey, you already have all the commits up to <code s__="13">main</code> in your branch, so there’s nothing for me to do.”</p>
<p d__="">But let’s reverse it. Let’s check out <code s__="13">main</code> and then merge <code s__="13">newbranch</code> into it.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb59-1" d__=""><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>$ git switch main</span></code></pre></div>
<p d__="">Now we’ve moved <code s__="13">HEAD</code> to track <code s__="13">main</code>, as shown in Figure 5.15.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_140.svg" title="[Checking out `main` again.]">
<figcaption aria-hidden="true" s__="14" d__="">Checking out <code s__="13">main</code> again.</figcaption>
</figure>
<!--
``` {.default}
                      [main]<--HEAD
                       |
                       v
    (1)---(2)---(3)---(4)---(5)---(6)
                                   ^
                                   |
                               [newbranch]
```
-->
<p d__="">And <code s__="13">newbranch</code> is <strong>not</strong> a direct ancestor of <code s__="13">main</code> (it’s a descendant). So <code s__="13">newbranch</code>’s changes are <strong>not</strong> yet in <code s__="13">main</code>.</p>
<p d__="">So let’s merge them in and see what happens (your output may vary depending on what files are included in the merge):</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb60-1" d__=""><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>$ git merge newbranch</span>
<span id="cb60-2" d__=""><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  Updating 087a53d..cef68a8</span>
<span id="cb60-3" d__=""><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  Fast-forward</span>
<span id="cb60-4" d__=""><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>   foo.py | 4 +++-</span>
<span id="cb60-5" d__=""><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>   1 file changed, 3 insertions(+), 1 deletion(-)</span></code></pre></div>
<p d__="">And now we’re at Figure 5.16.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_030_150.svg" title="[After merging newbranch into main.]">
<figcaption aria-hidden="true" s__="14" d__="">After merging <code s__="13">newbranch</code> into <code s__="13">main</code>.</figcaption>
</figure>
<!--
``` {.default}
                                 [main]<--HEAD
                                   |
                                   v
    (1)---(2)---(3)---(4)---(5)---(6)
                                   ^
                                   |
                               [newbranch]
```
-->
<p d__="">Wait a second—didn’t we say to merge <code s__="13">newbranch</code> into <code s__="13">main</code>, like take those changes and fold them into the <code s__="13">main</code> branch? Why did <code s__="13">main</code> move, then?</p>
<p d__="">We did! But let’s stop and think about how this can happen in the special case where the branch you’re merging <em>into</em> is a direct ancestor of the branch you’re merging <em>from</em>.</p>
<p d__="">It used to be that <code s__="13">main</code> didn’t have commits <code s__="13">(5)</code> or <code s__="13">(6)</code> in the graph, above. But <code s__="13">newbranch</code> has already done the work of adding <code s__="13">(5)</code> and <code s__="13">(6)</code>!</p>
<p d__="">The easiest way to get those commits “into” <code s__="13">main</code> is to simply <em>fast-forward</em> <code s__="13">main</code> up to <code s__="13">newbranch</code>’s commit!</p>
<p d__="">Again, this only works when the branch you’re merging into is a direct ancestor of the branch you’re merging from.</p>
<p d__="">That said, you certainly can merge branches that are not 
directly related like that, e.g.&nbsp;branches that share a common 
ancestor but have both since diverged.</p>
<p d__="">Git will automatically fast-forward if it can. Otherwise it 
does a “real” merge. And while fast-forward merges can never lead to <em>merge conflicts</em>, regular merges certainly can.</p>
<p d__="">But that’s another story.</p>
<p></p>
<h2 data-number="5.7" id="deleting-a-branch" d__=""><span class="header-section-number">5.7</span> Deleting a Branch</h2>
<p></p>
<p d__="">If you’re done merging your branch, it’s easy to delete it. <strong>Importantly, this doesn’t delete any commits; it just deletes the branch “label” so you can’t use it any longer</strong>. You can still use all the commits.</p>
<p d__="">Let’s say we’ve finished the work on our <code s__="13">topic1</code> branch and we want to merge it into <code s__="13">main</code>. No problem:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb61-1" d__=""><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m "finished with topic1"   # on topic1 branch</span>
<span id="cb61-2" d__=""><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>$ git switch main</span>
<span id="cb61-3" d__=""><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>$ git merge topic1                       # merge topic1 into main</span></code></pre></div>
<p d__="">At this point, assuming a completed merge, we can delete the <code s__="13">topic</code> branch:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb62-1" d__=""><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>$ git branch -d topic1</span>
<span id="cb62-2" d__=""><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  Deleted branch topic1 (was 3be2ad2).</span></code></pre></div>
<p d__="">Done!</p>
<blockquote>
<p d__=""><strong>A <em>topic</em> branch is what we call a local branch made for a single topic like a feature, bug fix, etc.</strong> In this guide I’ll name branches literally <code s__="13">topic</code> to indicate that it’s just an arbitrary branch. But in real life you’d name the topic branch after what it is your doing, like <code s__="13">bugfix37</code>, <code s__="13">newfeature</code>, <code s__="13">experiment</code>, etc.</p>
</blockquote>
<p d__="">But what if you were working on a branch and wanted to abandon
 it before you merge it into something? For that, we have the more 
imperative Capital <code s__="13">D</code> option, which means, “I <em>really</em> mean it. Delete this unmerged branch!”</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb63-1" d__=""><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>$ git branch -D topic1</span></code></pre></div>
<p d__="">Use lowercase <code s__="13">-d</code> unless you have reason 
to do otherwise. It’ll at least tell you if you’re about to lose your 
reference to your unmerged commits!</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="6" id="merging-and-conflicts" d__=""><span class="header-section-number">6</span> Merging and Conflicts</h1>
<p d__="">We’ve seen how a fast-forward merge can bring to branches into sync with no possibility of conflict.</p>
<p d__="">But what if we can’t fast-forward because two branches are not direct ancestors? In other words, what if the branches have <em>diverged</em>?</p>
<h2 data-number="6.1" id="an-example-of-divergent-branches" d__=""><span class="header-section-number">6.1</span> An Example of Divergent Branches</h2>
<p></p>
<p d__="">Let’s look at a commit graph where things are still OK to fast-forward in Figure 6.1.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_040_010.svg" title="[A direct ancestor branch.]">
<figcaption aria-hidden="true" s__="14" d__="">A direct ancestor branch.</figcaption>
</figure>
<!--
``` {.default}
         [main]
           |
           v          [somebranch]
    (1)---(2)            |
            \            v
            (3)---(5)---(7)
```
-->
<p d__="">Yes, I’ve bent the graph a bit there, but we can merge <code s__="13">somebranch</code> into <code s__="13">main</code> as a fast-forward because <code s__="13">main</code> is a direct ancestor and <code s__="13">somebranch</code> is therefore a direct descendant.</p>
<p d__="">But what if, <strong>before</strong> we merged, someone made another commit on the <code s__="13">main</code> branch? And now it looks like it does in Figure 6.2.</p>
<!--
``` {.default}
               [main]
                 |
                 v    [somebranch]
    (1)---(2)---(8)      |
            \            v
            (3)---(5)---(7)
```
-->
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_040_020.svg" title="[Not a direct ancestor branch.]">
<figcaption aria-hidden="true" s__="14" d__="">Not a direct ancestor branch.</figcaption>
</figure>
<p d__="">There’s a common ancestor at commit <code s__="13">(2)</code>, but there’s no direct line of descent. <code s__="13">main</code> and <code s__="13">somebranch</code> have diverged.</p>
<p d__="">Is all hope lost? How can we merge?</p>
<h2 data-number="6.2" id="merging-divergent-branches" d__=""><span class="header-section-number">6.2</span> Merging Divergent Branches</h2>
<p></p>
<p d__="">Turns out you do it the exact same way as always.</p>
<ol type="1">
<li d__="">Check out the branch you want to merge <em>into</em>.</li>
<li d__=""><code s__="13">git merge</code> the branch you want to merge <em>from</em>.</li>
</ol>
<p d__="">In our Figure 6.2 example above, let’s say we’ve done this:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb64-1" d__=""><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>$ git switch main</span>
<span id="cb64-2" d__=""><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>$ git merge somebranch    # into main</span></code></pre></div>
<blockquote>
<p d__="">The <code s__="13">#</code> is a shell comment delimiter. You can paste that in if you want, but it does nothing.</p>
</blockquote>
<p d__="">The difference here is that Git can’t simply fast-forward. It has to somehow, magically, bring together the changes from commit <code s__="13">(7)</code> <strong>and</strong> commit <code s__="13">(8)</code> even if they’re radically different than one other.</p>
<p d__="">This means that after we bring those two commits together, the
 code will look like it’s never looked before, a combination of two sets
 of changes.</p>
<p d__="">And because it looks like it hasn’t before, we need <em>another commit</em> (another snapshot of the working tree) to represent the joining of both sets of changes.</p>
<p d__="">We call this the <em>merge commit</em>, and Git will 
automatically make it for you. (When this happens, you’ll see an editor 
pop up with some text in it. This text is the commit message. Edit it 
(or just accept it as-is) and save the file and exit the editor. See <a href="#editor-get-out" d__="">Getting Out of Editors</a> if you need help with this.</p>
<p d__="">So after our merge, we end up with Figure 6.3.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_040_030.svg" title="[Creating a merge commit.]">
<figcaption aria-hidden="true" s__="14" d__="">Creating a merge commit.</figcaption>
</figure>
<!--

``` {.default}
                         [main]
                           |
                           v    
    (1)---(2)---(8)-------(9)
            \             /
            (3)---(5)---(7)
                         ^
                         |
                      [somebranch]
```
-->
<p d__="">Commit labeled <code s__="13">(9)</code> is the merge commit. It contains both the changes from <code s__="13">(8)</code> and <code s__="13">(7)</code>. And has the commit message you saved in the editor.</p>
<p d__="">And we see <code s__="13">main</code> has been updated to point to it. And that <code s__="13">somebranch</code> is unaffected.</p>
<p d__="">Importantly, we see that commit <code s__="13">(9)</code> has <strong>two parents</strong>, the commits that were merged together to make it.</p>
<p d__="">And look! If we want, we can now fast-forward <code s__="13">somebranch</code> to <code s__="13">main</code> because it’s now a direct ancestor!</p>
<p d__="">In this example, Git was able to determine how to do the merge
 automatically. But there are some cases where it cannot, and this 
results in a <em>merge conflict</em> that requires manual intervention. By you.</p>
<h2 data-number="6.3" id="merge-conflicts" d__=""><span class="header-section-number">6.3</span> Merge Conflicts</h2>
<p></p>
<p d__="">If two branches have changes that are “far apart” from one 
another, Git can figure it out. If I edit line 20 of a file in one 
branch, and you edit line 3490 of the same file in another, Git can 
bring both edits in automatically.</p>
<p d__="">But let’s say I edit line 20 in one commit, and you edit line 20 (the same line) in another commit.</p>
<p d__="">Which one is “right”? Git has no idea because it’s just dumb software and doesn’t know our business needs.</p>
<p d__="">So it asks us, during the merge, to fix it. After we fix it, Git can complete the merge.</p>
<blockquote>
<p d__=""><strong>There’s an important point here.</strong> When you’re merging, if a conflict occurs, <em>you’re still merging</em>. Git is in the “merge” state, waiting for more merge-specific commands.</p>
<p d__="">You can resolve the conflict then commit the changes to 
complete the merge. Or you can back out of the merge making as if you’d 
never started it in the first place.</p>
<p d__="">The important point is that you’re aware Git is in a special 
state and you have to either complete or abort the merge to get back to 
normal before you continue to use it.</p>
</blockquote>
<p d__="">Let’s have an example where both <code s__="13">main</code> and <code s__="13">newbranch</code>
 have added a line to end of file, i.e.&nbsp;they both added line 4. Git
 doesn’t know which one is correct, so there’s a conflict.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb65-1" d__=""><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>$ git merge newbranch</span>
<span id="cb65-2" d__=""><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.py</span>
<span id="cb65-3" d__=""><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in foo.py</span>
<span id="cb65-4" d__=""><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  Automatic merge failed; fix conflicts and then commit the result.</span></code></pre></div>
<p d__="">Now if I look at my status, I see we’re in merge state, as noted by <code s__="13">You have unmerged paths</code>. We’re in the middle of merge; we have to either go out the front or back out the back to get back to normal.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb66-1" d__=""><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb66-2" d__=""><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb66-3" d__=""><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  You have unmerged paths.</span>
<span id="cb66-4" d__=""><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    (fix conflicts and run "git commit")</span>
<span id="cb66-5" d__=""><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    (use "git merge --abort" to abort the merge)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7" d__=""><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb66-8" d__=""><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb66-9" d__=""><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>      both modified:   foo.py</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11" d__=""><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">It’s also hinting that I can do one of two things:</p>
<ol type="1">
<li d__="">Fix conflicts and run <code s__="13">git commit</code>.</li>
<li d__="">Use <code s__="13">git merge --abort</code> to abort the merge.</li>
</ol>
<p d__="">The second just rolls back the merge making it as if I hadn’t run <code s__="13">git merge</code> in the first place.</p>
<p d__="">So let’s focus on the first. What are these conflicts and how do I resolve them?</p>
<h2 data-number="6.4" id="what-a-conflict-looks-like" d__=""><span class="header-section-number">6.4</span> What a Conflict Looks Like</h2>
<p d__="">My error message above is telling me that <code s__="13">foo.py</code> has unmerged paths. So look at what’s happened with that file.</p>
<p d__="">Before I started any of this, the file <code s__="13">foo.py</code> only had this in it on branch <code s__="13">main</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb67-1" d__=""><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>print("Commit 1")</span></code></pre></div>
<p d__="">And I added a line so it looked like this:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb68-1" d__=""><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>print("Commit 1")</span>
<span id="cb68-2" d__=""><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>print("Commit 4")</span></code></pre></div>
<p d__="">And committed it.</p>
<p d__="">But what I didn’t realize was that my teammate had also made another commit on <code s__="13">newbranch</code> that added different lines to the bottom of the file.</p>
<p d__="">So when I went to merge <code s__="13">newbranch</code> into <code s__="13">main</code>, I got this conflict. Git doesn’t know which additional lines are correct.</p>
<p d__=""><strong>Here’s where the fun begins.</strong> Let’s edit <code s__="13">foo.py</code> here in the middle of the merge and see what it looks like:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb69-1" d__=""><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>print("Commit 1")</span>
<span id="cb69-2" d__=""><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span id="cb69-3" d__=""><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>print("Commit 4")</span>
<span id="cb69-4" d__=""><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>=======</span>
<span id="cb69-5" d__=""><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>print("Commit 2")</span>
<span id="cb69-6" d__=""><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>print("Commit 3")</span>
<span id="cb69-7" d__=""><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt; newbranch</span></code></pre></div>
<p d__="">What the giblets is all that? Git has totally screwed with the contents of my file!</p>
<p d__="">Yes, it has! But not for no reason; let’s examine what’s in there.</p>
<p d__="">We have three delimiters: <code s__="13">&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code s__="13">======</code>, and <code s__="13">&gt;&gt;&gt;&gt;&gt;&gt;</code>.</p>
<p d__="">Everything from the top delimiter to the middle one is what’s in <code s__="13">HEAD</code> (the branch you’re on and merging <em>into</em>).</p>
<p d__="">Everything from the middle delimiter to the bottom one is what’s in <code s__="13">newbranch</code> (the branch you’re merging <em>from</em>).</p>
<p d__="">So Git has “helpfully” given us the information we need to make a semi-informed decision about what to do.</p>
<p d__="">And here’s exactly the steps we must follow:</p>
<ol type="1">
<li d__="">Edit the conflicting file(s), remove all those extra lines, and <strong>make the file(s) Right</strong>.</li>
<li d__="">Do a <code s__="13">git add</code> to add the file(s).</li>
<li d__="">Do a <code s__="13">git commit</code> to finalize the merge.</li>
</ol>
<p d__="">Now, when I say “make the file <em>Right</em>”, what does that
 mean? It means that I need to have a chat with my teammate and figure 
out what this code is supposed to do. We clearly have different ideas, 
and only one of them is right.</p>
<p d__="">So we have a chat and hash it out. We finally decide the file should look like this:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb70-1" d__=""><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>print("Commit 1")</span>
<span id="cb70-2" d__=""><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>print("Commit 4")</span>
<span id="cb70-3" d__=""><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>print("Commit 3")</span></code></pre></div>
<p d__="">And then I (since I’m the one doing the merge), edit <code s__="13">foo.py</code> and remove all the merge delimiters and everything else, and make it look exactly like we agreed upon. I make it look <em>Right</em>.</p>
<p d__="">Then I add the file to the stage and make a merge commit. 
(Here we’re manually making the merge commit, unlike above where Git was
 able to automatically make it.)</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb71-1" d__=""><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>$ git add foo.py</span>
<span id="cb71-2" d__=""><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb71-3" d__=""><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb71-4" d__=""><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  All conflicts fixed but you are still merging.</span>
<span id="cb71-5" d__=""><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    (use "git commit" to conclude merge)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7" d__=""><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb71-8" d__=""><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>      modified:   foo.py</span></code></pre></div>
<p d__="">Notice that <code s__="13">git status</code> is telling me we’re still in the merging state, but I’ve resolved the conflicts. It tells me to <code s__="13">git commit</code> to finish the merge.</p>
<blockquote>
<p d__=""><strong>What if I added the conflict file too soon?</strong> For example, what if you add it but then you realize there are still unresolved conflicts or the file isn’t <em>Right</em>? If you haven’t committed yet, you have a couple options. (If you have committed, all you can do is reset or revert.)</p>
<p d__="">One option is to just edit the file again, and re-add it when 
it’s done. (After editing the file will show up as a “change not staged 
for commit” until you add it again.)</p>
<p d__="">Another option is to move the file off the stage with <code s__="13">git checkout --merge</code>
 on the file to get it back to the “both modified” state. Helpfully, 
this won’t delete the changes you already added. This is especially 
useful if you’re using a <a href="#mergetool" d__="">merge tool</a>.</p>
</blockquote>
<p d__="">So now that we’ve added the file, let’s make the merge commit:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb72-1" d__=""><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m "Merged with newbranch"</span>
<span id="cb72-2" d__=""><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  [main 668b506] Merged with newbranch</span></code></pre></div>
<p d__="">And that’s it! Let’s check status just to be sure:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb73-1" d__=""><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb73-2" d__=""><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb73-3" d__=""><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span></code></pre></div>
<p d__="">Success!</p>
<p d__="">Just to wrap up, let’s take a look at the log at this point:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb74-1" d__=""><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb74-2" d__=""><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  commit 668b5065aa803fa496951b70159474e164d4d3d2 (HEAD -&gt; main)</span>
<span id="cb74-3" d__=""><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  Merge: e4b69af 81d6f58</span>
<span id="cb74-4" d__=""><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb74-5" d__=""><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  Date:   Sun Feb 4 13:18:09 2024 -0800</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7" d__=""><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      Merged with newbranch</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9" d__=""><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  commit e4b69af05724dc4ef37594e06d0fd323ca1b8578</span>
<span id="cb74-10" d__=""><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb74-11" d__=""><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>  Date:   Sun Feb 4 13:16:32 2024 -0800</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-13" d__=""><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>      Commmit 4</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-15" d__=""><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>  commit 81d6f58b5982d39a1d92af06b812777dbb452879 (newbranch)</span>
<span id="cb74-16" d__=""><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb74-17" d__=""><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>  Date:   Sun Feb 4 13:16:32 2024 -0800</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-19" d__=""><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>      Commmit 3</span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-21" d__=""><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>  commit 3ab961073374ec26734c933503a8aa988c94185b</span>
<span id="cb74-22" d__=""><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb74-23" d__=""><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>  Date:   Sun Feb 4 13:16:32 2024 -0800</span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-25" d__=""><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>      Commmit 1</span></code></pre></div>
<p d__="">We see a few things. One is that our merge commit is pointed to by <code s__="13">main</code> (and <code s__="13">HEAD</code>). And looking down a couple commits, we see our now-direct ancestor, <code s__="13">newbranch</code> back on Commit 3.</p>
<p d__="">We also see a <code s__="13">Merge:</code> line on that top commit. It lists the UUIDs for the two commits that it came from (the first 7 digits, anyway).</p>
<h2 data-number="6.5" id="why-merge-conflicts-happen" d__=""><span class="header-section-number">6.5</span> Why Merge Conflicts Happen</h2>
<p d__="">Generally, it’s because you haven’t coordinated with your team
 about who is responsible for which pieces of code. Generally two people
 shouldn’t be editing the same lines of code in the same file at once.</p>
<p d__="">That said, there are absolutely cases where it does happen and
 is expected. The key is to communicate with your team when resolving 
the conflict if you don’t know what is <em>Right</em>.</p>
<h2 data-number="6.6" id="merging-with-ides-or-other-merge-tools" d__=""><span class="header-section-number">6.6</span> Merging with IDEs or other Merge Tools</h2>
<p d__="">IDEs like VS Code might have a special merge mode where you 
can choose one set of changes or another, or both. Likely “both” is what
 you want, but make an informed decision on the matter.</p>
<p d__="">Also, even when selecting “both”, it could be that the editor 
puts them in the wrong order. It’s up to you to make sure the file is <em>Right</em> before making the final commit to complete the merge.</p>
<p d__="">You can do this by, after the tool has been used to merge, 
opening the file again in a new window and making sure it’s as you want 
it, and editing it to be if it’s not.</p>
<p d__="">For more information about merge tools, see the <a href="#mergetool" d__="">Mergetool</a> chapter.</p>
<h2 data-number="6.7" id="merge-big-ideas" d__=""><span class="header-section-number">6.7</span> Merge Big Ideas</h2>
<p d__=""><strong><em>DON’T PANIC!</em></strong> If you have a merge 
conflict, you can totally work it out. They’re a common occurrence, and 
the more of them you do, the better at them you get.</p>
<p d__="">Nothing to worry about. Everything is in Git’s commit history,
 so even if you botch it, you can always get things back the way they 
were.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="7" id="using-subdirectories-with-git" d__=""><span class="header-section-number">7</span> Using Subdirectories with Git</h1>
<p></p>
<p d__="">This is a shorter chapter, but we want to talk about Git’s 
behavior when it comes to working in subdirectories and some gotchas 
that you probably don’t want to get wrapped up in.</p>
<h2 data-number="7.1" id="repos-and-subdirectories" d__=""><span class="header-section-number">7.1</span> Repos and Subdirectories</h2>
<p d__="">When you run a <code s__="13">git</code> command, Git looks for a special directory called <code s__="13">.git</code>
 (“dot git”) in the current directory. As we’ve already mentioned, this 
is the directory, created when you create the repo, that holds the 
metadata about the repo.</p>
<p d__="">But what if you’re in a subdirectory in your project, and there’s no <code s__="13">.git</code> directory there?</p>
<p d__="">Git starts by looking in the current directory for <code s__="13">.git</code>.
 If it can’t find it there, it looks in the parent directory. And if 
it’s not there, it looks in the grandparent, etc., all the way back to 
the root directory.</p>
<h3 data-number="7.1.1" id="what-about-subprojects" d__=""><span class="header-section-number">7.1.1</span> What about Subprojects?</h3>
<p></p>
<p d__="">One common student question is, “Should I make one single repo
 for CS101 with subdirectories for each project? Or should I make a 
different repo for every project?”</p>
<p d__="">Firstly, see if your instructor has a requirement or 
preference, but other than that, it doesn’t technically matter which 
approach you use.</p>
<p d__="">In real life, bigger repos (much bigger than you’ll typically 
be using for a class) take a lot longer to clone due to their size.</p>
<p d__="">What happens if you initialize a new Git repo <em>inside</em> an existing repo? It’s not great. Don’t do this.</p>
<p d__="">For mixing and matching different repos in the same hierarchy, Git has the concept of <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" d__="">submodules</a><a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup s__="13" d__="">15</sup></a>, but that’s out of scope for this guide, and rarely used in school.</p>
<h2 data-number="7.2" id="accidentally-making-a-repo-in-your-home-directory" d__=""><span class="header-section-number">7.2</span> Accidentally Making a Repo in your Home Directory</h2>
<p d__="">Git won’t stop you from making a repo there, i.e.&nbsp;a repo that contains everything in all your directories.</p>
<p d__="">But that’s probably not what you wanted to do.</p>
<p d__="">How does one make this mistake? Usually it’s with <code s__="13">git init .</code>
 in your home directory. You can also make this error by launching VS 
Code from your home directory and telling it to “Initialize Repository” 
in that location.</p>
<p d__="">This is particularly insidious because if you’re in a subdirectory that you <em>think</em> is a standalone repo, you might have been misled since Git searches parent folder for the <code s__="13">.git</code> directory and it could be finding the spurious one you accidentally made in your home directory.</p>
<p d__="">We recommend against one big repo from your home directory. You should have separate subdirectories for each of your repos.</p>
<p d__="">If you accidentally create a repo where you didn’t want to, 
changing a Git repo to a regular subdirectory is as simple as removing 
the <code s__="13">.git</code> directory. Be careful that you’re removing the correct one when you do this!</p>
<blockquote>
<p d__="">One hack you can do to prevent Git from creating a repo in your home directory is to preemptively put an unwriteable <code s__="13">.git</code> directory there.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb75-1" d__=""><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>$ mkdir ~/.git       # Make the .git directory</span>
<span id="cb75-2" d__=""><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>$ chmod 000 ~/.git   # Take away all permissions</span></code></pre></div>
<!-- ` -->
<p d__="">This way when Git tries to make its metadata folder there, it’ll be stopped because you don’t have write permission to that <code s__="13">.git</code> directory.</p>
</blockquote>
<h2 data-number="7.3" id="empty-subdirectories-in-repos" d__=""><span class="header-section-number">7.3</span> Empty Subdirectories in Repos</h2>
<p d__="">Turns out Git doesn’t support this. It only tracks files, so 
if you want a subdirectory represented in your repo, you must have at 
least one file in it.</p>
<p d__="">A common thing to do is add an empty file called <code s__="13">.gitkeep</code>
 (“dot git keep”) to the subdirectory, then add it to the repo. This 
will cause Git to recreate the subdirectory when it clones or merges the
 <code s__="13">.gitkeep</code> directory.</p>
<blockquote>
<p d__="">The file <code s__="13">.gitkeep</code> isn’t special in any 
way, other than convention. The file could be called anything. For 
example, if you know you’ll need to eventually put a <code s__="13">.gitignore</code> in that directory, you might just use that instead. Or a <code s__="13">README</code>.</p>
</blockquote>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="8" id="ignoring-files-with-.gitignore" d__=""><span class="header-section-number">8</span> Ignoring Files with <code>.gitignore</code></h1>
<p></p>
<p d__="">What if you have files in your subdirectory you don’t want Git
 to pay any attention to? Like maybe you have some temporary files you 
don’t want to see in the repo. Or maybe you have an executable you built
 from a C project and you don’t want that checked in because your 
incredibly strict instructor won’t grade your project if the repo 
contains any build products? For example.</p>
<p d__="">That’s what this part of the guide is all about.</p>
<h2 data-number="8.1" id="adding-a-.gitignore-file" d__=""><span class="header-section-number">8.1</span> Adding a <code>.gitignore</code> File</h2>
<p d__="">In any directory of a project, you can add a <code s__="13">.gitignore</code> (“dot gitignore”) file.</p>
<p d__="">This is a simple textfile that contains a list of file names to ignore.</p>
<p d__="">Let’s say I have a C project that builds an executable called 
“doom”. I wouldn’t want to check that into my source repo because it’s 
not source, and it’s just a big binary that takes a bunch of disk.</p>
<p d__="">But when I get the status, it’s annoying to see Git complaining about it:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb76-1" d__=""><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb76-2" d__=""><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb76-3" d__=""><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  Untracked files:</span>
<span id="cb76-4" d__=""><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to include in what will be committed)</span>
<span id="cb76-5" d__=""><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>      doom</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7" d__=""><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  nothing added to commit but untracked files present (use "git</span>
<span id="cb76-8" d__=""><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  add" to track)</span></code></pre></div>
<p d__="">So I edit a <code s__="13">.gitignore</code> file in that directory and add this one line to it:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb77-1" d__=""><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>doom</span></code></pre></div>
<p d__="">Now I run status again:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb78-1" d__=""><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb78-2" d__=""><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb78-3" d__=""><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  Untracked files:</span>
<span id="cb78-4" d__=""><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to include in what will be committed)</span>
<span id="cb78-5" d__=""><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>      .gitignore</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7" d__=""><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  nothing added to commit but untracked files present (use "git</span>
<span id="cb78-8" d__=""><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>  add" to track)</span></code></pre></div>
<p d__="">What? Same thing? Not quite! Read the fine print!</p>
<p d__="">It used to be complaining that <code s__="13">doom</code> was untracked, but now it’s not complaining. So the <code s__="13">.gitignore</code> worked. Woo hoo!</p>
<p d__="">But Git has found another untracked file in the brand new <code s__="13">.gitignore</code>. So we should add that to the repo.</p>
<p d__="">Always put your <code s__="13">.gitignore</code> files in the repo unless you have a compelling reason not to. This way they’ll exist in all your clones, which is handy.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb79-1" d__=""><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>$ git add .gitignore</span>
<span id="cb79-2" d__=""><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>$ git commit -m Added</span>
<span id="cb79-3" d__=""><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  [main 07582ad] Added</span>
<span id="cb79-4" d__=""><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span>
<span id="cb79-5" d__=""><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>   create mode 100644 .gitignore</span></code></pre></div>
<p d__="">Now we get the status:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb80-1" d__=""><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb80-2" d__=""><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb80-3" d__=""><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span></code></pre></div>
<p d__="">and we’re all clear.</p>
<h2 data-number="8.2" id="can-i-specify-subdirectories-in-.gitignore" d__=""><span class="header-section-number">8.2</span> Can I Specify Subdirectories in <code>.gitignore</code>?</h2>
<p></p>
<p d__="">Yes!</p>
<p d__="">You can be as specific or as non-specific as you like with file matches.</p>
<p d__="">Here’s a <code s__="13">.gitignore</code> looking for a very specific file:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb81-1" d__=""><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>subdir/subdir2/foo.txt</span></code></pre></div>
<p d__="">That will match anywhere in the project. If you want to only 
match a specific file from the project root, you can prepend a slash:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb82-1" d__=""><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>/subdir/subdir2/foo.txt</span></code></pre></div>
<p d__="">Note that means <code s__="13">subdir</code> in the root of the <em>project</em>, not the root directory of your entire filesystem.</p>
<h2 data-number="8.3" id="where-do-i-put-the-.gitignore" d__=""><span class="header-section-number">8.3</span> Where do I Put the <code>.gitignore</code>?</h2>
<p></p>
<p d__="">You can add <code s__="13">.gitignore</code> files to any subdirectories of your project. But how they behave depends on where they are.</p>
<p d__="">The rule is this: <em>each <code s__="13">.gitignore</code> file applies to all the subdirectories below it</em>.</p>
<p d__="">So if you put a <code s__="13">.gitignore</code> in your project’s root directory that has <code s__="13">foo.txt</code> in it, every single <code s__="13">foo.txt</code> in every subdirectory of your project will be ignored.</p>
<p d__="">Use the highest-level <code s__="13">.gitignore</code> file to block things you know you don’t want <strong>anywhere</strong> in your project.</p>
<p d__="">If you add additional <code s__="13">.gitignore</code> files to subdirectories, those only apply to that subdirectory and below.</p>
<p d__="">The idea is that you start with the most broadly applicable 
set of ignored files in your project root, and then get more specific in
 the subdirectories.</p>
<p d__="">For simple projects, you’re fine just having one <code s__="13">.gitignore</code> in the project root directory.</p>
<h2 data-number="8.4" id="wildcards" d__=""><span class="header-section-number">8.4</span> Wildcards</h2>
<p></p>
<p d__="">Do I have to individually list all the files I don’t want in the <code s__="13">.gitignore</code>? What a pain!</p>
<p d__="">Luckily Git supports <em>wildcards</em> in ignored file naming.</p>
<p d__="">For example, if we wanted to block all the files that ended with a <code s__="13">.tmp</code> or <code s__="13">.swp</code> (Vim’s temp file name) extension, we could use the <code s__="13">*</code> (“splat”) wildcard for that. Let’s make a <code s__="13">.gitignore</code> that blocks those:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb83-1" d__=""><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>*.tmp</span>
<span id="cb83-2" d__=""><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>*.swp</span></code></pre></div>
<p d__="">And now any files ending with <code s__="13">.tmp</code> or <code s__="13">.swp</code> will be ignored.</p>
<p d__="">Turns out that Vim has two kinds of swap files, <code s__="13">.swp</code> and <code s__="13">.swo</code>. So could we add them like this?</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb84-1" d__=""><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>*.tmp</span>
<span id="cb84-2" d__=""><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>*.swo</span>
<span id="cb84-3" d__=""><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>*.swp</span></code></pre></div>
<p d__="">Sure! That works, but there’s a shorter way where you can tell
 Git to match any character in a bracketed set. This is equivalent to 
the above:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb85-1" d__=""><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>*.tmp</span>
<span id="cb85-2" d__=""><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>*.sw[op]</span></code></pre></div>
<p d__="">You can read that last line as, “Match file names that begins with any sequence of characters, followed by <code s__="13">.sw</code>, followed by either <code s__="13">o</code> or <code s__="13">p</code>.”</p>
<h2 data-number="8.5" id="negated-.gitignore-rules" d__=""><span class="header-section-number">8.5</span> Negated <code>.gitignore</code> Rules</h2>
<p></p>
<p d__="">What if your root <code s__="13">.gitignore</code> is ignoring <code s__="13">*.tmp</code> files for the entire project. No problem.</p>
<p d__="">But then later in development you have some deeply nested subdirectory that has a file <code s__="13">needed.tmp</code> that you really need to get into Git.</p>
<p d__="">Bad news, though, since <code s__="13">*.tmp</code> is ignored at the root level across all subdirectories in the project! Can we fix it?</p>
<p d__="">Yes! You can add a new <code s__="13">.gitignore</code> to the subdirectory with <code s__="13">needed.tmp</code> in it, with these contents:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb86-1" d__=""><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>!needed.tmp</span></code></pre></div>
<p d__="">This tells Git, “Hey, if you were ignoring <code s__="13">needed.tmp</code> because of some higher-up ignore rule, please stop ignoring it.”</p>
<p d__="">So while <code s__="13">needed.tmp</code> was being ignored because of the root level ignore file, this more-specific file overrides that.</p>
<p d__="">If you needed to allow all <code s__="13">.tmp</code> files in this subdirectory, you could use wildcards:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb87-1" d__=""><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>!*.tmp</span></code></pre></div>
<p d__="">And that would make it so all <code s__="13">.tmp</code> files in this subdirectory were not ignored</p>
<h2 data-number="8.6" id="how-to-ignore-all-files-except-a-few" d__=""><span class="header-section-number">8.6</span> How To Ignore All Files Except a Few?</h2>
<p d__="">You can use the negated rules for that.</p>
<p d__="">Here’s a <code s__="13">.gitignore</code> that ignores everything except files called <code s__="13">*.c</code> or <code s__="13">Makefile</code>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb88-1" d__=""><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>*</span>
<span id="cb88-2" d__=""><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>!*.c</span>
<span id="cb88-3" d__=""><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>!Makefile</span></code></pre></div>
<p d__="">The first line ignores everything. The next two lines negate that rule for those specific files.</p>
<h2 data-number="8.7" id="getting-premade-.gitignore-files" d__=""><span class="header-section-number">8.7</span> Getting Premade <code>.gitignore</code> Files</h2>
<p></p>
<p d__=""><a href="https://github.com/github/gitignore" d__="">Here’s a repo</a><a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup s__="13" d__="">16</sup></a> with a whole bunch.</p>
<p d__="">But you can also roll your own as needed. Use <code s__="13">git status</code> often to see if any files are there you want to ignore.</p>
<p d__="">When you create a new repo on GitHub, it also gives you the option to choose a prepopulated <code s__="13">.gitignore</code>. <strong>Warning!</strong>
 Only do this if you’re not planning to push an already-existing repo 
into this newly-made GitHub repo. If you plan to do this, GitHub’s <code s__="13">.gitignore</code> will get in the way.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="9" id="remotes-repos-in-other-places" d__=""><span class="header-section-number">9</span> Remotes: Repos in Other Places</h1>
<p></p>
<p d__="">A <em>remote</em> is just a name for a remote server you can clone, push, and pull from.</p>
<p d__="">We identify these by a URL. With GitHub, this is a URL we copied when we went to clone the repo initially.</p>
<p d__="">It’s possible to use this URL to identify the server in our 
Git usage, but it’s unwieldy to type. So we give the remote server URLs 
nicknames that we just tend to call “remotes”.</p>
<p d__="">A remote we’ve already seen a bunch of is <code s__="13">origin</code>. This is the nickname for the remote repo you cloned from, and it gets set automatically by Git when you clone.</p>
<h2 data-number="9.1" id="remote-and-branch-notation" d__=""><span class="header-section-number">9.1</span> Remote and Branch Notation</h2>
<p></p>
<p d__="">Before we begin, note that Git uses slash notation to refer to a specific branch on a specific remote: <code s__="13">remotename/branchname</code>.</p>
<p d__="">For example, this refers to the <code s__="13">main</code> branch on the remote named <code s__="13">origin</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb89-1" d__=""><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>origin/main</span></code></pre></div>
<p d__="">And this refers to the branch named <code s__="13">feature3490</code> on a remote named <code s__="13">nitfol</code>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb90-1" d__=""><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>nitfol/feature3490</span></code></pre></div>
<p d__="">We’ll talk more about this in the Remote Tracking Branches chapter.</p>
<h2 data-number="9.2" id="getting-a-list-of-remotes" d__=""><span class="header-section-number">9.2</span> Getting a List of Remotes</h2>
<p></p>
<p d__="">You can run <code s__="13">git remote</code> with the <code s__="13">-v</code> option in any repo directory to see what remotes you have for that repo:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb91-1" d__=""><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>$ git remote -v</span>
<span id="cb91-2" d__=""><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  origin    https://github.com/example-repo.git (fetch)</span>
<span id="cb91-3" d__=""><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  origin    https://github.com/example-repo.git (push)</span></code></pre></div>
<p d__="">We see that we’re using the same URL for the remote named <code s__="13">origin</code> for both push (part of which is <code s__="13">fetch</code>) and pull. Having the same URL for both is super common.</p>
<p d__="">And that URL is the exact same one we copied from GitHub when cloning the repo in the first place.</p>
<h2 data-number="9.3" id="renaming-a-remote" d__=""><span class="header-section-number">9.3</span> Renaming a Remote</h2>
<p></p>
<p d__="">Remember that a remote name is just an alias for some URL that you cloned the repo from.</p>
<p d__="">Let’s say that you are all set up with your SSH keys to use 
GitHub for both push and pull, but you accidentally cloned the repo 
using the HTTPS URL. In that case, you’ll see the following remote:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb92-1" d__=""><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>$ git remote -v</span>
<span id="cb92-2" d__=""><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>origin    https://github.com/example-repo.git (fetch)</span>
<span id="cb92-3" d__=""><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>origin    https://github.com/example-repo.git (push)</span></code></pre></div>
<p d__="">And then you try to push, and GitHub tells you that you can’t push to an HTTPS remote… dang it!</p>
<p d__="">You meant to copy the SSH URL when you cloned, which for me looks like:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb93-1" d__=""><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>git@github.com:beejjorgensen/git-example-repo.git</span></code></pre></div>
<p d__="">Luckily it’s not the end of the world. We can just change what the alias points to.</p>
<p d__="">(The example below is split into two lines so that it’s not 
too wide for the book, but it can be on a single line. The backslash 
lets Bash know that the line continues.)</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb94-1" d__=""><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>$ git remote set-url origin \</span>
<span id="cb94-2" d__=""><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>             git@github.com:beejjorgensen/git-example-repo.git</span></code></pre></div>
<p d__="">And now when we look at our remotes, we see:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb95-1" d__=""><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>$ git remote -v</span>
<span id="cb95-2" d__=""><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/git-example-repo.git (fetch)</span>
<span id="cb95-3" d__=""><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/git-example-repo.git (push)</span></code></pre></div>
<p d__="">And now we can push! (Assuming we have our SSH keys set up.)</p>
<h2 data-number="9.4" id="adding-a-remote" d__=""><span class="header-section-number">9.4</span> Adding a Remote</h2>
<p></p>
<p d__="">There’s nothing stopping you from adding another remote.</p>
<p d__="">A common example is if you <em>forked</em> a GitHub Project 
(more on that later). A fork is a GitHub construct that enables you to 
easily clone someone else’s public repo into your own account, and gives
 you a handy way to share changes you make with the original repo.</p>
<p d__="">Let’s say I forked the Linux source repo. When I clone my fork, I’ll see these remotes:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb96-1" d__=""><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/linux.git (fetch)</span>
<span id="cb96-2" d__=""><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/linux.git (push)</span></code></pre></div>
<p d__="">I don’t have access to the real Linux source code, but I can fork it and get my own copy of the repo.</p>
<p d__="">Now, if Linus Torvalds makes changes to his repo, I won’t 
automatically see them. So I’d like some way to get his changes and 
merge them in with my repo.</p>
<p d__="">I need some way to refer to his repo, so I’m going to add a remote called <code s__="13">reallinux</code> that points to it:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb97-1" d__=""><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>$ git remote add reallinux https://github.com/torvalds/linux.git</span></code></pre></div>
<p d__="">Now my remotes look like this:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb98-1" d__=""><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/linux.git (fetch)</span>
<span id="cb98-2" d__=""><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>origin    git@github.com:beejjorgensen/linux.git (push)</span>
<span id="cb98-3" d__=""><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>reallinux    https://github.com/torvalds/linux.git (fetch)</span>
<span id="cb98-4" d__=""><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>reallinux    https://github.com/torvalds/linux.git (push)</span></code></pre></div>
<blockquote>
<p d__="">Normally when setting up a remote that refers to the source of a forked repo on GitHub, people tend to call that remote <code s__="13">upstream</code>, whereas I’ve clearly called it <code s__="13">reallinux</code>.</p>
<p d__="">I did this because when we subsequently talk about remote 
tracking branches, we’re going to use “upstream” to mean something else,
 and I don’t want the two to be confusing.</p>
<p d__="">Just remember IRL when you set up a remote to point to the forked-from repo, it’s relatively customary to call that remote <code s__="13">upstream</code>.</p>
</blockquote>
<p d__="">Now I can run this to get all the changes from Linus’s repo:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb99-1" d__=""><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>$ git fetch reallinux</span></code></pre></div>
<p d__="">And I can merge it into my branch (the Linux repo uses <code s__="13">master</code> for the <code s__="13">main</code> branch):</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb100-1" d__=""><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>$ git switch master           # My local master</span>
<span id="cb100-2" d__=""><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>$ git merge reallinux/master   # Note the slash notation!</span></code></pre></div>
<p d__="">That will merge the <code s__="13">master</code> branch from the <code s__="13">reallinux</code> into my local master, once we’ve dealt with any conflicts.</p>
<p d__="">At this point if I did a <code s__="13">git log</code>, I’d see that the latest commit would indicate that my <code s__="13">HEAD</code> was attached to my <code s__="13">master</code> branch, and it was pointing to the same commit as the <code s__="13">reallinux/master</code>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb101-1" d__=""><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>(HEAD -&gt; master, reallinux/master)</span></code></pre></div>
<p d__="">This is expected, since I just merged <code s__="13">reallinux/master</code> into my <code s__="13">master</code>, so they definitely should be pointing to the same commit.</p>
<p d__="">But looking farther down, I’d see the <code s__="13">master</code> branch on my origin lagging behind a few commits:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb102-1" d__=""><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>(origin/master, origin/HEAD)</span></code></pre></div>
<blockquote>
<p d__="">You might or might not have <code s__="13">origin/HEAD</code> depending on how you made your repo.</p>
</blockquote>
<p d__="">At this point I’d do a <code s__="13">git push</code> to get them all on the same commit, so the top commit would show:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb103-1" d__=""><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>(HEAD -&gt; master, reallinux/master, origin/master, origin/HEAD)</span></code></pre></div>
<p d__="">And now we’re all happily pointing to the same commit.</p>
<p d__="">It’s interesting that my local <code s__="13">master</code> can be out of sync from the <code s__="13">master</code> on <code s__="13">origin</code>, right?</p>
<p d__="">We’ll look at this in the Remote Tracking Branches chapter.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="10" id="remote-tracking-branches" d__=""><span class="header-section-number">10</span> Remote Tracking Branches</h1>
<p></p>
<p d__="">We’ve seen how to create local branches that you do work on and then merge back into the <code s__="13">main</code> branch, then <code s__="13">git push</code> it up to a remote server.</p>
<p d__="">This part of the guide is going to try to clarify what’s 
actually going on behind the scenes, as well as give us a way to push 
our local branches to a remote for safe keeping.</p>
<h2 data-number="10.1" id="branches-on-remotes" d__=""><span class="header-section-number">10.1</span> Branches on Remotes</h2>
<p d__="">First, some refresher!</p>
<p d__="">Recall that the remote repo you cloned yours from is a complete copy of your repo. The remote repo has a <code s__="13">main</code> branch, and therefore your clone also has a <code s__="13">main</code> branch.</p>
<p d__="">That’s right! When you make a GitHub repo and then clone it, there are <strong>two</strong> <code s__="13">main</code> branches!</p>
<p d__="">How do we differentiate them?</p>
<p d__="">Well, on your local clone, we just refer to branches by their plain name. When we say <code s__="13">main</code> or <code s__="13">topic2</code>, we mean the local branch by that name on our repo.</p>
<p d__="">If we want to talk about a branch on a remote, we have to give
 the remote name along with the branch using that slash notation we’ve 
already seen:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb104-1" d__=""><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>main            # main branch on your local repo</span>
<span id="cb104-2" d__=""><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>origin/main     # main branch on the remote named origin</span>
<span id="cb104-3" d__=""><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>upstream/main   # main branch on the remote named upstream</span>
<span id="cb104-4" d__=""><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>zork/mailbox    # mailbox branch on the remote named zork</span>
<span id="cb104-5" d__=""><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>mailbox         # mailbox branch on your local repo</span></code></pre></div>
<p d__="">Importantly, not only do the words <code s__="13">origin/main</code> refer to the <code s__="13">main</code> branch on <code s__="13">origin</code> in casual conversation, but <em>you actually have a branch on your local repo called <code s__="13">origin/main</code></em>.</p>
<p d__="">This is called a <em>remote-tracking branch</em>. It’s your local copy of the <code s__="13">main</code> branch on the remote. You can’t move your local <code s__="13">origin/main</code> branch directly; Git does it for you as a matter of course when you interact with the remote (e.g.&nbsp;when you pull).</p>
<p d__="">We’re going to call the <code s__="13">main</code> branch on our local machines the <em>local branch</em>, and we’ll call the one on <code s__="13">origin</code> the <em>upstream branch</em>.</p>
<h2 data-number="10.2" id="pushing-to-a-remote" d__=""><span class="header-section-number">10.2</span> Pushing to a Remote</h2>
<p></p>
<p d__="">Fun Fact: when you push or pull, you technically specify the 
remote and the branch you want to use. This is me saying, “Push the 
branch I’m on right now (presumably <code s__="13">main</code>) and merge it into <code s__="13">main</code> on <code s__="13">origin</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb105-1" d__=""><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>$ git push origin main</span></code></pre></div>
<p d__="">“But wait! I haven’t been doing that!”</p>
<p d__="">It turns out there’s an option you can set to make it happen automatically. Let’s say you’re on the <code s__="13">main</code> branch and then run this:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb106-1" d__=""><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>$ git push --set-upstream origin main</span>
<span id="cb106-2" d__=""><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>$ git push -u origin main              # same thing, shorthand</span></code></pre></div>
<p d__="">This will do a couple things: 1) it’ll push changes on your local <code s__="13">main</code> to the remote server, and 2) it’ll remember that the remote branch <code s__="13">origin/main</code> is tracking your local <code s__="13">main</code> branch.</p>
<p d__="">And then, from then on, from the <code s__="13">main</code> branch, you can just:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb107-1" d__=""><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>$ git push</span></code></pre></div>
<p d__="">and it’ll automatically push to <code s__="13">origin/main</code> thanks to your earlier usage of <code s__="13">--set-upstream</code>.</p>
<p d__="">And <code s__="13">git pull</code> has the same option, as well, though you only need to do it once with either push or pull.</p>
<p d__="">“But wait! I’ve never used <code s__="13">--set-upstream</code>, either!”</p>
<p d__="">That’s because by default when you clone a repo, Git automagically sets up a local branch to track the <code s__="13">main</code> branch on the remote.</p>
<blockquote>
<p d__=""><strong>Bonus Info</strong>: Depending on how you made your repo, you might also have a reference to <code s__="13">origin/HEAD</code>. It might be weird to think that there’s a <code s__="13">HEAD</code>
 ref on a remote server that you can see, but in this case it’s just 
referring to the branch that you’ll be checking out by default when you 
clone the repo.</p>
</blockquote>
<p d__="">“OK, so what you’re telling me is that I can just <code s__="13">git push</code> and <code s__="13">git pull</code> like always and just ignore everything you wrote in this section?”</p>
<p d__="">Well… yes. Ish. No.&nbsp;We’re going to make use of this to push other branches to the remote!</p>
<h2 data-number="10.3" id="making-a-branch-and-pushing-to-remote" d__=""><span class="header-section-number">10.3</span> Making a Branch and Pushing to Remote</h2>
<p></p>
<p d__="">I’m going to make a new local branch <code s__="13">topic99</code>:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb108-1" d__=""><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>$ git switch -c topic99</span>
<span id="cb108-2" d__=""><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  Switched to a new branch 'topic99'</span></code></pre></div>
<p d__="">And make some changes:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb109-1" d__=""><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>$ vim README.md        # Create and edit a README</span>
<span id="cb109-2" d__=""><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>$ git add README.md</span>
<span id="cb109-3" d__=""><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>$ git commit -m "Some important additions"</span></code></pre></div>
<p d__="">In our log, we can see where all the branches are:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb110-1" d__=""><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>commit 79ddba75b144bad89e1cbd862e5f3b3409f6c498 (HEAD -&gt; topic99)</span>
<span id="cb110-2" d__=""><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb110-3" d__=""><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>Date:   Fri Feb 16 16:44:50 2024 -0800</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5" d__=""><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>    Some important additions</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7" d__=""><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>commit 3be2ad2c31b627b431af8c8e592c01f4b989d621 (origin/main, main)</span>
<span id="cb110-8" d__=""><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb110-9" d__=""><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>Date:   Fri Feb 16 16:14:13 2024 -0800</span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-11" d__=""><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>    Initial checkin</span></code></pre></div>
<p d__=""><code s__="13">HEAD</code> refers to <code s__="13">topic99</code>, and that’s one commit ahead of <code s__="13">main</code> (local) and <code s__="13">main</code> (upstream on the <code s__="13">origin</code> remote), as far as we know. And we know this because it’s one commit ahead of our remote-tracking branch <code s__="13">origin/main</code>.</p>
<p d__="">Now let’s push!</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb111-1" d__=""><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>$ git push</span>
<span id="cb111-2" d__=""><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  fatal: The current branch topic99 has no upstream branch.</span>
<span id="cb111-3" d__=""><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  To push the current branch and set the remote as upstream, use</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5" d__=""><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>      git push --set-upstream origin topic99</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-7" d__=""><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  To have this happen automatically for branches without a tracking</span>
<span id="cb111-8" d__=""><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  upstream, see 'push.autoSetupRemote' in 'git help config'.</span></code></pre></div>
<p d__="">Ouch. The short of all this is that we said “push”, and Git 
said, “To what? You haven’t associated this branch with anything on the 
remote!”</p>
<p d__="">And we haven’t. There’s no <code s__="13">origin/topic99</code> remote-tracking branch, and certainly no <code s__="13">topic99</code> branch on that remote. Yet.</p>
<p d__="">The fix is easy enough—Git already told us what to do.</p>
<pre><code s__="13" d__="">$ git push --set-upstream origin topic99</code></pre>
<p d__="">And that will do it.</p>
<p></p>
<p d__="">At this point, assuming you’ve pushed to GitHub, you could go 
to your GitHub page for the project, and near the top left you should 
see something that looks like Figure 10.1.</p>
<figure>
<img src="Beej's%20Guide%20to%20Git_files/img_080_010.svg" title="Two branches on GitHub" alt="Two branches on GitHub">
<figcaption aria-hidden="true" s__="14" d__="">Two branches on GitHub</figcaption>
</figure>
<p d__="">If you pull down that <code s__="13">main</code> button, you’ll see <code s__="13">topic99</code> there as well. You can select either branch and view it in the GitHub interface.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="11" id="file-states" d__=""><span class="header-section-number">11</span> File States</h1>
<p></p>
<p d__="">We’ve talked about this quite a bit in passing already.</p>
<p d__="">If you create a new file, you have to <code s__="13">git add</code> it to the stage before you commit.</p>
<p d__="">If you modify a file, you have to <code s__="13">git add</code> it to the stage before you commit.</p>
<p d__="">If you add a file <code s__="13">foo.txt</code> to the stage, you can remove it from the stage before you commit with <code s__="13">git restore --staged foo.txt</code>.</p>
<p d__="">So clearly files can exist in a variety of “states” and we can move them around between those states.</p>
<p d__="">To figure out what state a file is in and get a hint on how to “undo” it from that state, <code s__="13">git status</code> is your best friend (except in the case of renaming, but more on that mess soon).</p>
<h2 data-number="11.1" id="what-states-can-files-in-git-be-in" d__=""><span class="header-section-number">11.1</span> What States Can Files in Git Be In?</h2>
<p d__="">There are four of them: <strong>Untracked</strong>, <strong>Unmodified</strong>, <strong>Modified</strong>, and <strong>Staged</strong>.</p>
<ul>
<li><p d__=""> <strong>Untracked</strong>: Git does not know anything 
about this file (e.g.&nbsp;you just created it in the repo). Git will 
ignore it, but you’ll see it in the status.</p>
<p d__="">You can make Git aware of this file by moving it to Staged State with <code s__="13">git add</code>.</p>
<p d__="">Or you can simply remove the file if you don’t want it to exist, or you can add it to your <code s__="13">.gitignore</code> if you want to leave it in place but still have Git ignore it.</p></li>
<li><p d__=""> <strong>Unmodified</strong>: Git knows about this file and it’s in the repo. But you haven’t made any changes to it since it was last committed.</p>
<p d__="">You can move this file to Modified State by making changes to the file (and saving).</p>
<p d__="">You can remove this file with <code s__="13">git rm</code>, which changes the removed file to the Staged State. (Wait—removing the file puts it on the stage? Yes! More on that later.)</p></li>
<li><p d__=""> <strong>Modified</strong>: Git knows about this file and knows that you’ve changed it. It’s ready for you to stage those changes or to undo them.</p>
<p d__="">You can change the file to Staged State with <code s__="13">git add</code>.</p>
<p d__="">You can change the file to Unmodified State (throwing away your changes) with <code s__="13">git restore</code>.</p></li>
<li><p d__=""> <strong>Staged</strong>: The file is ready to be included in the next commit.</p>
<p d__="">You can change to Unmodified State by making a commit with <code s__="13">git commit</code>.</p>
<p d__="">You can remove the file from the stage and back to Modified State with <code s__="13">git restore --staged</code>.</p></li>
</ul>
<p d__=""> A file typically goes through this process to be added to a repo:</p>
<ol type="1">
<li><p d__="">The user creates a new file and saves it. This file is <strong>Untracked</strong>.</p></li>
<li><p d__="">The user adds the file with <code s__="13">git add</code>. The file is now <strong>Staged</strong>.</p></li>
<li><p d__="">The user commits the file with <code s__="13">git commit</code>. The file is now <strong>Unmodified</strong> and is part of the repo and ready to go.</p></li>
</ol>
<p d__="">After it’s in the repo, the typical file life cycle only differs by the first step:</p>
<ol type="1">
<li><p d__="">The user changes the file and saves it. The file is now <strong>Modified</strong>.</p></li>
<li><p d__="">The user adds the file with <code s__="13">git add</code>. The file is now <strong>Staged</strong>.</p></li>
<li><p d__="">The user commits the file with <code s__="13">git commit</code>. The file is now <strong>Unmodified</strong> and is part of the repo and ready to go.</p></li>
</ol>
<p d__="">Keep in mind that often a commit is a bundle of different 
changes to different files. All those files would be added to the stage 
before the single commit.</p>
<p d__="">Here’s a partial list of ways to change state:</p>
<ul>
<li d__=""><strong>Untracked</strong> → <code s__="13">git add foo.txt</code> → <strong>Staged</strong> (as “new file”)</li>
<li d__=""><strong>Modified</strong> → <code s__="13">git add foo.txt</code> → <strong>Staged</strong></li>
<li d__=""><strong>Modified</strong> → <code s__="13">git restore foo.txt</code> → <strong>Unmodified</strong></li>
<li d__=""><strong>Unmodified</strong> → <code s__="13">edit foo.txt</code> → <strong>Modified</strong> (with your favorite editor)</li>
<li d__=""><strong>Staged</strong> → <code s__="13">git commit</code> → <strong>Unmodified</strong></li>
<li d__=""><strong>Staged</strong> → <code s__="13">git restore --staged</code> → <strong>Modified</strong></li>
</ul>
<p d__="">Again, <code s__="13">git status</code> will often give you advice of how to undo a state change.</p>
<h2 data-number="11.2" id="unmodified-to-untracked" d__=""><span class="header-section-number">11.2</span> Unmodified to Untracked</h2>
<p></p>
<p d__="">A variation of <code s__="13">git rm</code> tells Git to 
remove the file from the repo but leave it intact in the working tree. 
Maybe you want to keep the file around but don’t want Git to track it 
any longer.</p>
<p d__="">To make this happen, you use the <code s__="13">--cached</code> switch.</p>
<p d__="">Here’s an example where we remove the file <code s__="13">foo.txt</code> from the repo but keep it around in our working tree:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb113-1" d__=""><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>$ ls</span>
<span id="cb113-2" d__=""><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  foo.txt</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4" d__=""><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>$ git rm --cached foo.txt</span>
<span id="cb113-5" d__=""><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  rm 'foo.txt'</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-7" d__=""><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb113-8" d__=""><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb113-9" d__=""><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb113-10" d__=""><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb113-11" d__=""><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>      deleted:    foo.txt</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13" d__=""><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>  Untracked files:</span>
<span id="cb113-14" d__=""><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to include in what will be committed)</span>
<span id="cb113-15" d__=""><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>      foo.txt</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-17" d__=""><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>$ ls</span>
<span id="cb113-18" d__=""><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>  foo.txt</span></code></pre></div>
<p d__="">There you see in the <code s__="13">status</code> output that 
Git has staged the file for deletion, but it’s also mentioning that the 
file exists and is untracked. And a subsequent <code s__="13">ls</code> shows that the file still exists.</p>
<p d__="">At this point, you can commit and the file would then be in Untracked state.</p>
<h2 data-number="11.3" id="files-in-multiple-states" d__=""><span class="header-section-number">11.3</span> Files In Multiple States</h2>
<p d__="">A file can actually sort of exist in multiple states at once. 
For instance, you might have one version of a file on the stage, and 
another version of that file, with different modifications, in your 
working tree <em>at the same time</em>. Technically these are actually different files since they don’t contain the same data.</p>
<p d__="">Just remember that when you stage a file, it effectively stages a <strong>copy</strong>
 of that file as it exists right then. There is nothing stopping you 
from making another modification to the file in the working tree and 
ending up like this:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb114-1" d__=""><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb114-2" d__=""><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb114-3" d__=""><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb114-4" d__=""><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb114-5" d__=""><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7" d__=""><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb114-8" d__=""><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb114-9" d__=""><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working</span>
<span id="cb114-10" d__=""><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb114-11" d__=""><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">You can overwrite the version on the stage by adding it again. And various incantations of <code s__="13">restore</code> can change the files in different ways. Look up the <code s__="13">--staged</code> and <code s__="13">--worktree</code> options for <code s__="13">git restore</code>.</p>
<p d__="">I’ll leave how to move files around in these simultaneous 
states as an exercise to the reader, but I wanted you to at least be 
aware of it.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="12" id="comparing-files-with-diff" d__=""><span class="header-section-number">12</span> Comparing Files with Diff</h1>
<p d__="">The powerful <code s__="13">git diff</code> command can give 
you differences between two files or commits. We mentioned it briefly at
 the beginning, but here we’re going to delve more deeply into all the 
things you can do with it.</p>
<p d__="">It’s not the easiest thing to read at first, but you do get 
used to it after a while. My most common use case is to quickly scan to 
remember what I’ve changed in the working tree so I know what to add to 
the stage and what commit message to use.</p>
<h2 data-number="12.1" id="basic-usage" d__=""><span class="header-section-number">12.1</span> Basic Usage</h2>
<p d__="">The most basic use case is that you’ve modified some files in 
your working tree and you want to see what the differences are between 
what was there and what you added.</p>
<p d__="">For example, let’s say I’ve modified my <code s__="13">hello.py</code> file (but haven’t staged it yet). I can check out what I’ve changed like so:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb115-1" d__=""><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>$ git diff</span>
<span id="cb115-2" d__=""><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/hello.py b/hello.py</span>
<span id="cb115-3" d__=""><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  index 4a8f53f..8ee1fe4 100644</span>
<span id="cb115-4" d__=""><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  --- a/hello.py</span>
<span id="cb115-5" d__=""><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  +++ b/hello.py</span>
<span id="cb115-6" d__=""><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  @@ -1,4 +1,8 @@</span>
<span id="cb115-7" d__=""><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>   def hello():</span>
<span id="cb115-8" d__=""><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>  -    print("Hello, world!")</span>
<span id="cb115-9" d__=""><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>  +    print("HELLO, WORLD!")</span>
<span id="cb115-10" d__=""><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>  +</span>
<span id="cb115-11" d__=""><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>  +def goodbye():</span>
<span id="cb115-12" d__=""><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>  +    print("See ya!")</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-14" d__=""><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>   hello()</span>
<span id="cb115-15" d__=""><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>  +goodbye()</span></code></pre></div>
<p d__="">What do we have there? Why, it’s an impenetrable mess, of course!</p>
<p><em d__="">The End</em></p>
<p d__="">All right, take a deep breath and let’s figure it out.</p>
<p d__="">Since the output is plastered over with <code s__="13">hello.py</code>,
 we can safely assume this is the file we’re talking about. If the diff 
is reporting on multiple files (e.g.&nbsp;you’re comparing two commits),
 each file will have its own section in the output.</p>
<blockquote>
<p d__=""><strong>The <code s__="13">index</code> line has the blob hashes and file permissions.</strong>
 A blob hash is the hash of the specific file in the states being 
compared. This isn’t something you need to worry about, typically. Or 
maybe not even ever.</p>
</blockquote>
<p d__="">After that we have a couple lines indicating that the old version of the file <code s__="13">a/hello.py</code> is the one marked with minus signs, and the new version (that you haven’t staged yet) is <code s__="13">b/hello.py</code> and is marked with plus signs.</p>
<p d__="">Then we have <code s__="13">@@ -1,4 +1,8 @@</code>. This means
 that lines 1-4 in the old version are shown, and lines 1-8 in the new 
version are shown. (So clearly we’ve at least added some lines here.)</p>
<p d__="">Finally, we get to the steak and potatoes of the whole 
thing—what has actually changed? Remembering that the old version is 
minus and the new version is plus, let’s look at just that part of the 
diff again:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb116-1" d__=""><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>   def hello():</span>
<span id="cb116-2" d__=""><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  -    print("Hello, world!")</span>
<span id="cb116-3" d__=""><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  +    print("HELLO, WORLD!")</span>
<span id="cb116-4" d__=""><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  +</span>
<span id="cb116-5" d__=""><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  +def goodbye():</span>
<span id="cb116-6" d__=""><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  +    print("See ya!")</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-8" d__=""><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>   hello()</span>
<span id="cb116-9" d__=""><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>  +goodbye()</span></code></pre></div>
<p d__="">Rules:</p>
<ul>
<li><p d__="">If a line is prefixed with <code s__="13">-</code>, it means this is how the line was in the old version.</p></li>
<li><p d__="">If a line is prefixed with <code s__="13">+</code>, it means this is how the line is in the new, modified version.</p></li>
<li><p d__="">If a line is not prefixed with anything, it means it is unchanged between the versions.</p></li>
</ul>
<blockquote>
<p d__=""><strong>The diff won’t show you all the lines of the file!</strong>
 It only shows you what’s changed and some of the surrounding lines. If 
there are changes in different parts of the file, the unchanged parts of
 the file will be skipped over in the diff.</p>
</blockquote>
<p d__="">Another way to read the diff is that lines with a <code s__="13">-</code> have been removed and lines with a <code s__="13">+</code> have been added.</p>
<h2 data-number="12.2" id="diffing-the-stage" d__=""><span class="header-section-number">12.2</span> Diffing the Stage</h2>
<p d__="">What if you’ve added some stuff to the stage and you want to diff it against the previous commit?</p>
<p d__="">Just typing <code s__="13">git diff</code> shows nothing!</p>
<p d__="">Why?</p>
<p d__="">The answer is really easy: <code s__="13">git diff --staged</code><a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup s__="13" d__="">17</sup></a>. Done.</p>
<p d__="">But I want to use this subsection to dig a little deeper into 
what’s happening so you can improve your understanding of how this 
works.</p>
<p d__="">A good mental model here is to imagine that the stage <strong>must</strong> have one of two things on it at all time, either of these:</p>
<ol type="1">
<li d__="">A copy of a file from the last commit. If this is the case, <code s__="13">git status</code> will not show the file on the stage.</li>
<li d__="">A copy of a file from the working tree, something modified from the last commit. In this case <code s__="13">git status</code> <strong>will</strong> show something on the stage.</li>
</ol>
<p d__="">So in this mental model, <em>something</em> is always on the 
stage. It’s just that you don’t see it unless it’s something different 
than the last commit that you put there with <code s__="13">git add</code>.</p>
<p d__="">OK? I know I’m asking you to just bear with me on faith, so thank you for that.</p>
<p d__="">Back to the question: if you have added some modified files to the stage, why does <code s__="13">git diff</code> show nothing is changed?</p>
<p d__=""><em>It’s because <code s__="13">git diff</code> <strong>always</strong> compares the working tree to the stage.</em>
 (Unless you’re diffing specific commits—see below.) And in this case, 
after you’ve added your modified file to the stage, it’s the same as the
 working tree. So no diffs.</p>
<p d__="">Contrast this to where you’ve modified the working tree but <em>haven’t</em>
 added the file to the stage. In this case, the file on the stage is 
just like the last commit, which is different than your working tree. So
 <code s__="13">git diff</code> shows the differences.</p>
<p d__="">Got it?</p>
<p d__="">Well, okay, then… what if you <em>want</em> to diff what’s on 
the stage with the last commit? That is, instead of diffing the working 
tree with the stage, you want to diff the stage with the <code s__="13">HEAD</code>?</p>
<p d__="">Back to the punchline:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb117-1" d__=""><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>$ git diff --staged</span></code></pre></div>
<p d__="">And that’ll do it.</p>
<h2 data-number="12.3" id="more-diff-fun" d__=""><span class="header-section-number">12.3</span> More Diff Fun</h2>
<p d__="">Let’s speed through some examples of things you can do with diff.</p>
<h3 data-number="12.3.1" id="diff-any-commits-or-branches" d__=""><span class="header-section-number">12.3.1</span> Diff Any Commits or Branches</h3>
<p d__="">You have more at your disposal than just diffing the working 
tree or stage. You can actually diff any two commits. This will show you
 all the differences between them.</p>
<p d__="">For example, if you know the commit hashes, you can diff them directly:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb118-1" d__=""><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>$ git diff d977 27a3</span></code></pre></div>
<p d__="">Or if you have two branch names:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb119-1" d__=""><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>$ git diff main topic</span></code></pre></div>
<p d__="">Or mix and match:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb120-1" d__=""><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>$ git diff main 27a3</span></code></pre></div>
<p d__="">Or use <code s__="13">HEAD</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb121-1" d__=""><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD 27a3</span></code></pre></div>
<p d__="">Or relative <code s__="13">HEAD</code>:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb122-1" d__=""><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD~3 HEAD~4</span></code></pre></div>
<p d__="">That last one diffs three commits before <code s__="13">HEAD</code> with four commits before <code s__="13">HEAD</code>.</p>
<h3 data-number="12.3.2" id="diffing-with-parent-commit" d__=""><span class="header-section-number">12.3.2</span> Diffing with Parent Commit</h3>
<p d__="">We just showed this example:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb123-1" d__=""><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD~3 HEAD~4</span></code></pre></div>
<p d__="">But since <code s__="13">HEAD~4</code> is the parent of <code s__="13">HEAD~3</code>, is there some shorthand we can use here? Yes!</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb124-1" d__=""><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD~3 HEAD~4</span>
<span id="cb124-2" d__=""><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD~3^!          # Same thing!</span></code></pre></div>
<p d__="">You can use it anywhere you want to compare a commit with its 
parent, which is really showing just what changes were in that one 
particular commit.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb125-1" d__=""><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD^!</span>
<span id="cb125-2" d__=""><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>$ git diff HEAD~3^!</span>
<span id="cb125-3" d__=""><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>$ git diff main^!</span>
<span id="cb125-4" d__=""><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>$ git diff 27a3^!</span></code></pre></div>
<h3 data-number="12.3.3" id="more-context" d__=""><span class="header-section-number">12.3.3</span> More Context</h3>
<p d__="">By default, <code s__="13">git diff</code> shows 3 lines of context around the changes. If you want to see more, like 5 lines, use the <code s__="13">-U</code> switch.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb126-1" d__=""><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>$ git diff -U5</span></code></pre></div>
<h3 data-number="12.3.4" id="just-the-file-names" d__=""><span class="header-section-number">12.3.4</span> Just the File Names</h3>
<p d__="">If you just want a list of files that have changed, you can use the <code s__="13">--name-only</code> option.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb127-1" d__=""><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>$ git diff --name-only</span></code></pre></div>
<h3 data-number="12.3.5" id="ignoring-whitespace" d__=""><span class="header-section-number">12.3.5</span> Ignoring Whitespace</h3>
<p d__="">There might be a time when you get some tabs/spaces confusion 
in your source code, which is always painful. Protip: stick to one and 
force everyone else on the team to do the same under penalty of paying 
for lunch.</p>
<p d__="">But you can commit <code s__="13">git diff</code> to ignore whitespace in the comparison:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb128-1" d__=""><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>$ git diff -w</span>
<span id="cb128-2" d__=""><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>$ git diff --ignore-all-space    # Same thing</span></code></pre></div>
<h3 data-number="12.3.6" id="just-certain-files" d__=""><span class="header-section-number">12.3.6</span> Just Certain Files</h3>
<p d__="">You can just diff certain files.</p>
<p d__="">One way is to just put the file names after a <code s__="13">--</code>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb129-1" d__=""><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>$ git diff -- hello.py</span>
<span id="cb129-2" d__=""><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>$ git diff -- hello.py another_file.py</span></code></pre></div>
<p d__="">You can also specify commits or branches before the <code s__="13">--</code>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb130-1" d__=""><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>$ git diff somebranch -- hello.py</span></code></pre></div>
<p d__="">That’ll compare <code s__="13">hello.py</code> at <code s__="13">HEAD</code> with the version on <code s__="13">somebranch</code>.</p>
<p d__="">Or you could give two commits or branches to compare the file there:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb131-1" d__=""><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>$ git diff main somebranch -- hello.py</span></code></pre></div>
<p d__="">Finally, you can restrict to a file extension using a glob and single quotes:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb132-1" d__=""><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>$ git diff '*.py'</span></code></pre></div>
<p d__="">That will just diff the Python files.</p>
<h3 data-number="12.3.7" id="inter-branch-diffs" d__=""><span class="header-section-number">12.3.7</span> Inter-branch Diffs</h3>
<p d__="">This is an interesting version of comparing two branches.</p>
<p d__="">We already showed the following example for comparing the commits at two branches:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb133-1" d__=""><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>$ git diff branch1 branch2</span></code></pre></div>
<p d__="">But sometimes you want to know what changed in a branch <em>since the branches diverged</em>.</p>
<p d__="">That is, you don’t want to know what’s different <em>now</em> between <code s__="13">branch1</code> and <code s__="13">branch2</code>, which is what the above would give you.</p>
<p d__="">You want to know what <code s__="13">branch2</code> added or deleted that <code s__="13">branch1</code> did not.</p>
<p d__="">In order to see this, you can use this notation:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb134-1" d__=""><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>$ git diff branch1...branch2</span></code></pre></div>
<p d__="">This means “diff the common ancestor of <code s__="13">branch1</code> and <code s__="13">branch2</code> with <code s__="13">branch2</code>.”</p>
<p d__="">In other words, tell me all the changes that were made in <code s__="13">branch2</code> that <code s__="13">branch1</code> is unaware of. Don’t show me anything that <code s__="13">branch1</code> has changed since they diverged.</p>
<h2 data-number="12.4" id="difftool" d__=""><span class="header-section-number">12.4</span> Difftool</h2>
<p d__="">I know the diff output is tough to read. I recommend practice 
and offer myself as living proof that with enough practice, the output 
becomes penetrable. And eventually it even becomes easy to read, which 
might be difficult to imagine. But it does!</p>
<p d__="">That said, there are third-party tools that exist to make 
diffs more manageable, and Git supports these tools. You can read more 
about it in the <a href="#difftool" d__="">diff tool</a> chapter.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="13" id="renaming-and-removing-files" d__=""><span class="header-section-number">13</span> Renaming and Removing Files</h1>
<p d__="">This is an extension of dealing with file states, so make sure you read that chapter first!</p>
<h2 data-number="13.1" id="renaming-files" d__=""><span class="header-section-number">13.1</span> Renaming Files</h2>
<p></p>
<p d__="">You can use the OS rename command to rename files, but if they’re in a Git repo, it’s better to <code s__="13">git mv</code> them so that Git has total awareness.</p>
<p d__="">Git is confusingly unhelpful with this.</p>
<p d__="">Let’s rename <code s__="13">foo.txt</code> to <code s__="13">bar.txt</code> and get a status:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb135-1" d__=""><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>$ git mv foo.txt bar.txt</span>
<span id="cb135-2" d__=""><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb135-3" d__=""><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb135-4" d__=""><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb135-5" d__=""><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>      renamed:    foo.txt -&gt; bar.txt</span></code></pre></div>
<p d__="">So it knows the file is renamed, and the file has been moved to the stage. Like so:</p>
<ul>
<li d__=""><strong>Unmodified</strong> → <code s__="13">git mv foo.txt bar.txt</code> → <strong>Staged</strong> (as “renamed”)</li>
</ul>
<p d__="">And if we look, we see the file has actually been renamed in the directory to <code s__="13">bar.txt</code>, as well.</p>
<p d__="">If we make a commit at this point, the file will be renamed in the repo. Done.</p>
<p d__="">But what if we want to undo the rename?</p>
<p d__="">Git suggests <code s__="13">git restore --staged</code> to the rescue… But which file name to use, the old one or new one? And then what? It turns out that while you <em>can</em> use <code s__="13">git restore</code> to undo this by following it with multiple other commands, you should, in this case, ignore Git’s advice.</p>
<p d__=""> Just remember this part: <strong>the easiest way to undo a Staged rename is to just do the reverse rename</strong>.</p>
<p d__="">Let’s say we renamed and got here:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb136-1" d__=""><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>$ git mv foo.txt bar.txt    # Rename foo.txt to bar.txt</span>
<span id="cb136-2" d__=""><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb136-3" d__=""><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb136-4" d__=""><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb136-5" d__=""><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb136-6" d__=""><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>      renamed:    foo.txt -&gt; bar.txt</span></code></pre></div>
<p d__="">This easiest way to revert this change is to do this:</p>
<pre><code s__="13" d__="">$ git mv bar.txt foo.txt    # Rename it back to foo.txt
$ git status
  On branch main
  nothing to commit, working tree clean</code></pre>
<p d__="">And there you go.</p>
<p d__="">In summary, the way to rename a file is:</p>
<ul>
<li d__=""><strong>Unmodified</strong> → <code s__="13">git mv foo.txt bar.txt</code> → <strong>Staged</strong></li>
<li d__=""><strong>Staged</strong> → <code s__="13">git commit</code> → <strong>Unmodified</strong></li>
</ul>
<p d__="">And the way to back out of a Staged rename is to rename them back the way they were:</p>
<ul>
<li d__=""><strong>Staged</strong> → <code s__="13">git mv bar.txt foo.txt</code> → <strong>Unmodified</strong></li>
</ul>
<h2 data-number="13.2" id="removing-files" d__=""><span class="header-section-number">13.2</span> Removing Files</h2>
<p></p>
<p d__="">You can use the OS remove command to remove files, but if they’re in a git repo, it’s better to <code s__="13">git rm</code> them so that Git has total awareness.</p>
<p d__="">And what happens might seem a little strange.</p>
<p d__="">Let’s say we have a file <code s__="13">foo.txt</code> that has already been committed. But we decide to remove it.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb138-1" d__=""><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>$ git rm foo.txt</span>
<span id="cb138-2" d__=""><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  rm 'foo.txt'         # This is Git's output</span></code></pre></div>
<p d__="">This actually removes the file—if you look in the directory, it’s gone.</p>
<p d__="">But let’s check the status:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb139-1" d__=""><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb139-2" d__=""><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb139-3" d__=""><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb139-4" d__=""><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb139-5" d__=""><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>      deleted:    foo.txt</span></code></pre></div>
<p d__="">So the now-deleted file is in Staged State, as it were.</p>
<p d__="">If we do a commit here, the file is deleted. Done.</p>
<p d__="">But what if we want to undo the staging of the now-deleted file? There’s a hint for how to get it back with <code s__="13">git restore --staged</code>, as per usual.</p>
<p d__="">Let’s try it:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb140-1" d__=""><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>$ git restore --staged foo.txt</span>
<span id="cb140-2" d__=""><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb140-3" d__=""><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb140-4" d__=""><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb140-5" d__=""><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    (use "git add/rm &lt;file&gt;..." to update what will be committed)</span>
<span id="cb140-6" d__=""><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working</span>
<span id="cb140-7" d__=""><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb140-8" d__=""><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>      deleted:    foo.txt</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-10" d__=""><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">Hmmm. “Changes not staged for commit” are files in Modified State. This means that <code s__="13">foo.txt</code> has been “modified”, which is, in this context, a friendlier way of saying “deleted”.</p>
<p d__="">So we’ve backed up from Staged State to Modified State. But looking around, the file is still gone! I want my file back!</p>
<p d__="">We want to move it back to Unmodified State, which Git once again hints how to do in the status: <code s__="13">git restore</code>. Let’s try:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb141-1" d__=""><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>$ git restore foo.txt</span>
<span id="cb141-2" d__=""><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb141-3" d__=""><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb141-4" d__=""><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span></code></pre></div>
<p d__="">Git’s telling us there are no Modified files here. Let’s look and see:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb142-1" d__=""><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>$ ls foo.txt</span>
<span id="cb142-2" d__=""><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  foo.txt</span></code></pre></div>
<p d__="">There it is, back safe and sound.</p>
<p d__="">So the process for deleting a committed file is a variant of what we’ve already seen:</p>
<ul>
<li d__=""><strong>Unmodified</strong> → <code s__="13">git rm foo.txt</code> → <strong>Staged</strong></li>
<li d__=""><strong>Staged</strong> → <code s__="13">git commit</code> → The file is now gone</li>
</ul>
<p d__="">And you can undo a deleted file (as long as the delete hasn’t 
yet been committed) in the same way you can undo any other file states:</p>
<ul>
<li d__=""><strong>Staged</strong> → <code s__="13">git restore --staged foo.txt</code> → <strong>Modified</strong></li>
<li d__=""><strong>Modified</strong> → <code s__="13">git restore foo.txt</code> → <strong>Unmodified</strong></li>
</ul>
<p d__="">Later we’ll talk about ways to recover a deleted file from an 
earlier commit. But one way you already know: check out the earlier 
commit where the file exists, copy the file into a new Untracked file, 
checkout the branch where the file will be restored to, rename the 
Untracked file to the name of the restored file, then add it and commit.</p>
<blockquote>
<p d__=""><strong>Note</strong>: Just because you remove a file and push
 your changes doesn’t mean the file is permanently gone. It’s still in 
the repo, part of whatever commits it was previously seen with.</p>
<p d__="">If you accidentally commit something that should be secret, 
you should consider that secret compromised and change it where it is 
used. It will be visible to anyone who clones the repo and sees that 
commit.</p>
<p d__="">There are ways around this if you haven’t yet pushed, but that’s beyond the scope of this guide.</p>
</blockquote>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="14" id="collaboration-across-branches" d__=""><span class="header-section-number">14</span> Collaboration across Branches</h1>
<p></p>
<p d__="">Let’s say you’re on a team of coders and you all have access 
to the same GitHub repo. (One person on the team owns the repo, and 
they’ve <a href="https://docs.github.com/en/enterprise-server@3.9/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-access-to-your-personal-repositories/inviting-collaborators-to-a-personal-repository" d__="">added you all as collaborators</a><a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup s__="13" d__="">18</sup></a>.)</p>
<blockquote>
<p d__="">I’m going to use the term <em>collaborator</em> to mean “someone to whom you have granted write access to your repo”.</p>
</blockquote>
<p d__="">How can you all structure your work so that you’re minimizing conflicts?</p>
<p d__="">There are a number of ways to do this.</p>
<ul>
<li d__="">Everyone is a collaborator on the repo, and:
<ul>
<li>Everyone uses the same branch, probably <code s__="13">main</code>, or</li>
<li>Everyone uses their own remote tracking branch and periodically merges with the main branch, or</li>
<li>Everyone uses their own remote tracking branch and periodically 
merges with a development branch, which itself is periodically merged 
into <code s__="13">main</code> for each official release.</li>
</ul></li>
<li d__="">Or everyone has their own repo (and are not collaborators on the same repo), and:
<ul>
<li>Everyone uses <em>pull requests</em> or other synchronization methods to get their repos merged into the other devs’.</li>
</ul></li>
</ul>
<p d__="">We’ll look at the first few ways in this chapter, but we’ll save pull requests for later.</p>
<p d__="">There’s no one-size-fits-all approach to teamwork with Git, 
and the methods outlined below can be mixed and matched with local topic
 branches, or people having multiple remote tracking branches, or 
whatever. Often management will have an approach they want to use for 
collaboration which might be one of the ones in this section, or maybe 
it’s a variant, or maybe its something completely different.</p>
<p d__="">In any case, the best strategy for you, the learner, is to 
just be familiar with the tools (branching, merging, conflict 
resolution, pushing, pulling, remote tracking branches) and use them for
 effect where it makes the most sense.</p>
<p d__="">And when you’re first starting out, your intuition about 
“where it makes the most sense” might not be dead-on, but it probably 
won’t be lethal and you’ll figure it out in the school of hard knocks.</p>
<blockquote>
<p d__="">“Oh great. Another f—ing learning experience.”<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;—Actual quote from my mother</p>
</blockquote>
<h2 data-number="14.1" id="communication-and-delegation" d__=""><span class="header-section-number">14.1</span> Communication and Delegation</h2>
<p></p>
<p d__="">Git can’t save you from poor communication. The only way to 
minimize conflicts in a shared project is to communicate with your team 
and clearly assign different tasks to people in a non-conflicting way.</p>
<p d__="">Two people shouldn’t generally be editing the same part of the
 same file, or even any part of the same file. That’s more of a 
guideline than a rule, but if you follow it, you will never have a merge
 conflict.</p>
<p d__="">As we’ve seen, it’s not the end of the world if there is a merge conflict, but life sure is easier if they’re just avoided.</p>
<p d__="">Takeaway: Without good communication and a good distribution 
of work on your team, you’re doomed. Make a plan where no one is 
stepping on toes, and stick to it.</p>
<h2 data-number="14.2" id="approach-everyone-uses-one-branch" d__=""><span class="header-section-number">14.2</span> Approach: Everyone Uses One Branch</h2>
<p></p>
<p d__="">This is really easy. Everyone has push access to the repo and does all their work on the <code s__="13">main</code> branch.</p>
<p d__="">Benefits:</p>
<ul>
<li d__="">Super simple to set up.</li>
<li d__="">Conceptually not much to juggle.</li>
<li d__="">All work instantly available to all collaborators upon push.</li>
</ul>
<p d__="">Drawbacks:</p>
<ul>
<li d__="">More potential for merge conflicts.</li>
<li d__="">Unless you’re rebasing (more on that later), you’ll have a lot of merge commits.</li>
<li d__="">You can’t push non-working code since it will break everything for everyone else.</li>
</ul>
<p d__="">Initial setup:</p>
<ul>
<li d__="">One person makes the GitHub repo.</li>
<li d__="">The owner of the GitHub repo adds all the team members as collaborators.</li>
<li d__="">Everyone clones the repo.</li>
</ul>
<p d__="">Workflow:</p>
<ul>
<li d__="">Work is delegated to all collaborators. The work should be as non-overlapping as possible.</li>
<li d__="">Everyone periodically pulls <code s__="13">main</code> and resolves any merge conflicts.</li>
<li d__="">Everyone pushes their work to <code s__="13">main</code>.</li>
</ul>
<p d__="">In real life, this approach is probably only used on very 
small teams, e.g.&nbsp;three people at most, with frequent and easy 
communication between all members. If you’re working on a small team in 
school, it could very well be enough, but I’d still recommend trying a 
different approach just for the experience.</p>
<p d__="">The other approaches are not that much more complex, and give you a lot more flexibility.</p>
<h2 data-number="14.3" id="approach-everyone-uses-their-own-branch" d__=""><span class="header-section-number">14.3</span> Approach: Everyone Uses Their Own Branch</h2>
<p></p>
<p d__="">In this scenario, we treat <code s__="13">main</code> as the 
working code, and we treat contributors’ branches as where work is done.
 When a contributor gets their code working, they merge it back into <code s__="13">main</code>.</p>
<p d__="">Benefits:</p>
<ul>
<li d__="">You get to work on your own branch without worrying about messing up other people’s work.</li>
<li d__="">You can commit non-working code since no one else can see it.
 (You might be wrapping up the work day and want to push some incomplete
 code for a backup, for example.)</li>
<li d__="">Less merge conflict potential since fewer merges are happening than if everyone were committing to <code s__="13">main</code>.</li>
</ul>
<p d__="">Drawbacks:</p>
<ul>
<li d__="">If your branch diverges too far from <code s__="13">main</code>, merging might become painful.</li>
<li d__="">Unless you’re rebasing, the incremental work on your branch might “pollute” the commit history on <code s__="13">main</code> with a lot of tiny commits.</li>
</ul>
<p d__="">Initial setup:</p>
<ul>
<li d__="">One person makes the GitHub repo.</li>
<li d__="">The owner of the GitHub repo adds all the team members as collaborators.</li>
<li d__="">Everyone clones the repo.</li>
<li d__="">Everyone makes their own branch, possibly naming it after themselves.</li>
<li d__="">Everyone pushes their branch to GitHub, making them 
remote-tracking branches. (We do this so that your work is effectively 
backed up on GitHub when you push it.)</li>
</ul>
<p d__="">Workflow:</p>
<ul>
<li d__="">Work is delegated to all collaborators. The work should be as non-overlapping as possible.</li>
<li d__="">As collaborators finish their tasks, they will:
<ul>
<li>Test everything on their branch.</li>
<li>Merge the latest <code s__="13">main</code> into their branch; do a pull to make sure you have it. (The collaborator might already have the latest <code s__="13">main</code> if no one else has merged into it, which will cause Git to say there’s nothing to do. This is fine.)</li>
<li>Test everything, and fix it if necessary.</li>
<li>Merge their functioning branch into <code s__="13">main</code>.</li>
<li>Push.
<ul>
<li>If someone else has modified <code s__="13">main</code> while you 
were testing, Git will complain that you have to pull before you can 
push. If there’s a conflict at this point, you’ll have to resolve, test,
 and push it. And you’ll have to merge <code s__="13">main</code> back into your branch so that your branch is up-to-date.</li>
</ul></li>
</ul></li>
</ul>
<p d__="">The result will look something like Figure 14.1 to start, where all the collaborators have made their own branches off of <code s__="13">main</code>.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_100_010.svg" title="[Collaborators branching off main.]">
<figcaption aria-hidden="true" s__="14" d__="">Collaborators branching off <code s__="13">main</code>.</figcaption>
</figure>
<!--
``` {.default}
             +
            /+
           / #\
          /  + \
         /  /#  \
        /  / #   \
       /  /  #M  |c
      /  /   #A  |h
     /  b|   #I  |r
    a|  o|   #N  |i
    l|  b|   #   |s
    i|   |   #   |
    c|   |   #   |
    e|   |   #   |
     |   |   #   |
     :   :   :   :
```
-->
<p d__="">Let’s say Chris (on branch <code s__="13">chris</code>) finishes up their work and wants other contributors to be able to see it. It’s time to merge into <code s__="13">main</code>, as we graphically see in Figure 14.2.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_100_020.svg" title="[Chris merges back into main.]">
<figcaption aria-hidden="true" s__="14" d__="">Chris merges back into <code s__="13">main</code>.</figcaption>
</figure>
<!--
``` {.default}
     |  b|   #   |
    a|  o|   #   |c
    l|  b|   #   |h
    i|   |   #   |r
    c|   |   #M  |i
    e|   |   #A  |s
     |   |   #I  |
     |   |   #N  /
     |   |   #  /
     |   |   # /
     |   |   #/
     |   |   +
```
-->
<p d__="">After that, other contributors looking at <code s__="13">main</code> will see the changes.</p>
<h2 data-number="14.4" id="approach-everyone-merges-to-the-dev-branch" d__=""><span class="header-section-number">14.4</span> Approach: Everyone Merges to the Dev Branch</h2>
<p></p>
<p d__="">In this scenario, we treat <code s__="13">main</code> as the published code that we’re going to distribute, often tagged with a release version number, and we treat a <code s__="13">dev</code>
 branch as the working, unreleased code. And, as in the previous 
scenario, everyone has their own branches they’re developing on.</p>
<p d__="">The idea is basically we’re going to have two versions of the working code:</p>
<ol type="1">
<li d__="">The public, released version that’s on <code s__="13">main</code>.</li>
<li d__="">The private, internal version that’s on <code s__="13">dev</code>.</li>
</ol>
<p d__="">And then, of course, we’ll have one branch per collaborator.</p>
<p d__="">Another way of thinking about it is that we’re going to have our internal build on <code s__="13">dev</code> that is good for testing and then, when it’s all ready, we’ll “bless” it and merge it into <code s__="13">main</code>.</p>
<p d__="">So there will be a lot of merges into <code s__="13">dev</code> from all the developer branches, and then every so often there will be a merge from <code s__="13">dev</code> into <code s__="13">main</code>.</p>
<p d__=""><em>The developers will never directly merge into <code s__="13">main</code>!</em> Usually that is performed by someone in a managerial role.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_100_030.svg" title="[Working on the dev branch]">
<figcaption aria-hidden="true" s__="14" d__="">Working on the <code s__="13">dev</code> branch.</figcaption>
</figure>
<p d__="">Overall the process works as in Figure 14.3. This is a busy 
image, but notice how Bob and Alice are only merging their work into the
 <code s__="13">dev</code> branch, and then every so often, their manager merges the <code s__="13">dev</code> branch into <code s__="13">main</code> and tags that commit with a release number. (More on tagging later.)</p>
<p d__="">Benefits:</p>
<ul>
<li d__="">All the benefits of everyone having their own branch.</li>
<li d__="">You have an internal branch from which you can make complete builds for internal or external testing.</li>
</ul>
<p d__="">Drawbacks:</p>
<ul>
<li d__="">A little more complexity and management.</li>
<li d__="">If your branch diverges too far from <code s__="13">dev</code>, merging might become painful.</li>
<li d__="">Unless you’re rebasing, the incremental work on your branch might “pollute” the commit history on <code s__="13">dev</code> with a lot of tiny commits.</li>
</ul>
<p d__="">Initial setup:</p>
<ul>
<li d__="">One person makes the GitHub repo.</li>
<li d__="">The owner of the GitHub repo adds all the team members as collaborators.</li>
<li d__="">The owner creates the <code s__="13">dev</code> branch.</li>
<li d__="">Everyone clones the repo.</li>
<li d__="">Everyone makes their own branch, possibly naming it after themselves.</li>
<li d__="">Everyone pushes their branch to GitHub, making them 
remote-tracking branches. (We do this so that your work is effectively 
backed up on GitHub when you push it.)</li>
</ul>
<p d__="">Workflow:</p>
<ul>
<li d__="">Work is delegated to all collaborators. The work should be as non-overlapping as possible.</li>
<li d__="">As collaborators finish their tasks, they will:
<ul>
<li>Test everything on their branch.</li>
<li>Merge the latest <code s__="13">dev</code> into their branch; do a pull to make sure you have it. (The collaborator might already have the latest <code s__="13">dev</code> if no one else has merged into it, which will cause Git to say there’s nothing to do. This is fine.)</li>
<li>Test everything, and fix it if necessary.</li>
<li>Merge their functioning branch into <code s__="13">dev</code>.</li>
<li>Push.
<ul>
<li>If someone else has modified <code s__="13">dev</code> while you 
were testing, Git will complain that you have to pull before you can 
push. If there’s a conflict at this point, you’ll have to resolve, test,
 and push it. And you’ll have to merge <code s__="13">dev</code> back into your branch so that your branch is up-to-date.</li>
</ul></li>
</ul></li>
</ul>
<p d__="">Managerial Workflow:</p>
<ul>
<li d__="">Coordinate with all devs to get a candidate release in <code s__="13">dev</code> tested out and ready.</li>
<li d__="">Merge that candidate release (some commit) from <code s__="13">dev</code> into <code s__="13">main</code>.</li>
<li d__="">Tag the <code s__="13">main</code> commit with some version number, optionally.</li>
</ul>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="15" id="rebasing-moving-commits" d__=""><span class="header-section-number">15</span> Rebasing: Moving Commits</h1>
<p></p>
<p d__="">I’m going to start with the Number One Rule of Rebasing: <strong><em>never rebase anything that you have pushed</em></strong>. That is, only rebase local changes that no one else has seen. You can push them after the rebase.</p>
<p d__="">This is more of a guideline than a rule in that you can rebase things you’ve pushed <em>if you understand the consequences</em>. It’s typically not a great situation, though, so you’ll want to generally avoid it.</p>
<p d__="">The reason is that rebasing <em>rewrites history</em>. And 
that makes your history get out of sync with the history of other devs 
who have cloned the repo with the old history, and it makes syncing up 
quite challenging.</p>
<h2 data-number="15.1" id="contrasted-to-merging" d__=""><span class="header-section-number">15.1</span> Contrasted to Merging</h2>
<p> </p>
<p d__="">But before we go run off in high spirits talking about 
rebasing, let’s do a quick merge refresher. Here’s a variation of an 
earlier example where we have two divergent branches, Figure 15.1. Let’s
 say you’re working on the <code s__="13">topic</code> branch.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_110_010.svg" title="Two divergent branches.">
<figcaption aria-hidden="true" s__="14" d__="">Two divergent branches.</figcaption>
</figure>
<p d__="">Then you hear that someone has made a change to <code s__="13">main</code> and you want to roll those changes into your <code s__="13">topic</code> branch, but not necessarily get your changes in <code s__="13">main</code> yet.</p>
<p d__="">At this point, if we wanted to get the changes in <code s__="13">main</code> into <code s__="13">topic</code>, our merge option was to make another commit, the <em>merge commit</em>. The merge commit contains the changes from two parent commits (in this case the commit labeled <em>2</em> and the one labeled <em>4</em> are the parents) and makes them into a new commit, marked <em>5</em> in Figure 15.2.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_110_020.svg" title="Two divergent branches, merged.">
<figcaption aria-hidden="true" s__="14" d__="">Two divergent branches, merged.</figcaption>
</figure>
<p d__="">If we look at our log at that point, we can see the changes from all the other commits in the graph from the <code s__="13">topic</code> branch.</p>
<p d__="">And we’re good at this point. That worked, and it did what we 
wanted. Merging is a completely acceptable solution to this problem.</p>
<p d__="">But there are a couple drawbacks to doing the merge. See, we really just wanted to get the latest stuff from <code s__="13">main</code>
 into our branch so we could use it, but we didn’t really want to commit
 anything. But here we’ve made a new commit for everyone to see.</p>
<p d__="">Not only that, but now the commit graph forms a loop, so the history is a little more convoluted than perhaps we’d like it.</p>
<p d__="">What really would have been nice is if I could just have taken commits <em>3</em> and <em>4</em> from <code s__="13">topic</code> and just somehow applied those changes to <em>2</em> on <code s__="13">main</code>. That is, could we pretend that instead of branching off <em>1</em> like <code s__="13">topic</code> did, that we instead branched off <em>2</em>?</p>
<p d__="">After all, if we branched off <em>2</em>, then we’d have those changes from <code s__="13">main</code> that we wanted.</p>
<p d__="">What we need is a way to somehow rewind our commits back to the branch point at <em>1</em>, and then reapply them on commit <em>2</em>. That is, the base of our <code s__="13">topic</code> branch, which was commit <em>1</em>, needs to be changed to another base at commit <em>2</em>. We want to <strong><em>rebase</em></strong> it to commit <em>2</em>!</p>
<h2 data-number="15.2" id="how-it-works" d__=""><span class="header-section-number">15.2</span> How it Works</h2>
<p d__="">So let’s do exactly that. Let’s take the changes we made in commit <em>3</em> and apply them to <code s__="13">main</code> at commit <em>2</em>. This will make a brand new commit that includes changes from both commit <em>2</em> and commit <em>3</em>. (Importantly, this commit didn’t exist before; there was no commit that contained changes from <em>2</em> and <em>3</em>.) We’ll call this new commit <em>3’</em> (“three prime”), since it has the changes that we made in <em>3</em>.</p>
<p d__="">After that, we’ll do the same thing with commit <em>4</em>. We’ll apply the changes from old commit <em>4</em> to <em>3’</em>, making a new commit <em>4’</em>.</p>
<p d__="">And if we do that, we end up with Figure 15.3.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_110_030.svg" title="topic branch rebased on main">
<figcaption aria-hidden="true" s__="14" d__=""><code s__="13">topic</code> branch rebased on <code s__="13">main</code>.</figcaption>
</figure>
<p d__="">And there you see <em>3’</em> and <em>4’</em> now rebased onto <code s__="13">main</code>!</p>
<p d__="">Again, these two commits have the same changes that you originally had in commits <em>3</em> and <em>4</em>, but now they’ve been applied to <code s__="13">main</code> at commit <em>2</em>. So the code is necessarily different since it now contains the changes from <code s__="13">main</code>. This means your old commits <em>3</em> and <em>4</em>
 are effectively gone, and the rebase has replaced them with two new 
commits that contain the same changes, just on a different base point.</p>
<blockquote>
<p d__=""><strong>We just changed history.</strong> When we mentioned 
rewriting history at the top of this chapter, this is what we were 
talking about. Imagine some other dev had your old commits <em>3</em> and <em>4</em> and was working off those making their own new commits. And then you rebased effectively destroying commits <em>3</em> and <em>4</em>. Now your commit history is different than the other dev’s and all kinds of <em>Fun</em>™ will be had trying to sort if out.</p>
<p d__="">If you only rebase commits that you haven’t pushed, you’ll 
never get into trouble. But if some other dev has a copy of your commits
 (because you’ve already pushed them and they pulled them), don’t rebase
 those commits!</p>
</blockquote>
<h2 data-number="15.3" id="when-should-i-do-this" d__=""><span class="header-section-number">15.3</span> When Should I Do This?</h2>
<p d__="">There’s no fixed rule about this. Sometimes a shop will have 
one, saying that everyone should rebase all the time so that the commit 
history has a cleaner look (no merge commits, no loops).</p>
<p d__="">Other shops will say to merge all the time so that the complete history is preserved.</p>
<h2 data-number="15.4" id="pulling-and-rebasing" d__=""><span class="header-section-number">15.4</span> Pulling and Rebasing</h2>
<p></p>
<p d__="">If you might recall from way back when, doing a pull is actually a couple operations: <em>fetch</em> and <em>merge</em>.</p>
<p d__="">The fetch downloads all the new data from the remote, but 
doesn’t actually merge anything into your branches or working tree. So 
you won’t see any local changes after a fetch.</p>
<p d__="">But the pull follows it up with a standard merge so that you see the remote tracking branch’s changes in your local branch.</p>
<p d__="">So, assuming you have everything set up and you’re on your <code s__="13">main</code> branch, when you do this:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb143-1" d__=""><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>$ git pull</span></code></pre></div>
<p d__="">Git actually does something like this:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb144-1" d__=""><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>git fetch                # Get all the information from origin</span>
<span id="cb144-2" d__=""><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>git merge origin/main    # Merge origin/main into main</span></code></pre></div>
<p d__="">(Recall that <code s__="13">origin/main</code> is your remote-tracking branch—it’s the version of <code s__="13">main</code> that’s on <code s__="13">origin</code>, not the <code s__="13">main</code> on your local machine.)</p>
<p d__="">But merging isn’t the only thing you can do there. Given that 
this is the chapter on rebasing, you might correctly suspect that we can
 make it do a rebase instead.</p>
<p d__="">And here’s how:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb145-1" d__=""><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>$ git pull --rebase</span></code></pre></div>
<p d__="">That causes these two things to happen:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb146-1" d__=""><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>git fetch                # Get all the information from origin</span>
<span id="cb146-2" d__=""><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>git rebase origin/main   # Rebase main into origin/main</span></code></pre></div>
<p d__="">If you want that to be the default behavior for the current repo, you can run this one-time command:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb147-1" d__=""><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>$ git config pull.rebase true</span></code></pre></div>
<p d__="">If you want it to be the default behavior for all repos, you can:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb148-1" d__=""><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>$ git config --global pull.rebase true</span></code></pre></div>
<p d__="">If you’ve configured your repo to always rebase on a pull, you can override that to force a merge (if you want) with:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb149-1" d__=""><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>$ git pull --no-rebase  # Do a merge instead of a rebase</span></code></pre></div>
<h2 data-number="15.5" id="rebasing-conflicts" d__=""><span class="header-section-number">15.5</span> Conflicts</h2>
<p></p>
<p d__="">When you do a merge, there’s a chance that you might conflict 
with some of the changes in the other branch, and you have to resolve 
those, as we’ve seen.</p>
<p d__="">Can the same thing happen with a rebase?</p>
<p d__="">Of course! If the commit you’re trying to rebase onto 
conflicts with your commit, you’ll have the same trouble you’d have with
 a merge.</p>
<p d__="">Luckily, Git will let you resolve the conflict in a way similar to the merge.</p>
<p d__="">Let’s start with a simple example. I’m going to have a text file that contains the following:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb150-1" d__=""><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>The magic number is 1.</span></code></pre></div>
<p d__="">We’ll have that in a commit on the <code s__="13">main</code> branch.</p>
<p d__="">Then we’ll make a new <code s__="13">topic</code> branch there.</p>
<p d__="">Then on the <code s__="13">main</code> branch we’ll change the number to <code s__="13">2</code> and commit.</p>
<p d__="">And on the <code s__="13">topic</code> branch we’ll change the number to <code s__="13">3</code> and commit.</p>
<p d__="">So we’ll have the scenario in Figure 15.4.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_110_040.svg" title="Branches ready for conflict">
<figcaption aria-hidden="true" s__="14" d__="">Branches ready for conflict.</figcaption>
</figure>
<p d__="">Finally, we’ll try to rebase <code s__="13">topic</code> onto <code s__="13">main</code>.</p>
<p d__="">At that point, Git will become confused. It knows the last commit on <code s__="13">main</code> has <code s__="13">2</code> and that <code s__="13">topic</code> is unaware of this (because it branched off before that change). And it knows the last commit on <code s__="13">topic</code> has <code s__="13">3</code>. So which one is right?</p>
<p d__="">Let’s try to rebase while we’re on the <code s__="13">topic</code> branch and see what happens.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb151-1" d__=""><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>$ git rebase main</span>
<span id="cb151-2" d__=""><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging magic.txt</span>
<span id="cb151-3" d__=""><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in magic.txt</span>
<span id="cb151-4" d__=""><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  error: could not apply 9f19221... Update to 3</span>
<span id="cb151-5" d__=""><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  hint: Resolve all conflicts manually, mark them as resolved with</span>
<span id="cb151-6" d__=""><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>  hint: "git add/rm &lt;conflicted_files&gt;", then run "git rebase</span>
<span id="cb151-7" d__=""><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>  hint: --continue".</span>
<span id="cb151-8" d__=""><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>  hint: You can instead skip this commit: run "git rebase --skip".</span>
<span id="cb151-9" d__=""><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>  hint: To abort and get back to the state before "git rebase", run</span>
<span id="cb151-10" d__=""><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a>  hint: "git rebase --abort".</span>
<span id="cb151-11" d__=""><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>  hint: Disable this message with "git config advice.mergeConflict</span>
<span id="cb151-12" d__=""><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>  hint: false"</span>
<span id="cb151-13" d__=""><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>  Could not apply 9f19221... Update to 3</span></code></pre></div>
<p d__="">Whoa, Nelly. OK, so it can’t do that. It says we need to 
“Resolve all conflicts manually”, and then add them, and then we’ll run 
rebase again with the <code s__="13">--continue</code> flag to continue the rebase.</p>
<blockquote>
<p d__=""><strong>If you keep reading the hints</strong>, you’ll see there some more stuff in there. We’ll get to <code s__="13">--skip</code> later, but do note that if the conflict is more than you want to take on right now, you can just run:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb152-1" d__=""><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>$ git rebase --abort</span></code></pre></div>
<!-- ` -->
<p d__="">to pretend you never started it in the first place.</p>
</blockquote>
<p d__="">This might sound a little familiar. It’s basically the same process as we went through with the merge conflict.</p>
<ol type="1">
<li d__="">Edit the conflicting file and make it <em>Right</em>.</li>
<li d__="">Add it.</li>
<li d__="">Continue the rebase.</li>
</ol>
<p d__="">Let’s do that. If I pop open that file <code s__="13">magic.txt</code> in my editor, I see:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb153-1" d__=""><a href="#cb153-1"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span id="cb153-2" d__=""><a href="#cb153-2"></a>The magic number is 2</span>
<span id="cb153-3" d__=""><a href="#cb153-3"></a>=======</span>
<span id="cb153-4" d__=""><a href="#cb153-4"></a>The magic number is 3</span>
<span id="cb153-5" d__=""><a href="#cb153-5"></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 9f19221 (Update to 3)</span></code></pre></div>
<p d__="">That’s just like in a merge conflict—Git is showing us the two
 choices we have for this line. So we’ll consult with the team and come 
to an agreement on what should be in the file, and we delete everything 
that shouldn’t be there and we make it <em>Right</em>.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb154-1" d__=""><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>The magic number is 3</span></code></pre></div>
<p d__="">And I save that.</p>
<p d__="">Now, what were we supposed to do at this point, again? If you’ve forgotten, it’s fine. Just run <code s__="13">git status</code> to see where we’re at.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb155-1" d__=""><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb155-2" d__=""><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  interactive rebase in progress; onto 6ceeefb</span>
<span id="cb155-3" d__=""><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  Last command done (1 command done):</span>
<span id="cb155-4" d__=""><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>     pick 9f19221 Update to 3</span>
<span id="cb155-5" d__=""><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>  No commands remaining.</span>
<span id="cb155-6" d__=""><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>  You are currently rebasing branch 'topic' on '6ceeefb'.</span>
<span id="cb155-7" d__=""><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>    (fix conflicts and then run "git rebase --continue")</span>
<span id="cb155-8" d__=""><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>    (use "git rebase --skip" to skip this patch)</span>
<span id="cb155-9" d__=""><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a>    (use "git rebase --abort" to check out the original branch)</span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb155-11" d__=""><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb155-12" d__=""><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb155-13" d__=""><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb155-14" d__=""><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>      both modified:   magic.txt</span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb155-16" d__=""><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">Oh yeah! <code s__="13">--continue</code>, right?</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb156-1" d__=""><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>$ git rebase --continue</span>
<span id="cb156-2" d__=""><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>  magic.txt: needs merge</span>
<span id="cb156-3" d__=""><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>  You must edit all merge conflicts and then</span>
<span id="cb156-4" d__=""><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>  mark them as resolved using git add</span></code></pre></div>
<p d__="">What? Oh, we should have read more of the status message. It says to use <code s__="13">git add</code> to mark resolution of the file <code s__="13">magic.txt</code>. Let’s do that.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb157-1" d__=""><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>$ git add magic.txt</span>
<span id="cb157-2" d__=""><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb157-3" d__=""><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>  interactive rebase in progress; onto 6ceeefb</span>
<span id="cb157-4" d__=""><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  Last command done (1 command done):</span>
<span id="cb157-5" d__=""><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>     pick 9f19221 Update to 3</span>
<span id="cb157-6" d__=""><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>  No commands remaining.</span>
<span id="cb157-7" d__=""><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>  You are currently rebasing branch 'topic' on '6ceeefb'.</span>
<span id="cb157-8" d__=""><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>    (all conflicts fixed: run "git rebase --continue")</span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-10" d__=""><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb157-11" d__=""><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb157-12" d__=""><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>      modified:   magic.txt</span></code></pre></div>
<p d__="">That status looks nicer. Now <code s__="13">--continue</code>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb158-1" d__=""><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>$ git rebase --continue</span></code></pre></div>
<p d__="">This pops me into my editor to edit the commit message. This 
is your opportunity to change the commit message if it no longer 
reflects the commit. (That is, if you changed the commit when resolving 
the conflict to be something entirely different, you might need to edit 
the message.) Edit it if necessary and save it.</p>
<p d__="">And Git says:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb159-1" d__=""><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>[detached HEAD 443fa53] Update to 3</span>
<span id="cb159-2" d__=""><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a> 1 file changed, 1 insertion(+), 1 deletion(-)</span>
<span id="cb159-3" d__=""><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>Successfully rebased and updated refs/heads/topic.</span></code></pre></div>
<p d__="">And <code s__="13">git status</code> shows we’re all clear.</p>
<p d__="">After all that, we see our new commit graph in Figure 15.5.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_110_050.svg" title="After rebase conflict resolution.">
<figcaption aria-hidden="true" s__="14" d__="">After rebase conflict resolution.</figcaption>
</figure>
<h2 data-number="15.6" id="squashing-commits" d__=""><span class="header-section-number">15.6</span> Squashing Commits</h2>
<p></p>
<p d__="">This concept fits in with the notion of a clean commit history.</p>
<p d__="">Let’s say you were tasked with implementing a feature, namely adding an alert box saying that the storage limit was exceeded.</p>
<p d__="">No problem. You add it and commit with message “Added feature #121”. (And you don’t push yet.)</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb160-1" d__=""><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>alert("Strrage limit exceeeded");</span></code></pre></div>
<p d__="">Then after the commit, you notice a typo. Heck.</p>
<p d__="">So you fix it and commit with message “Fixed typo”.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb161-1" d__=""><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>alert("Storage limit exceeeded");</span></code></pre></div>
<p d__="">Done.</p>
<p d__="">Wait! There’s another typo! Are you kidding me?</p>
<p d__="">So you fix it:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb162-1" d__=""><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>alert("Storage limit exceeded");</span></code></pre></div>
<p d__="">And add another commit saying “Fixed another typo”.</p>
<p d__="">Now your local commit history reads:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb163-1" d__=""><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>Fixed another typo</span>
<span id="cb163-2" d__=""><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>Fixed a typo</span>
<span id="cb163-3" d__=""><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>Added feature #121</span></code></pre></div>
<p d__="">That’s not super clean, right? Really this was supposed to be one commit that implemented feature #121.</p>
<p d__="">But luckily you haven’t pushed yet, which means you’re still free to rewrite that history!</p>
<p d__="">You can use a feature of rebase called <strong><em>squashing</em></strong> to get this done.</p>
<p d__="">What you want to do is squash those two typo fixes into the 
previous commit, the one where you first tried to implement the feature.</p>
<p d__="">First, let’s look at the log.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb164-1" d__=""><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb164-2" d__=""><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>commit c1820e6d0da19013208b389d264310162477b099 (HEAD -&gt; main)</span>
<span id="cb164-3" d__=""><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb164-4" d__=""><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-6" d__=""><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>    Fixed another typo</span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-8" d__=""><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a>commit c62c0db7b82e6b415d36bd0f00d568fd503164b7</span>
<span id="cb164-9" d__=""><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb164-10" d__=""><a href="#cb164-10" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb164-11"><a href="#cb164-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-12" d__=""><a href="#cb164-12" aria-hidden="true" tabindex="-1"></a>    Fixed typo</span>
<span id="cb164-13"><a href="#cb164-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-14" d__=""><a href="#cb164-14" aria-hidden="true" tabindex="-1"></a>commit ab84a428b8baae0078ee0647a67b34a89a6abed8</span>
<span id="cb164-15" d__=""><a href="#cb164-15" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb164-16" d__=""><a href="#cb164-16" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb164-17"><a href="#cb164-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-18" d__=""><a href="#cb164-18" aria-hidden="true" tabindex="-1"></a>    Added feature #121</span>
<span id="cb164-19"><a href="#cb164-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-20" d__=""><a href="#cb164-20" aria-hidden="true" tabindex="-1"></a>commit a95854659e31d203e2325eee61d892c9cdad767c</span>
<span id="cb164-21" d__=""><a href="#cb164-21" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb164-22" d__=""><a href="#cb164-22" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb164-23"><a href="#cb164-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-24" d__=""><a href="#cb164-24" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">Since this is a rebase, we’re going to rebase onto something, namely the commit <em>prior</em> to the added feature commit, the commit ID starting with <code s__="13">a9585</code>.</p>
<p d__="">And we want to do it <em>interactively</em>, which is a special rebase mode that lets us do the squashing, and we get there with the <code s__="13">-i</code> flag.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb165-1" d__=""><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>$ git rebase -i a9585</span></code></pre></div>
<p d__="">This brings us into an editor that has this information, and a huge comment block below it full of instructions.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb166-1" d__=""><a href="#cb166-1"></a>pick ab84a42 Added feature #121</span>
<span id="cb166-2" d__=""><a href="#cb166-2"></a>pick c62c0db Fixed typo</span>
<span id="cb166-3" d__=""><a href="#cb166-3"></a>pick c1820e6 Fixed another typo</span></code></pre></div>
<p d__="">Notice that they’re listed in forward order instead of the reverse log order we’re used to.</p>
<p d__="">Look at all those options! Pick, reword, edit, squash, fixup… 
so many things to choose from. As you might imagine we’re in a pretty 
powerful history rewriting mode.</p>
<p d__="">For now, though, let’s just look at “squash” and “fixup”, which are almost the same thing.</p>
<p d__="">Starting with “squash”, what I want to do is take those typo 
fix commits and work them into the “Added feature” commit. We can use 
the squash mode to do this.</p>
<p d__="">I’ll edit the file to look like this:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb167-1" d__=""><a href="#cb167-1"></a>pick ab84a42 Added feature #121</span>
<span id="cb167-2" d__=""><a href="#cb167-2"></a>squash c62c0db Fixed typo</span>
<span id="cb167-3" d__=""><a href="#cb167-3"></a>squash c1820e6 Fixed another typo</span></code></pre></div>
<p d__="">That will squash “Fixed another typo” into “Fixed typo” and then squash that result into “Added feature #121”.</p>
<p d__="">And <code s__="13">pick</code> just means “use this commit as-is”.</p>
<blockquote>
<p d__=""><strong>There are shorthand versions for all these commands.</strong> I could have used <code s__="13">s</code> instead of <code s__="13">squash</code>.</p>
</blockquote>
<p d__="">After I save the file, I get launched right back into another editor that has this in it:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb168-1" d__=""><a href="#cb168-1"></a># This is a combination of 3 commits.</span>
<span id="cb168-2" d__=""><a href="#cb168-2"></a># This is the 1st commit message:</span>
<span id="cb168-3"><a href="#cb168-3"></a></span>
<span id="cb168-4" d__=""><a href="#cb168-4"></a>Added feature #121</span>
<span id="cb168-5"><a href="#cb168-5"></a></span>
<span id="cb168-6" d__=""><a href="#cb168-6"></a># This is the commit message #2:</span>
<span id="cb168-7"><a href="#cb168-7"></a></span>
<span id="cb168-8" d__=""><a href="#cb168-8"></a>Fixed typo</span>
<span id="cb168-9"><a href="#cb168-9"></a></span>
<span id="cb168-10" d__=""><a href="#cb168-10"></a># This is the commit message #3:</span>
<span id="cb168-11"><a href="#cb168-11"></a></span>
<span id="cb168-12" d__=""><a href="#cb168-12"></a>Fixed another typo</span></code></pre></div>
<p d__="">We’re making a new rebased commit here with the three commits 
squashed into one, and so we get to write a new commit message. 
Helpfully, Git has included all three commit messages. Let’s hack it 
down to just have the commit message we want.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb169-1" d__=""><a href="#cb169-1"></a>Added feature #121</span></code></pre></div>
<p d__="">And saving gets us back out with a message.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb170-1" d__=""><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>[detached HEAD 4bc6bca] Added feature #121</span>
<span id="cb170-2" d__=""><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a> Date: Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb170-3" d__=""><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a> 1 file changed, 1 insertion(+)</span>
<span id="cb170-4" d__=""><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a> create mode 100644 foo.js</span>
<span id="cb170-5" d__=""><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>Successfully rebased and updated refs/heads/main.</span></code></pre></div>
<p d__="">Success is good. I like success.</p>
<blockquote>
<p d__=""><strong>What’s that about detached HEAD?</strong> Git detaches the <code s__="13">HEAD</code> briefly when doing a rebase. Don’t worry—it gets reattached for you.</p>
</blockquote>
<p d__="">Now my commit history is all cleaned up.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb171-1" d__=""><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>commit 4bc6bca6870d124b3eebc9afd32486a5a23189fc (HEAD -&gt; main)</span>
<span id="cb171-2" d__=""><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb171-3" d__=""><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-5" d__=""><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>    Added feature #121</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-7" d__=""><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>commit a95854659e31d203e2325eee61d892c9cdad767c</span>
<span id="cb171-8" d__=""><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb171-9" d__=""><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>Date:   Wed Jul 17 11:53:10 2024 -0700</span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-11" d__=""><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>    Added</span></code></pre></div>
<p d__="">And you can see, if you look at the earlier log, that the 
“Added feature” commit ID has changed. We did a rebase, after all, so 
those old commits are gone, replaced by the new ones.</p>
<p d__="">Finally, after all this, <em>now</em> you can push.</p>
<h3 data-number="15.6.1" id="squash-versus-fixup" d__=""><span class="header-section-number">15.6.1</span> Squash versus Fixup</h3>
<p></p>
<p d__="">Now a quick note about <code s__="13">fixup</code> instead of <code s__="13">squash</code>. It’s the same thing, except only the squashed-into commit message is kept by default. So if I ran this:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb172-1" d__=""><a href="#cb172-1"></a>pick fbc1075 Added feature #121</span>
<span id="cb172-2" d__=""><a href="#cb172-2"></a>fixup fd4ca42 Fixed typo</span>
<span id="cb172-3" d__=""><a href="#cb172-3"></a>fixup 6a10e97 Fixed another typo</span></code></pre></div>
<p d__="">Git instantly returns with:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb173-1" d__=""><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>Successfully rebased and updated refs/heads/main.</span></code></pre></div>
<p d__="">And Git log only shows the “Added feature #121” commit. With <code s__="13">fixup</code>, Git automatically discards the squashed commit messages.</p>
<h2 data-number="15.7" id="multiple-conflicts-in-the-rebase" d__=""><span class="header-section-number">15.7</span> Multiple Conflicts in the Rebase</h2>
<p d__="">When you merge with commit and there are multiple conflicts, 
you resolve them all in one big merge commit and then you’re done. You 
use <code s__="13">git commit</code> to wrap it all up.</p>
<p d__="">Rebase is a little different. Since rebase “replays” your 
commits onto the new base one at a time, each replay is a merge conflict
 opportunity. This means that <em>as you rebase, you might have to resolve multiple conflicts one after another</em>.</p>
<p d__="">For example, let’s say on your topic branch you made a commit that modified file <code s__="13">foo.txt</code>. And then you made <em>another commit</em> that modified file <code s__="13">bar.txt</code>.</p>
<p d__="">But unbeknownst to you, someone on the <code s__="13">main</code> branch has also modified those two files, so they’re bound to conflict when you rebase.</p>
<p d__="">And so you begin <code s__="13">git rebase main</code>, and we’re in trouble right off the bat. It’s telling us that <code s__="13">foo.txt</code> conflicts.</p>
<p d__="">So you fix it up and then run <code s__="13">git rebase --continue</code> and edit the commit message, and get on with it.</p>
<p d__="">But all that does is move on to your <em>next</em> commit to <code s__="13">bar.txt</code> and try to rebase that. And it conflicts, too!</p>
<p d__="">So you fix it up and then run <code s__="13">git rebase --continue</code> and edit the commit message, and get on with it. Again.</p>
<p d__="">And finally you get the success message:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb174-1" d__=""><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>[detached HEAD 31c3947] topic change bar</span>
<span id="cb174-2" d__=""><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a> 1 file changed, 1 insertion(+)</span>
<span id="cb174-3" d__=""><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>Successfully rebased and updated refs/heads/topic.</span></code></pre></div>
<p d__="">This is why you can conclude a merge with a simple commit, but you have to conclude a rebase by repeatedly running <code s__="13">git rebase --continue</code> until all commits have been rebased cleanly.</p>
<p d__="">Is this good or bad? It might be better in that you get a 
chance to merge each commit in isolation so it might be easier to reason
 about and avoid errors. But at the same time it’s more legwork to get 
through it.</p>
<p d__="">As always, use the right tool for the job!</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="16" id="stashing-temporarily-set-changes-aside" d__=""><span class="header-section-number">16</span> Stashing: Temporarily Set Changes Aside</h1>
<p></p>
<p d__="">If you’re in the middle of working on something and you 
realize you want to pull some changes in, but you’re not ready to make a
 commit because your stuff is still completely broken, <code s__="13">git stash</code>
 is your friend. It takes the stuff you’re working on and stashes it 
away on the side, returning your working tree to the state of the last 
commit.</p>
<p d__="">So your changes will look like they’re gone—but don’t worry, they’re safely stashed away and you can bring them back later.</p>
<p d__="">Then you can pull the new stuff down so you’re up-to-date, and then unstash your stuff on top of it.</p>
<p d__="">It’s kind of like a mini rebase in spirit.</p>
<h2 data-number="16.1" id="example" d__=""><span class="header-section-number">16.1</span> Example</h2>
<p d__="">Let’s say we’re all caught up to the latest.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb175-1" d__=""><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>$ git pull</span></code></pre></div>
<p d__="">Great. And we start hacking. We open an existing file <code s__="13">foo.rs</code> and add some code to it as per usual.</p>
<p d__="">Then Chris calls from the next desk over and says, “Hey wait—I just made a critical update to <code s__="13">main</code> and you should use that!”</p>
<p d__="">And you think, “Well, heck, I was in the middle of something.” You’re not ready to commit, but you want Chris’s changes.</p>
<p d__="">So you save your files and then run this:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb176-1" d__=""><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>$ git stash</span>
<span id="cb176-2" d__=""><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>  Saved working directory and index state WIP on main: c72c245</span>
<span id="cb176-3" d__=""><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>                                some very descriptive commit message</span></code></pre></div>
<p d__="">And, if you were watching, you might have seen your file in 
your editor change back to what it used to be! Your changes have been 
undone and stashed away!</p>
<p d__="">If you git status at this point, you’ll see:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb177-1" d__=""><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb177-2" d__=""><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb177-3" d__=""><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-5" d__=""><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span></code></pre></div>
<p d__="">It’s all clean, which means now you can pull and get the latest <code s__="13">main</code>. So you do that.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb178-1" d__=""><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>$ git pull</span>
<span id="cb178-2" d__=""><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>  remote: Enumerating objects: 5, done.</span>
<span id="cb178-3" d__=""><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>  remote: Counting objects: 100% (5/5), done.</span>
<span id="cb178-4" d__=""><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>  remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0</span>
<span id="cb178-5" d__=""><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>  remote: (from 0)</span>
<span id="cb178-6" d__=""><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>  Unpacking objects: 100% (3/3), 943 bytes | 943.00 KiB/s, done.</span>
<span id="cb178-7" d__=""><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>  From /home/beej/tmp/origin</span>
<span id="cb178-8" d__=""><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>     10a8ad6..e286011  main       -&gt; origin/main</span>
<span id="cb178-9" d__=""><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>  Updating 10a8ad6..e286011</span>
<span id="cb178-10" d__=""><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>  Fast-forward</span>
<span id="cb178-11" d__=""><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>   foo.rs | 1 +</span>
<span id="cb178-12" d__=""><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span></code></pre></div>
<p d__="">And now you’re up to date.</p>
<p d__="">Oh, wait. What was it we were working on? Oh yeah! We stashed it! Let’s unstash those changes with <code s__="13">pop</code>:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb179-1" d__=""><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>$ git stash pop</span>
<span id="cb179-2" d__=""><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.rs</span>
<span id="cb179-3" d__=""><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb179-4" d__=""><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-6" d__=""><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb179-7" d__=""><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb179-8" d__=""><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working</span>
<span id="cb179-9" d__=""><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb179-10" d__=""><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>      modified:   foo.rs</span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-12" d__=""><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span>
<span id="cb179-13" d__=""><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a>  Dropped refs/stash@{0} (046ac112f8c02c3dc02984ad71d353a3e5be9a7a)</span></code></pre></div>
<p d__="">Auto-merging sounds good. Looks like things went well. And if 
we look at our file now we’ll see our changes brought out of the stash 
and reapplied. Our file <code s__="13">foo.rs</code> is in “modified” state and ready for us to work on, or add and commit.</p>
<h2 data-number="16.2" id="the-stash-stack" d__=""><span class="header-section-number">16.2</span> The Stash Stack</h2>
<p d__="">If you’re familiar with <a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)" d__="">stack abstract data type</a><a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup s__="13" d__="">19</sup></a>, your ears might have perked up when you read <code s__="13">git stash pop</code>.</p>
<p d__="">Yes, Git tracks stashes in a stack. If you’re not familiar with a stack, read up on it first.</p>
<ul>
<li d__=""><code s__="13">git stash</code> pushes the working tree on the stash stack.</li>
<li d__=""><code s__="13">git stash pop</code> pops the top of the stash stack and applies it to the working tree.</li>
<li d__=""><code s__="13">git stash list</code> shows you the current stash stack.</li>
<li d__=""><code s__="13">git stash drop</code> deletes a particular stash stack entry.</li>
</ul>
<p d__="">Because of this, I could <code s__="13">stash</code>, then do something else, then <code s__="13">stash</code> again, and we’ll have two stashes on the stack.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb180-1" d__=""><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>$ git stash list</span>
<span id="cb180-2" d__=""><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>  stash@{0}: WIP on main: 659b132 added repo1 another line</span>
<span id="cb180-3" d__=""><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>  stash@{1}: WIP on main: 659b132 added repo1 another line</span></code></pre></div>
<p d__="">The top of the stack is <code s__="13">stash@{0}</code>.</p>
<p d__="">If I ran just plain <code s__="13">git stash pop</code>, it would take the stash at the top, which is index <code s__="13">0</code>, removing it from the stack and applying it to the working tree.</p>
<p d__="">But you can also pop by stash name if you want to pop something from the middle of the stack.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb181-1" d__=""><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>$ git stash pop 'stash@{1}'</span>
<span id="cb181-2" d__=""><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>$ git stash pop --index 1       # same thing</span></code></pre></div>
<p d__="">Similarly <code s__="13">stash drop</code> will pop the top of the stack and <strong>not</strong> apply the changes to the working tree, discarding them instead.</p>
<p d__="">And <code s__="13">stash drop</code> can also operate on a particular stash by name if you want to drop something from the middle of the stack.</p>
<h2 data-number="16.3" id="conflicts" d__=""><span class="header-section-number">16.3</span> Conflicts</h2>
<p></p>
<p d__="">Now that you’ve spent so much time reading about conflicts 
during merge and rebase, you might start to get a little worried here.</p>
<p d__="">What if I stash then pull, but then popping the stash does something that conflicts with the changes I pulled? Can that happen?</p>
<p d__="">Of course it can. Hooray.</p>
<p d__="">When it happens, it looks like this:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb182-1" d__=""><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>$ git stash pop</span>
<span id="cb182-2" d__=""><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.rs</span>
<span id="cb182-3" d__=""><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in foo.rs</span>
<span id="cb182-4" d__=""><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb182-5" d__=""><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-7" d__=""><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb182-8" d__=""><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb182-9" d__=""><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb182-10" d__=""><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a>      both modified:   foo.rs</span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-12" d__=""><a href="#cb182-12" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span>
<span id="cb182-13" d__=""><a href="#cb182-13" aria-hidden="true" tabindex="-1"></a>  The stash entry is kept in case you need it again.</span></code></pre></div>
<p d__="">Sure looks like a merge conflict, and it looks doubly so in the editor.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode numberSource rs numberLines"><code class="sourceCode rust" s__="13"><span id="cb183-1" d__=""><a href="#cb183-1"></a><span class="kw" d__="">fn</span> main() <span class="op" d__="">{</span></span>
<span id="cb183-2" d__=""><a href="#cb183-2"></a><span class="op" d__="">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> Updated upstream</span>
<span id="cb183-3" d__=""><a href="#cb183-3"></a>    <span class="pp" d__="">println!</span>(<span class="st" d__="">"This is critically fixed"</span>)<span class="op" d__="">;</span></span>
<span id="cb183-4"><a href="#cb183-4"></a><span class="op" d__="">=======</span></span>
<span id="cb183-5" d__=""><a href="#cb183-5"></a>    <span class="pp" d__="">println!</span>(<span class="st" d__="">"This is sorta working"</span>)<span class="op" d__="">;</span></span>
<span id="cb183-6" d__=""><a href="#cb183-6"></a><span class="op" d__="">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> Stashed changes</span>
<span id="cb183-7"><a href="#cb183-7"></a><span class="op" d__="">}</span></span></code></pre></div>
<p d__="">You can see our stashed changes below where we tried to fix it, but then we see that conflicts with Chris’s fix from upstream.</p>
<p d__="">So we do the merge thing and make it <em>Right</em>, editing it to look the way we want, and we save it. Our status is still not clean, though.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb184-1" d__=""><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb184-2" d__=""><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb184-3" d__=""><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>  Your branch is up to date with 'origin/main'.</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-5" d__=""><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb184-6" d__=""><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb184-7" d__=""><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb184-8" d__=""><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>      both modified:   foo.rs</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-10" d__=""><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">Let’s add it with <code s__="13">git add</code> to mark it resolved.</p>
<p d__="">A couple things can happen at this point.</p>
<ol type="1">
<li><p d__="">If you just accepted the pulled version 
(i.e.&nbsp;discarding your conflicting changes), nothing new will 
happen. After all, there’s already a commit in your repo with their 
version, so Git it smart enough to just call it a day. <code s__="13">git status</code> reports clean.</p></li>
<li><p d__="">If you accepted a version different than the one you pulled (i.e.&nbsp;you kept some or all of your changes), then <code s__="13">git status</code> will report that file as modified and staged to be committed.</p>
<p d__="">If you’re not ready to commit at this point, use <code s__="13">git restore --staged</code> to unstage the file. That will change it to just be modified and you can work on it more before you commit it.</p></li>
</ol>
<p d__=""><strong>In both conflict cases the stashed changes are still in the stash!</strong> Yes, you ran <code s__="13">stash pop</code>, but when there’s a conflict, the stash remains untouched and doesn’t actually pop.</p>
<p d__="">If you’re done with it (and you probably are), you can use <code s__="13">git stash drop</code> to discard the particular stash from the stack and get all cleaned up.</p>
<h2 data-number="16.4" id="stashing-new-files" d__=""><span class="header-section-number">16.4</span> Stashing New Files</h2>
<p></p>
<p d__="">What if you’ve added a new file to your working tree but it’s currently untracked? Can stash see it?</p>
<p d__="">No.&nbsp;You have to add it first. So do a <code s__="13">git add</code> (but not a commit!) then stash it. The new file should disappear from the working tree.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="17" id="github-forking-and-pull-requests" d__=""><span class="header-section-number">17</span> GitHub: Forking and Pull Requests</h1>
<p> </p>
<p d__="">What if you want to make changes to a repo on GitHub but you don’t have write permission? Here’s how.</p>
<p d__="">A <strong><em>fork</em></strong> is a clone of someone else’s 
GitHub repo that you’ve made on GitHub using their “Fork” command. It’s a
 regular clone except that GitHub is doing some bookkeeping to track 
which repo you forked from.</p>
<p d__="">The <strong><em>upstream</em></strong> is by convention the name of the remote that you forked from.</p>
<p d__="">A <strong><em>pull request</em></strong> (or “PR” for short) is a way for you to offer changes you’ve made to your fork to the owner of the original repo.</p>
<blockquote>
<p d__=""><strong>Forks and Pull Requests are a GitHub thing, not a Git thing.</strong> It’s some additional functionality that GitHub has implemented on their website that you can use.</p>
</blockquote>
<p d__="">Let’s say, for example, you found an open source project you 
liked and there was a bug in it. You don’t have permission to write to 
the project’s GitHub repo, so how can you change it?</p>
<p d__="">The process for someone making a pull request is:</p>
<ol type="1">
<li d__="">On GitHub, fork the repo. Now you have your own clone of it.</li>
<li d__="">Clone your repo to your local machine. Now you have two clones of it: your fork on GitHub and its clone on your local machine.</li>
<li d__="">Make the fix on your local machine and test it.</li>
<li d__="">Push your fix to your GitHub fork.</li>
<li d__="">On GitHub, create a pull request. This informs the upstream owner that you have changes you’d like them to merge.</li>
<li d__="">On GitHub, the upstream owner reviews your PR and decides if 
they want to merge it. If so, they merge it. Otherwise they comment and 
ask for changes, or delete it.</li>
<li d__="">At this point, if you’re done, you can optionally delete your fork.</li>
</ol>
<p d__="">Let’s give it a try! Feel free to issue PRs on my sample repo,
 used below. I’m just going to delete them (they won’t be merged); don’t
 take it personally—I just don’t have time to review them all.</p>
<h2 data-number="17.1" id="making-a-fork" d__=""><span class="header-section-number">17.1</span> Making a Fork</h2>
<p></p>
<p d__="">Head on over to <a href="https://github.com/beejjorgensen/git-example-repo" d__="">my test repo</a><a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup s__="13" d__="">20</sup></a> and let’s do this:</p>
<ul>
<li d__="">In the upper right there should be a button labeled “Fork”. Click it.</li>
<li d__="">Under “Owner”, choose your user name.</li>
<li d__="">Under “Repository name”, chose the default or make a new name.</li>
<li d__="">Click the “Create fork” button.</li>
</ul>
<blockquote>
<p d__=""><strong>This can be done with impunity.</strong> That is, 
you’ve made your own fork but the original owner is unaware that you 
did. You can delete it with no damage to the original repo. Remember 
that a fork is a clone on GitHub that you have ownership of, independent
 of the original repo.</p>
</blockquote>
<p d__="">At this point, you should land on the project page for your 
fork, and the fine print on the page reads: “forked from 
beejjorgensen/git-example-repo”.</p>
<p d__="">And now we have our own version of that repo on GitHub to do with as we please.</p>
<p d__="">We can clone it as normal, pull, push, delete the repo, etc. 
The owner of the original repo will not know about it—our changes affect
 our repo alone. Later we’ll see how to issue a pull request to try to 
get our changes in the original upstream repo.</p>
<h2 data-number="17.2" id="making-your-changes" d__=""><span class="header-section-number">17.2</span> Making Your Changes</h2>
<p d__="">Let’s make some changes. First, we have to clone <em>our</em> repo (that is, clone the fork we made) onto our local machine.</p>
<p d__="">So pull down the “Code” button as usual and select the SSH link to clone (or use the GitHub CLI variant if you’re using that).</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb185-1" d__=""><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>$ git clone git@github.com:user/git-example-repo.git</span>
<span id="cb185-2" d__=""><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  Cloning into 'git-example-repo'...</span>
<span id="cb185-3" d__=""><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  remote: Enumerating objects: 4, done.</span>
<span id="cb185-4" d__=""><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  remote: Counting objects: 100% (4/4), done.</span>
<span id="cb185-5" d__=""><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  remote: Compressing objects: 100% (3/3), done.</span>
<span id="cb185-6" d__=""><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>  remote: Total 4 (delta 0), reused 4 (delta 0), pack-reused 0</span>
<span id="cb185-7" d__=""><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>  Receiving objects: 100% (4/4), done.</span></code></pre></div>
<p d__="">And then you can <code s__="13">cd</code> into that directory and see the files there.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb186-1" d__=""><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>$ cd git-example-repo</span>
<span id="cb186-2" d__=""><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>$ ls</span>
<span id="cb186-3" d__=""><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>  hello.py    README.md</span></code></pre></div>
<p d__="">Let’s modify <code s__="13">hello.py</code> to this:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode numberSource py numberLines"><code class="sourceCode python" s__="13"><span id="cb187-1"><a href="#cb187-1"></a><span class="co" d__="">#!/usr/bin/env python</span></span>
<span id="cb187-2"><a href="#cb187-2"></a></span>
<span id="cb187-3" d__=""><a href="#cb187-3"></a><span class="bu" d__="">print</span>(<span class="st" d__="">"Hello, world!"</span>)</span>
<span id="cb187-4" d__=""><a href="#cb187-4"></a><span class="bu" d__="">print</span>(<span class="st" d__="">"This is my modification"</span>)</span></code></pre></div>
<p d__="">And let’s add it, make a commit, and push.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb188-1" d__=""><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>$ git add hello.py</span>
<span id="cb188-2" d__=""><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>$ git commit -m "modified"</span>
<span id="cb188-3" d__=""><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>  [main 5d3fe49] modified</span>
<span id="cb188-4" d__=""><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span>
<span id="cb188-5" d__=""><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>$ git push</span>
<span id="cb188-6" d__=""><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>  Enumerating objects: 5, done.</span>
<span id="cb188-7" d__=""><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>  Counting objects: 100% (5/5), done.</span>
<span id="cb188-8" d__=""><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a>  Delta compression using up to 8 threads</span>
<span id="cb188-9" d__=""><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a>  Compressing objects: 100% (3/3), done.</span>
<span id="cb188-10" d__=""><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>  Writing objects: 100% (3/3), 1.02 KiB | 1.02 MiB/s, done.</span>
<span id="cb188-11" d__=""><a href="#cb188-11" aria-hidden="true" tabindex="-1"></a>  Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)</span>
<span id="cb188-12" d__=""><a href="#cb188-12" aria-hidden="true" tabindex="-1"></a>  To github.com:user/git-example-repo.git</span>
<span id="cb188-13" d__=""><a href="#cb188-13" aria-hidden="true" tabindex="-1"></a>     4332527..5d3fe49  main -&gt; main</span></code></pre></div>
<p d__="">Again, this just pushed to our fork, not the upstream. You can look at your fork’s page on GitHub and see the change there.</p>
<h2 data-number="17.3" id="syncing-the-upstream-with-your-fork" d__=""><span class="header-section-number">17.3</span> Syncing the Upstream with Your Fork</h2>
<p></p>
<p d__="">Are you ready to make a PR? Hold up just a moment!</p>
<p d__="">What if the upstream owner has made changes to their repo in 
the meantime? Don’t you want to make sure your code works with the 
latest version of their code?</p>
<p d__="">Of course you do.</p>
<p d__="">On your fork’s page, you might have noticed that it has a “Sync fork” button that you can pull down.</p>
<p d__="">If you pull it down and it says “This branch is not behind the
 upstream”, then congratulations! You’re already up to date! Go ahead 
and make a PR, as outlined in the next section.</p>
<p d__="">If you pull it down and it says “This branch is out-of-date” 
and offers you an “Update branch” button, then congratulations! You’re 
out of date, but you can be brought up to date without a conflict. Click
 “Update branch” and then go ahead and make a PR, as outlined in the 
next section. (It might also offer you a “Discard” button, but don’t 
press that unless you want to discard your changes!)</p>
<p d__="">If it instead says “This branch has conflicts that must be 
resolved”, bad news. You have some changes in your repo that conflict 
with someone else’s changes in the upstream. You have some options:</p>
<ul>
<li d__="">The UI says you can open a pull request, which will give you a
 chance to resolve the conflict in-browser as outlined in the next 
section.</li>
<li d__="">It also says you can just throw away your changes and replace them with the upstream. Bummer.</li>
<li d__="">Aside from that, you can actually merge your branch from the 
upstream on the command line and take care of the conflict there without
 opening a PR first. See <a href="#sync-cl" d__="">Syncing on the Command Line</a>, below.</li>
</ul>
<p d__="">In general, it’s a good idea to keep in sync with the upstream
 repo. This way you can be sure your changes aren’t conflicting with any
 upstream changes as you go. It’s way better than waiting to resolve 
them all at the end when you’re ready to issue a pull request.</p>
<h2 data-number="17.4" id="making-a-pull-request" d__=""><span class="header-section-number">17.4</span> Making a Pull Request</h2>
<p></p>
<p d__="">Now that we’ve modified our fork to our satisfaction, we can 
ask the upstream maintainer if they’re willing to accept it into the 
official repo.</p>
<blockquote>
<p d__=""><strong>Maybe they aren’t ready!</strong> Don’t take it 
personally if they don’t answer or answer with ways they need your patch
 improved. Work with the owners to get the job done to both of your 
satisfactions.</p>
</blockquote>
<p d__="">Let’s go!</p>
<ul>
<li d__="">Click the “Contribute” button and then “Open pull request”.</li>
<li d__="">Look for the text “This branch has conflicts that must be 
resolved”. If you find that text, it means the upstream can’t 
automatically apply your PR and they’ll have to do manual work to make 
it happen. They’re far more likely to just reject it. To avoid this, you
 have some options:
<ul>
<li>Don’t open the PR, go back and sync with the upstream, fix the conflict, and try again.</li>
<li>Or click the “Resolve conflicts” button right there in the UI and use the in-browser editor to manually resolve.</li>
</ul></li>
<li d__="">Add a nice title.</li>
<li d__="">Add a good description. You’re asking someone to incorporate 
your code into their project, so you’ll want to describe what the code 
does here to make their lives easier when they review it. (Since this 
example goes to my repo, you can just pretend you wrote something 
nice—I’m just going to close the PR.)</li>
<li d__="">Click “Create pull request”!</li>
</ul>
<p d__="">This lands us on the PR page. You can add more comments or close the request (if you changed your mind about it).</p>
<p d__="">The owner of the upstream will see the PR has been issued, and now you have to wait for a response.</p>
<p d__="">Maybe they respond with a comment asking for improvements or 
other questions. Maybe they reject the PR and close it, unmerged. Or 
maybe they accept! Happy days!</p>
<h2 data-number="17.5" id="flipside-merging-a-pull-request" d__=""><span class="header-section-number">17.5</span> Flipside: Merging a Pull Request</h2>
<p></p>
<p d__="">As the upstream owner, if someone issues a PR you’ll be 
notified (unless you’ve turned those notifications off) with an email 
and in the notifications in GitHub in the upper right.</p>
<p d__="">When you do, you can visit your project page on GitHub and decide what to do with the PR.</p>
<p d__="">At the top of the project page, you’ll see a “Pull requests” 
button with a number next to it indicating how many PRs are currently 
outstanding.</p>
<ul>
<li d__="">Click the button to see the list.</li>
<li d__="">Click on a PR title to get to the PR.</li>
</ul>
<p d__="">Now we’re looking at the PR. Read the description to see what it does, and then, <strong>very importantly</strong> review the code!</p>
<blockquote>
<p d__=""><strong>You’re about to accept code from someone you probably don’t know.</strong> On this planet, most people are friendly, but that doesn’t mean there aren’t some bad actors (the industry term is <em>a--holes</em>)
 out there looking to take advantage of you by introducing some 
malicious code. Even if you’ve known the contributor for a year, they 
might be playing a long game, and if that seems unlikely to you, <a href="https://en.wikipedia.org/wiki/XZ_Utils_backdoor" d__="">read about the XZ utils hack that took place in 2024</a><a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup s__="13" d__="">21</sup></a>.</p>
</blockquote>
<p d__="">To review the code, look right below the description to the 
contributor’s avatar and the commit message. Click on the commit message
 and you’ll see a diff<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup s__="13" d__="">22</sup></a>. Lines marked with a <code s__="13">+</code> are added, and lines marked with <code s__="13">-</code> are removed.</p>
<p d__="">If you just want a straight up view of the file as it was 
edited by the contributor, you can hit the “…” on the right and then 
“View file”.</p>
<p d__="">If it’s almost right but you need to make a modification, you can also hit “Edit file” and add commits directly to the PR.</p>
<p d__="">If everything looks good, scroll down and hopefully you’ll see
 some text that reads “This branch has no conflicts with the base 
branch” and “Merging can be performed automatically”. This is good news.</p>
<p d__="">If it says that, you can just click “Merge pull request”, and 
that will add the changes to your repo and close the PR. It’s nice to 
also add a comment thanking the contributor—they just gave you work for 
free, after all!</p>
<blockquote>
<p d__=""><strong>Closing a PR doesn’t delete the PR.</strong> You can still reopen it.</p>
</blockquote>
<p d__="">But let’s say the PR does conflict and can’t be automatically 
merged. GitHub complains that “This branch has conflicts that must be 
resolved” and gives you some options.</p>
<p d__="">As the upstream owner, you can click the “Resolve conflicts” button and fix the issue if possible.</p>
<p d__="">Or you can just reject the PR and ask the person who opened it
 to resolve the conflict so that your life might be made easier with an 
automatic merge.</p>
<h2 data-number="17.6" id="making-many-pull-requests-with-branches" d__=""><span class="header-section-number">17.6</span> Making Many Pull Requests with Branches</h2>
<p></p>
<p d__="">Here’s the thing about pull requests: when you make one, it 
takes all the changes you have on your branch and bundles them together 
in one. Doesn’t matter if the changes are doing radically different 
things; they all get rolled into the same PR.</p>
<p d__="">This is sometimes not so great from an administrative 
perspective. Maybe I want a PR for issue #1 and a different PR for issue
 #2!</p>
<p d__="">The way to make this happen is to make a local branch on the 
clone of your fork for each individual PR, and push those branches to 
your fork. Then when you create the PR, you choose the branch to use. 
Even if your branch is named something like <code s__="13">feature1</code>, you can still merge it into the <code s__="13">main</code> branch on the upstream.</p>
<p d__="">So make a new branch for the feature:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb189-1" d__=""><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>$ git switch -c feature1</span>
<span id="cb189-2" d__=""><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>  Switched to a new branch 'feature1'</span></code></pre></div>
<p d__="">Then make your changes, add, and commit.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb190-1" d__=""><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>$ vim readme.txt</span>
<span id="cb190-2" d__=""><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>$ git add readme.txt</span>
<span id="cb190-3" d__=""><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>$ git commit -m "feature 1"</span>
<span id="cb190-4" d__=""><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>  [feature1 1ad9e92] feature 1</span>
<span id="cb190-5" d__=""><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span></code></pre></div>
<p d__="">Then push them to your repo, setting up a remote-tracking branch:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb191-1" d__=""><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>$ git push -u origin feature1</span>
<span id="cb191-2" d__=""><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>  Enumerating objects: 5, done.</span>
<span id="cb191-3" d__=""><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>  Counting objects: 100% (5/5), done.</span>
<span id="cb191-4" d__=""><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  Delta compression using up to 8 threads</span>
<span id="cb191-5" d__=""><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  Compressing objects: 100% (2/2), done.</span>
<span id="cb191-6" d__=""><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>  Writing objects: 100% (3/3), 979 bytes | 979.00 KiB/s, done.</span>
<span id="cb191-7" d__=""><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>  Total 3 (delta 1), reused 0 (delta 0), pack-reused 0 (from 0)</span>
<span id="cb191-8" d__=""><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>  remote: Resolving deltas: 100% (1/1), completed with 1 local</span>
<span id="cb191-9" d__=""><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>  remote: object.</span>
<span id="cb191-10" d__=""><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>  remote:</span>
<span id="cb191-11" d__=""><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>  remote: Create a pull request for 'feature1' on GitHub by</span>
<span id="cb191-12" d__=""><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>  remote: visiting:</span>
<span id="cb191-13" d__=""><a href="#cb191-13" aria-hidden="true" tabindex="-1"></a>  remote:      https://github.com/user/fork/pull/new/feature1</span>
<span id="cb191-14" d__=""><a href="#cb191-14" aria-hidden="true" tabindex="-1"></a>  remote:</span>
<span id="cb191-15" d__=""><a href="#cb191-15" aria-hidden="true" tabindex="-1"></a>  To github.com:user/fork.git</span>
<span id="cb191-16" d__=""><a href="#cb191-16" aria-hidden="true" tabindex="-1"></a>   * [new branch]      feature1 -&gt; feature1</span>
<span id="cb191-17" d__=""><a href="#cb191-17" aria-hidden="true" tabindex="-1"></a>  branch 'feature1' set up to track 'origin/feature1'.</span></code></pre></div>
<p d__="">Now you can jump back to GitHub and issue a PR.</p>
<p d__="">There might be a handy little popup there saying “feature1 had
 recent pushes 4 minutes ago” and a button “Compare and pull request” 
you can click to make the PR.</p>
<p d__="">But if it’s been too long and the popup is gone, not to worry.
 See the branch selector button on the upper left that probably says 
“main” right now? Pull it down and select the branch “feature1” that you
 want to create the PR for. Then click “Contribute” and open the PR.</p>
<p d__="">There’s a line at the top of the PR that indicates the repo 
and branch that will be merged into, and, on the right, your repo and 
branch name that you’ll be merging from.</p>
<p d__="">The rest of the PR proceeds as normal.</p>
<p d__=""><strong>Don’t delete your branch until after the merge!</strong>
 Once it has been safely merged, GitHub will pop up a “Delete branch” 
button for you on the PR page. This will delete the branch on GitHub, 
but you’ll still have to delete <code s__="13">feature1</code> and <code s__="13">origin/feature1</code> on the command line.</p>
<h2 data-number="17.7" id="deleting-a-pull-request" d__=""><span class="header-section-number">17.7</span> Deleting a Pull Request</h2>
<p></p>
<p d__="">Short answer: you can’t.</p>
<p d__="">Long answer: you can.</p>
<p d__="">The irony is that the short answer is longer. I don’t make the rules.</p>
<p d__="">Proper long answer: you can if you are the upstream owner and the PR contains sensitive information.</p>
<p d__="">There’s no way in the UI to delete PRs, whether you’re the 
forker or forkee. And this can be a bummer especially if you’ve 
accidentally included some sensitive information like <a href="https://en.wikipedia.org/wiki/Social_Security_number#SSNs_used_in_advertising" d__="">social security number 078-05-1120</a><a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup s__="13" d__="">23</sup></a>.</p>
<p d__="">But hope is not all lost! The upstream owner can visit the virtual assistant at GitHub and <a href="https://support.github.com/request?q=pull+request+removals" d__="">ask for a pull request removal</a><a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup s__="13" d__="">24</sup></a> which apparently works. I haven’t tried it.</p>
<p d__="">If there’s a way as the forker to delete the PR they created, I
 haven’t seen it. You’ll have to plead your case with the upstream owner
 and get them to do it.</p>
<p d__="">In any case, you most definitely should change your leaked credentials right now and let that be a lesson to you.</p>
<h2 data-number="17.8" id="sync-cl" d__=""><span class="header-section-number">17.8</span> Syncing on the Command Line</h2>
<p></p>
<p d__="">GitHub has that nice Sync button to bring the upstream changes
 into your fork, and this was a welcome addition. It used to be you had 
to do it the hard way.</p>
<p d__="">But the hard way has an additional benefit: if the upstream 
conflicts with your changes, you can merge them locally before creating 
the PR. The GitHub UI requires you create a PR to resolve the conflict.</p>
<p d__="">Additionally, if you just like the command line and want to quickly sync the upstream to your branch, this can do it.</p>
<p d__="">The plan is this:</p>
<ol type="1">
<li d__="">Add an <code s__="13">upstream</code> remote that points to the upstream repo.</li>
<li d__="">Fetch the data from <code s__="13">upstream</code>.</li>
<li d__="">Merge the upstream branch into your branch.</li>
<li d__="">Resolve conflicts.</li>
<li d__="">Push your branch.</li>
<li d__="">Go issue a now-hopefully-non-conflicting PR.</li>
</ol>
<p d__="">Let’s try. I’ll be on my <code s__="13">main</code> branch, and try to sync it with the upstream’s <code s__="13">main</code> branch. I’ll show what it’s like when there’s a conflict. (If there were no conflict, the merge would succeed automatically.)</p>
<p d__="">First things first: if you haven’t already, set up the <code s__="13">upstream</code>
 remote to point to the original owner’s repo. This is the repo that you
 forked from. Since you won’t be pushing to it, you can use the SSH or 
HTTP methods to access it. (And this remote can be named anything, but <code s__="13">upstream</code> is a common convention.)</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb192-1" d__=""><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>$ git remote add upstream https://github.com/other/upstream.git</span></code></pre></div>
<p d__="">And then we need to get the new commits from the upstream repo and merge them into our stuff.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb193-1" d__=""><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>$ git fetch upstream</span>
<span id="cb193-2" d__=""><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>  remote: Enumerating objects: 5, done.</span>
<span id="cb193-3" d__=""><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  remote: Counting objects: 100% (5/5), done.</span>
<span id="cb193-4" d__=""><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>  remote: Compressing objects: 100% (1/1), done.</span>
<span id="cb193-5" d__=""><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>  remote: Total 3 (delta 1), reused 3 (delta 1), pack-reused 0</span>
<span id="cb193-6" d__=""><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  Unpacking objects: 100% (3/3), 950 bytes | 950.00 KiB/s, done.</span>
<span id="cb193-7" d__=""><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>  From https://github.com/other/upstream</span>
<span id="cb193-8" d__=""><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>   * [new branch]      main       -&gt; upstream/main</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-10" d__=""><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>$ git switch main   # Make sure we're on the main branch</span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-12" d__=""><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>$ git merge upstream/main</span>
<span id="cb193-13" d__=""><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>  Auto-merging readme.txt</span>
<span id="cb193-14" d__=""><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in readme.txt</span>
<span id="cb193-15" d__=""><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a>  Automatic merge failed; fix conflicts and then commit the result.</span></code></pre></div>
<p d__="">(You could also rebase if you wanted.)</p>
<p d__="">At this point, we should edit the file and resolve the conflict, and complete the resolution as per usual.</p>
<p d__="">And then we push back to our fork on GitHub!</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb194-1" d__=""><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>$ git push</span>
<span id="cb194-2" d__=""><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>  Enumerating objects: 7, done.</span>
<span id="cb194-3" d__=""><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>  Counting objects: 100% (7/7), done.</span>
<span id="cb194-4" d__=""><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>  Delta compression using up to 8 threads</span>
<span id="cb194-5" d__=""><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>  Compressing objects: 100% (2/2), done.</span>
<span id="cb194-6" d__=""><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>  Writing objects: 100% (3/3), 999 bytes | 999.00 KiB/s, done.</span>
<span id="cb194-7" d__=""><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>  Total 3 (delta 1), reused 0 (delta 0), pack-reused 0 (from 0)</span>
<span id="cb194-8" d__=""><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>  remote: Resolving deltas: 100% (1/1), completed with 1 local</span>
<span id="cb194-9" d__=""><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a>  remote: object.</span>
<span id="cb194-10" d__=""><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a>  To github.com:user/fork.git</span>
<span id="cb194-11" d__=""><a href="#cb194-11" aria-hidden="true" tabindex="-1"></a>   8b2476c..c8a7e0a  main -&gt; main</span></code></pre></div>
<p d__="">If we jump back to the GitHub UI at this point and open a PR, 
it should tell us “These branches can be automatically merged” which is 
music to everyone’s ears.</p>
<p d__="">Once you have the <code s__="13">upstream</code> remote set up, all you have to do to sync in the future is do the <code s__="13">git fetch upstream</code> and then merge or rebase your stuff with it.</p>
<p> </p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="18" id="reverting-undoing-commits" d__=""><span class="header-section-number">18</span> Reverting: Undoing Commits</h1>
<p></p>
<p d__="">Let’s say you made some changes and committed them, but they 
actually botched everything up. You want to just revert to an earlier 
version of the file.</p>
<p d__="">There’s the cheesy way to do this that might have already 
occurred to you: detach the head to an earlier commit where the file was
 like you wanted it, make a copy of the file someplace safe, then 
reattach the head to <code s__="13">main</code>, then copy the old file over the existing one in your working tree. And add and commit!</p>
<p d__="">But let’s be more proper, and we can do that with <code s__="13">git revert</code>.</p>
<p d__="">Reverting allows us to actually undo the changes of a single 
commit, even if it wasn’t the one that got you to the point you’re at 
now. That is, let’s say you’ve made 30 commits, but it turns out you 
don’t actually want commit number 4 to be there any longer. You can 
revert just that one!</p>
<p d__="">Performing a standard revert will actually make a new commit, 
and doesn’t erase any old commits. In this way, it’s not rewriting 
history so using this method is safe to revert commits that have already
 been pushed.</p>
<h2 data-number="18.1" id="performing-the-revert" d__=""><span class="header-section-number">18.1</span> Performing the Revert</h2>
<p d__="">It’s pretty straightforward. You look back in the log for the commit ID you’re interested in reverting, and revert it.</p>
<p d__="">For example, if you have this in the log:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb195-1" d__=""><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>commit 9fef4fe6d42b91c12b5217829e8d98d738f84d61</span>
<span id="cb195-2" d__=""><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>Author: Brian "Beej Jorgensen" Hall &lt;beej@beej.us&gt;</span>
<span id="cb195-3" d__=""><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>Date:   Fri Jul 26 16:59:44 2024 -0700</span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-5" d__=""><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>    Added Line 50</span></code></pre></div>
<p d__="">and you decided you didn’t want that commit any longer, you 
could revert it by its commit ID. Here I’ll just type the first few 
characters of the hash because that’s enough:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb196-1" d__=""><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>$ git revert 9fef4</span>
<span id="cb196-2" d__=""><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb196-3" d__=""><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>  [main de415f4] Revert "Added Line 50"</span>
<span id="cb196-4" d__=""><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span></code></pre></div>
<p d__="">There’s no conflict (more on that, below) in this example, so 
it just pops me into my editor and allows me to edit the commit message.
 Remember that the revert makes a new commit!</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb197-1" d__=""><a href="#cb197-1"></a>Revert "Added Line 50"</span>
<span id="cb197-2"><a href="#cb197-2"></a></span>
<span id="cb197-3" d__=""><a href="#cb197-3"></a>This reverts commit 9fef4fe6d42b91c12b5217829e8d98d738f84d61.</span></code></pre></div>
<p d__="">I save the file and <code s__="13">git status</code> tells me we’re clean.</p>
<p d__="">Another <code s__="13">git log</code> will show the revert commit:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb198-1" d__=""><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb198-2" d__=""><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>  commit de415f4f0cd645b1e551a6ac56e13f73850c88db (HEAD -&gt; main)</span>
<span id="cb198-3" d__=""><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>  Author: Brian "Beej Jorgensen" Hall &lt;beej@beej.us&gt;</span>
<span id="cb198-4" d__=""><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>  Date:   Fri Jul 26 17:01:54 2024 -0700</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-6" d__=""><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>    Revert "Added Line 50"</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-8" d__=""><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>    This reverts commit 9fef4fe6d42b91c12b5217829e8d98d738f84d61.</span></code></pre></div>
<p d__="">You can revert any commit, even commits that were themselves reverts! Revert the revert!</p>
<p d__="">Now that was an example where the revert went smoothly. But 
what if you’ve made some changes since the revert commit that were close
 to the changes in the revert commit itself? Can it conflict? Of course 
it can!</p>
<h2 data-number="18.2" id="revert-conflicts" d__=""><span class="header-section-number">18.2</span> Revert Conflicts</h2>
<p></p>
<p d__="">Like with merging or rebasing, you can have conflicts with a 
revert. If you’re not familiar with conflict resolution, please review 
the <a href="#rebasing-conflicts" d__="">Rebasing Conflicts</a> section, because it’s closest to how revert conflicts work.</p>
<p d__="">An example of a conflict might be that if you changed line 37 
in your code, then revert a commit that also changed line 37 in the 
code, Git can’t figure out what to do with that. Should it revert it to 
what it was before your commit, or before the earlier commit?</p>
<p d__="">So there’s a revert conflict that must be resolved. And it works very much like the other conflicts we’ve already seen.</p>
<p d__="">If you try to revert and get a conflict, it will say something like this:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb199-1" d__=""><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>$ git revert 5af89a8985c001ec02409d77e093fb7be45495ff</span>
<span id="cb199-2" d__=""><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb199-3" d__=""><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in foo.txt</span>
<span id="cb199-4" d__=""><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>  error: could not revert 5af89a8... Added Line 69</span>
<span id="cb199-5" d__=""><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>  hint: After resolving the conflicts, mark them with</span>
<span id="cb199-6" d__=""><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>  hint: "git add/rm &lt;pathspec&gt;", then run</span>
<span id="cb199-7" d__=""><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>  hint: "git revert --continue".</span>
<span id="cb199-8" d__=""><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>  hint: You can instead skip this commit with "git revert --skip".</span>
<span id="cb199-9" d__=""><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>  hint: To abort and get back to the state before "git revert",</span>
<span id="cb199-10" d__=""><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>  hint: run "git revert --abort".</span>
<span id="cb199-11" d__=""><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>  hint: Disable this message with</span>
<span id="cb199-12" d__=""><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>  hint: "git config advice.mergeConflict false"</span></code></pre></div>
<p d__="">And it points out we have a few options here. We can get even more info with our friend <code s__="13">git status</code>:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb200-1" d__=""><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb200-2" d__=""><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb200-3" d__=""><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>  You are currently reverting commit 5af89a8.</span>
<span id="cb200-4" d__=""><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>    (fix conflicts and run "git revert --continue")</span>
<span id="cb200-5" d__=""><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>    (use "git revert --skip" to skip this patch)</span>
<span id="cb200-6" d__=""><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>    (use "git revert --abort" to cancel the revert operation)</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-8" d__=""><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb200-9" d__=""><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb200-10" d__=""><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb200-11" d__=""><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>      both modified:   foo.txt</span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-13" d__=""><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">So what we can do here is one of these:</p>
<ul>
<li d__="">Edit the file, fix the conflict, then <code s__="13">git add</code> it, then <code s__="13">git revert --continue</code> to go to the next commit to be reverted (if any).</li>
<li d__="">Bail out completely with <code s__="13">git revert --abort</code>.</li>
<li d__="">Skip reverting this particular commit with <code s__="13">git revert --skip</code>. If you skip all the commits you were reverting, it’s just like an abort.</li>
</ul>
<p d__="">If you fix the conflict, you’ll get to enter a commit message for the new commit just like before.</p>
<h2 data-number="18.3" id="reverting-multiple-commits" d__=""><span class="header-section-number">18.3</span> Reverting Multiple Commits</h2>
<p></p>
<p d__="">You can specify multiple reverts at the same time on the command line.</p>
<p d__="">Here’s an example that reverts two commits:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb201-1" d__=""><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>$ git revert 4c0b3 81d2a</span>
<span id="cb201-2" d__=""><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb201-3" d__=""><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>  [main ab3169d] Revert "Added Line 50"</span>
<span id="cb201-4" d__=""><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span>
<span id="cb201-5" d__=""><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb201-6" d__=""><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>  [main b63f003] Revert "Added Line 10"</span>
<span id="cb201-7" d__=""><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span></code></pre></div>
<p d__="">And there will be two new revert commits after that. You’ll edit two revert commit messages over the course of that revert.</p>
<p d__="">You can also specify a range of commits. Be sure to do this in oldest-to-newest order, or you’ll get an <code s__="13">empty commit set passed</code> error.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb202-1" d__=""><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>$ git revert 4c0b3^..81d2a</span>
<span id="cb202-2" d__=""><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb202-3" d__=""><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>  [main ab3169d] Revert "Added Line 50"</span>
<span id="cb202-4" d__=""><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span>
<span id="cb202-5" d__=""><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb202-6" d__=""><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>  [main b63f003] Revert "Added Line 10"</span>
<span id="cb202-7" d__=""><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span></code></pre></div>
<p d__="">Again, that will make a lot of commits, one per revert. You can <a href="#squashing-commits" d__="">squash those commits</a> if you want to, or you can use <code s__="13">-n</code> (“no commit”) to keep Git from committing until you’re ready.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb203-1" d__=""><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>$ git revert -n ee71e 123e8</span>
<span id="cb203-2" d__=""><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb203-3" d__=""><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span></code></pre></div>
<p d__="">At this point, the file is staged with those two commits 
reverted. And you can now make a single commit that holds them. And you 
can do the same thing specifying a range.</p>
<p d__="">Of course, there might a conflict, and you’ll have to resolve those in the super fun way we’ve already discussed.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="19" id="reset-moving-branches-around" d__=""><span class="header-section-number">19</span> Reset: Moving Branches Around</h1>
<p></p>
<p d__="">Before we begin, using <code s__="13">git reset</code> <strong><em>rewrites history</em></strong>.
 This means that you shouldn’t use it on any branches that other people 
might have copies of, i.e.&nbsp;branches that you have pushed.</p>
<p d__="">Of course, this is a highly-recommended guideline, not a rule,
 and you can reset anything provided you know what you’re doing and have
 good communication with your team.</p>
<p d__="">But if you never reset a branch you haven’t pushed, you won’t get into trouble.</p>
<p d__="">So what is it?</p>
<p d__="">Doing a reset allows you change where the <code s__="13">HEAD</code> and your current branch point to. You can move your current branch to a different commit!</p>
<p d__="">When you move a branch to another commit, the branch “becomes”
 the repo at the point of that commit, including all the history that 
led up to that commit. The upshot is that all the commits that led to 
the old branch point are now effectively gone, as shown in Figure 18.1.</p>
<figure>
<embed src="Beej's%20Guide%20to%20Git_files/img_150_010.svg" title="If we reset main to commit 2, commits 3 and 4 will eventually be lost.">
<figcaption aria-hidden="true" s__="14" d__="">If we reset <code s__="13">main</code> to commit <em>2</em>, commits <em>3</em> and <em>4</em> will eventually be lost.</figcaption>
</figure>
<p d__="">So be sure you mean it when you reset! You’ll be losing commits<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup s__="13" d__="">25</sup></a>!</p>
<p d__="">When doing a reset, you can ask Git to move the current branch
 to another commit, or to another branch, or to anything else that 
identifies a commit.</p>
<p d__="">Now, there is a question of what happens to the <em>difference</em> between your working tree at the old commit and whatever it would be at the new commit.</p>
<p d__="">And there we have some options: <strong><em>soft reset</em></strong>, <strong><em>mixed reset</em></strong>, and <strong><em>hard reset</em></strong>.</p>
<p d__="">And which you choose controls what happens to the branch, the stage, and the working tree.</p>
<p d__="">Note: in the following examples, I’m going to use the term “old commit” to refer to where the branch was <em>before</em> the reset, and “new commit” to refer to where it will be <em>after</em> the reset.</p>
<p d__="">With all three variants, the current branch moves to the new (specified) commit.</p>
<p d__="">The summary of differences is:</p>
<ul>
<li d__=""><strong>Soft</strong>:
<ul>
<li>Stage: old commit</li>
<li>Working tree: old commit</li>
</ul></li>
<li d__=""><strong>Mixed</strong>:
<ul>
<li>Stage: new commit</li>
<li>Working tree: old commit</li>
</ul></li>
<li d__=""><strong>Hard</strong>:
<ul>
<li>Stage: new commit</li>
<li>Working tree: new commit</li>
</ul></li>
</ul>
<h2 data-number="19.1" id="soft-reset" d__=""><span class="header-section-number">19.1</span> Soft Reset</h2>
<p></p>
<p d__="">When you run a <code s__="13">git reset --soft</code>, this 
resets the current branch to point to the given commit, and makes the 
stage and working tree both have the changes that were present in the 
old commit.</p>
<p d__="">The upshot is that <code s__="13">git status</code> will show your old commit’s changes as staged, and none of the files as modified.</p>
<p d__="">In other words, you’ll see the old state of your files on the stage ready to commit.</p>
<p d__="">A common use for this might be to collapse some of your previous commits similar to what we did with <a href="#squashing-commits" d__="">rebase and squashing commits</a>.</p>
<p d__="">Let’s say we have commits like this (pretend the numbers are the commit hashes):</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb204-1" d__=""><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>commit 555 (HEAD -&gt; main)</span>
<span id="cb204-2" d__=""><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>   Fixed another typo again</span>
<span id="cb204-3" d__=""><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>commit 444</span>
<span id="cb204-4" d__=""><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>   Fixed another typo</span>
<span id="cb204-5" d__=""><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>commit 333</span>
<span id="cb204-6" d__=""><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>   Fixed a typo</span>
<span id="cb204-7" d__=""><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>commit 222</span>
<span id="cb204-8" d__=""><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>   Implemented feature</span>
<span id="cb204-9" d__=""><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a>commit 111</span>
<span id="cb204-10" d__=""><a href="#cb204-10" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p d__="">That’s a gnarly-looking commit history. It would be nice to rewrite it (<em>but if and only if you haven’t pushed it yet!</em>).</p>
<p d__="">We can do that with a soft reset back to commit <code s__="13">111</code>.</p>
<p d__="">If we do this soft reset:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb205-1" d__=""><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>$ git reset --soft 111   # Again, pretend 111 is the commit hash</span></code></pre></div>
<p d__="">We’ll then be in this point with all the other commits gone…</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb206-1" d__=""><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>commit 111 (HEAD -&gt; main)</span>
<span id="cb206-2" d__=""><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p d__=""><strong>Except importantly</strong> our files <em>as they existed in commit 555</em>
 will now be staged and ready to commit. That means with the soft reset 
the changes weren’t lost, but effectively commits 222-555 are all 
squished together on the stage.</p>
<p d__="">So we commit them:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb207-1" d__=""><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m "Implemented feature"</span></code></pre></div>
<p d__="">And now we’re here with a nice commit history:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb208-1" d__=""><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>commit 222 (HEAD -&gt; main)</span>
<span id="cb208-2" d__=""><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>   Implemented feature</span>
<span id="cb208-3" d__=""><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a>commit 111</span>
<span id="cb208-4" d__=""><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p d__="">And now, finally we can push, happy that our changes are presentable to the general public.</p>
<blockquote>
<p d__=""><strong>Again, we’ve rewritten history here.</strong> Don’t do this if you’ve already pushed those commits past the one you’re resetting to.</p>
</blockquote>
<h2 data-number="19.2" id="mixed-reset" d__=""><span class="header-section-number">19.2</span> Mixed Reset</h2>
<p></p>
<p d__="">When you run a <code s__="13">git reset --mixed</code><a href="#fn26" class="footnote-ref" id="fnref26" role="doc-noteref"><sup s__="13" d__="">26</sup></a>, this resets the current branch to point to the given commit, and it modifies the stage to that commit, and it <strong>doesn’t</strong> change your working tree.</p>
<p d__="">The upshot is that it will show files as “modified” with the changes of the old commit, and there will be nothing on the stage.</p>
<p d__="">Now, thinking about this, since the branch has moved to a 
commit with your files in one state, but your working tree has the files
 in another state, the files must be <em>modified</em> with respect to the commit the branch now points to.</p>
<p d__="">And this is what happens. Your changes at the old commit will show up as modified files at the current commit.</p>
<p d__="">It’s like the soft reset, except instead of the old commit 
ending up on the stage, it ends up in the working tree. You can stage it
 and commit it from here.</p>
<p d__="">But that’s not all! Since the stage is also updated to the new commit, it means the stage is effectively emptied.</p>
<p d__="">In fact, this is the classic use for a mixed reset: <code s__="13">git reset HEAD</code>. This moves files from staged state back to modified state.</p>
<blockquote>
<p d__=""><strong>In the glorious future past, a new command was introduced to do this</strong>: <code s__="13">git restore --staged</code>. That’s the preferred method to use now.</p>
</blockquote>
<p d__="">This will reset the current branch to where it already was (assuming <code s__="13">HEAD</code>
 points to the current branch), and reset the stage to be the same as 
that commit. This unstages the files that were there. And it changes the
 working tree files to have the changes that were already present in 
those files at that point, which would be any changes you introduced.</p>
<p d__="">And that unstages the files!</p>
<p d__="">Another use might be if you want to squash a bunch of unpushed
 commits but simply don’t want to stage the changes at the old commit 
yet, leaving them as modified.</p>
<h2 data-number="19.3" id="hard-reset" d__=""><span class="header-section-number">19.3</span> Hard Reset</h2>
<p></p>
<p d__="">This resets everything to a particular commit. The branch 
moves there. The stage is set to that commit. The files in the working 
tree are set to that commit. All changes since that commit are lost.</p>
<p d__="">Use this if you want to bail out. You’ve made some commits and
 decided that was the wrong way, and you want to just roll them back 
entirely.</p>
<p><strong d__="">Again, only do this if you haven’t pushed!</strong></p>
<p d__="">If you do a hard reset, it will simply move the branch and 
reset your entire world (as it pertains to that branch) to that point as
 if nothing had happened since. <code s__="13">git status</code> will report that everything is clean.</p>
<h2 data-number="19.4" id="reset-to-a-divergent-branch" d__=""><span class="header-section-number">19.4</span> Reset to a Divergent Branch</h2>
<p d__="">In the above examples, we’ve been resetting to a direct ancestor of our current commit. This is the common case for using <code s__="13">git reset</code>.</p>
<p d__="">But there’s no reason why you couldn’t reset to an entirely 
different divergent branch. It just moves the branch there with exactly 
the same rules for soft, mixed, and hard that we’ve already covered.</p>
<h2 data-number="19.5" id="resetting-files" d__=""><span class="header-section-number">19.5</span> Resetting Files</h2>
<p d__="">So far, we’ve been just doing resets on a commit-by-commit 
basis. But we could also do mixed resets with specific files. We can’t 
do hard or soft resets with specific files, though—sorry!</p>
<p d__="">For example, we can do a mixed reset to unstage a single file.</p>
<p d__="">Let’s say we’re here:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb209-1" d__=""><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb209-2" d__=""><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb209-3" d__=""><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb209-4" d__=""><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb209-5" d__=""><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>      modified:   bar.txt</span>
<span id="cb209-6" d__=""><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">And we want to reset <code s__="13">foo.txt</code> off the stage, but leave <code s__="13">bar.txt</code> on there.</p>
<blockquote>
<p d__=""><strong>Again, we’d use <code s__="13">git restore --staged</code> in these modern times.</strong> But we’re going to press on here for the sake of example.</p>
</blockquote>
<p d__="">So let’s specify just that file:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb210-1" d__=""><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>$ git reset foo.txt</span>
<span id="cb210-2" d__=""><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>  Unstaged changes after reset:</span>
<span id="cb210-3" d__=""><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a>  M    foo.txt</span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-5" d__=""><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb210-6" d__=""><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb210-7" d__=""><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb210-8" d__=""><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb210-9" d__=""><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a>      modified:   bar.txt</span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-11" d__=""><a href="#cb210-11" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb210-12" d__=""><a href="#cb210-12" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb210-13" d__=""><a href="#cb210-13" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working</span>
<span id="cb210-14" d__=""><a href="#cb210-14" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb210-15" d__=""><a href="#cb210-15" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">And there you have it.</p>
<h2 data-number="19.6" id="pushing-branch-changes-to-a-remote" d__=""><span class="header-section-number">19.6</span> Pushing Branch Changes to a Remote</h2>
<p></p>
<p d__="">Let’s say you’ve made a mess of things somehow and you have to
 reset a branch that you’ve already pushed commits on. That is, you have
 to rewrite a public history.</p>
<p d__=""><strong><em>First: get good communication with the team.</em></strong> They’re going to make fun of you for sure, but at least they won’t hate you<a href="#fn27" class="footnote-ref" id="fnref27" role="doc-noteref"><sup s__="13" d__="">27</sup></a>.</p>
<blockquote>
<p d__=""><strong><em>Never do a forced push without completely understanding </em>why<em> you’re doing it.</em></strong>
 Git is trying to stop you from doing a push for a reason: your own 
good! Everyone else who has cloned the repo will very likely be impacted
 and they need to be informed. Everybody. We use it here to demonstrate 
when it is necessary.</p>
</blockquote>
<p d__="">Our process will be something like this:</p>
<ol type="1">
<li d__="">Do the reset.</li>
<li d__="">Do a forced push to your remote. For your protection, Git 
won’t push in this circumstance. You have to override with a forced 
push.</li>
</ol>
<p d__="">Your coworkers will do something like this:</p>
<ol type="1">
<li d__="">Do a <code s__="13">git fetch</code> to get the new branch position from the remote.</li>
<li d__="">Stash or commit any local changes they need to preserve.</li>
<li d__="">Maybe make a new branch at the old branch point in case they need to return to see old soon-to-be-obliterated commits.</li>
<li d__="">Do a reset of the branch in question to the remote branch commit. For example, if we’re resetting the <code s__="13">main</code> branch, you would <code s__="13">git reset --hard origin/main</code>.</li>
<li d__="">Pop their changes from the stash, if any.</li>
<li d__="">Maybe apply earlier commits that got obliterated<a href="#fn28" class="footnote-ref" id="fnref28" role="doc-noteref"><sup s__="13" d__="">28</sup></a>.</li>
</ol>
<p d__="">Note that your coworkers don’t necessarily need to do a hard reset; they could do a mixed reset, for instance.</p>
<h3 data-number="19.6.1" id="forcing-the-push" d__=""><span class="header-section-number">19.6.1</span> Forcing the Push</h3>
<p></p>
<p d__="">We have basically two options to use with <code s__="13">git push</code> here:</p>
<ol type="1">
<li d__=""><code s__="13">--force</code>: Just push the new branch position, <a href="https://en.wikipedia.org/wiki/Battle_of_Mobile_Bay#%22Damn_the_torpedoes%22" d__="">damn the torpedoes</a><a href="#fn29" class="footnote-ref" id="fnref29" role="doc-noteref"><sup s__="13" d__="">29</sup></a>.</li>
<li d__=""><code s__="13">--force-with-lease</code>: Only force push if the remote branch’s position is what we expect. In other words, <strong>don’t</strong>
 force push if someone else has pushed a new commit in the meantime. 
This is a good safety measure because no one should have pushed a new 
commit in the meantime since you’ve been in communication with your team
 about this. <strong><em>Right?</em></strong></li>
</ol>
<p d__="">If you try to <code s__="13">--force-with-lease</code> and someone else has pushed another commit to this branch in the meantime, you’ll be presented with an error:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb211-1" d__=""><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>$ git push --force-with-lease</span>
<span id="cb211-2" d__=""><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>  To git@github.com:user/repo.git</span>
<span id="cb211-3" d__=""><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>   ! [rejected]        main -&gt; main (stale info)</span>
<span id="cb211-4" d__=""><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a>  error: failed to push some refs to 'git@github.com:user/repo.git'</span></code></pre></div>
<p d__="">If that happens, you’ll have to talk to your team to get them 
to stop, and then pull the changes, make sure everyone is on board with 
the new reset, and then start again.</p>
<p d__="">We’ll use <code s__="13">--force-with-lease</code> in our example.</p>
<h3 data-number="19.6.2" id="example-rewrite-public-history" d__=""><span class="header-section-number">19.6.2</span> Example: Rewrite Public History</h3>
<p d__="">First, let’s play the part of the person who is rewriting the public history.</p>
<p d__=""><strong><em>The very first thing I’m going to do is coordinate with the team.</em></strong> If you’re already past this point, do it <strong>right now</strong>.</p>
<p d__="">Then we’ll start the rewrite. We’ll be on the <code s__="13">main</code>
 branch for this demo. Let’s reset to an earlier commit, and we’ll 
assume that these commits we’re resetting past are already public and 
other team members already have them.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb212-1" d__=""><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>$ git reset --hard 4849e6</span>
<span id="cb212-2" d__=""><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>  HEAD is now at 4849e65 added line 3</span></code></pre></div>
<p d__="">So far no harm, but now we’re going to push this history change to our origin. And we’ll use <code s__="13">--force-with-lease</code> for safety.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb213-1" d__=""><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>$ git push --force-with-lease</span>
<span id="cb213-2" d__=""><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>  To git@github.com:user/repo.git</span>
<span id="cb213-3" d__=""><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>   + a2b7ac3...ce44516 main -&gt; main (forced update)</span></code></pre></div>
<p d__="">Now we’ve publicly rewritten history. Tell the team, which 
you’ve been in contact with this entire time, that you’ve done so. And 
they can begin to fix up their clones with much grumbling.</p>
<h3 data-number="19.6.3" id="example-receiving-rewritten-history" d__=""><span class="header-section-number">19.6.3</span> Example: Receiving Rewritten History</h3>
<p d__="">You’ve just received word from your coworker that public history on the <code s__="13">main</code> branch has been rewritten and pushed to the remote, which we’ll assume is <code s__="13">origin</code> for this example.</p>
<p d__="">First thing we should do is make sure we’re all backed up in whatever manner we need.</p>
<p d__="">Perhaps a commit of the latest stuff:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb214-1" d__=""><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>$ git add [all files]</span>
<span id="cb214-2" d__=""><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>$ git commit -m "last commit before public reset"</span></code></pre></div>
<p d__="">Or a stash if we’re not ready to commit:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb215-1" d__=""><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>$ git stash</span></code></pre></div>
<p d__="">And perhaps make a new branch right here so we can revisit the old state of affairs for reference if we have to:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb216-1" d__=""><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>$ git branch oldmain</span></code></pre></div>
<p d__="">And now it’s time for action. We need to fetch the new branch information.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb217-1" d__=""><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>$ git fetch origin</span>
<span id="cb217-2" d__=""><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>  From git@github.com:user/repo.git</span>
<span id="cb217-3" d__=""><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>   + e7b133a...521a873 main       -&gt; origin/main  (forced update)</span></code></pre></div>
<p d__="">We just fetched, so our clone doesn’t look different to us yet. But let’s put an end to that and get on the same page as <code s__="13">origin</code>. This involves resetting our local <code s__="13">main</code> to be the same as it is on the remote tracking branch <code s__="13">origin/main</code>. (Remember the latter has been force pushed to a different commit, and we want our <code s__="13">main</code> to point to that commit, as well.)</p>
<p d__="">Assuming we’re on branch <code s__="13">main</code> right now:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb218-1" d__=""><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>$ git reset --hard origin/main</span></code></pre></div>
<p d__="">And now we’re on the same page as <code s__="13">origin</code>.</p>
<p d__="">If we had stashed things, let’s try to get them back, resolving any conflicts as per usual:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb219-1" d__=""><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>$ git stash pop</span></code></pre></div>
<p d__="">And if you want to refer to any old commits and you set up the <code s__="13">oldmain</code> branch as above, you can <code s__="13">git switch oldmain</code> to examine them, and maybe use something like <code s__="13">git cherry-pick</code> to bring in any functionality you need.</p>
<h2 data-number="19.7" id="resetting-without-moving-head" d__=""><span class="header-section-number">19.7</span> Resetting Without Moving <code>HEAD</code></h2>
<p></p>
<p d__="">Using the reset feature moves the <code s__="13">HEAD</code> around by necessity. What if you just want to move a branch to another commit but leave <code s__="13">HEAD</code> alone?</p>
<p d__="">It can be done! But you can’t do it with a branch you have 
checked out right now. So either detach the head or attach it to a 
different branch.</p>
<p d__="">Instead of using <code s__="13">git reset</code> to do this, we’ll use <code s__="13">git branch</code>. Here’s an example:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb220-1" d__=""><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>$ git switch topic1</span>
<span id="cb220-2" d__=""><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>  Switched to branch 'topic1'</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-4" d__=""><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb220-5" d__=""><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>  commit 97c4da49eda8de7b273003515a660945c (HEAD -&gt; topic1)</span>
<span id="cb220-6" d__=""><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb220-7" d__=""><a href="#cb220-7" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Aug 1 14:22:39 2024 -0700</span>
<span id="cb220-8"><a href="#cb220-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-9" d__=""><a href="#cb220-9" aria-hidden="true" tabindex="-1"></a>      fix a third typo</span>
<span id="cb220-10"><a href="#cb220-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-11" d__=""><a href="#cb220-11" aria-hidden="true" tabindex="-1"></a>$ git branch --force main</span>
<span id="cb220-12" d__=""><a href="#cb220-12" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb220-13" d__=""><a href="#cb220-13" aria-hidden="true" tabindex="-1"></a>  commit 97c4da49eda8de7b273003515a660945c (HEAD -&gt; topic1, main)</span>
<span id="cb220-14" d__=""><a href="#cb220-14" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb220-15" d__=""><a href="#cb220-15" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Aug 1 14:22:39 2024 -0700</span>
<span id="cb220-16"><a href="#cb220-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-17" d__=""><a href="#cb220-17" aria-hidden="true" tabindex="-1"></a>      fix a third typo</span></code></pre></div>
<p d__="">See what happened to <code s__="13">main</code>? It moved to the current commit! You can see it in the output for the second <code s__="13">git log</code>.</p>
<p d__="">You could also specify a destination for <code s__="13">main</code> as a second argument if you wanted it to move somewhere other than your current location.</p>
<h2 data-number="19.8" id="resetting-to-remove-credentials" d__=""><span class="header-section-number">19.8</span> Resetting to Remove Credentials</h2>
<p d__="">Did you accidentally commit some secret password into your repo? Can you use <code s__="13">git reset</code> to back out of that commit?</p>
<ul>
<li d__="">Have you pushed? Then <strong>NO</strong>. Your password is out in the wild. Change it now and never make that mistake again.</li>
<li d__="">Have you <em>not yet</em> pushed? <strong>Yes</strong>. You 
can do it. But keep in mind the commit containing the password will 
remain in your local repo until it is garbage collected.</li>
</ul>
<p d__="">If the answer was yes, you might find <code s__="13">git reset -p</code> useful to selectively reset parts of commits, something we’ll cover in a later chapter.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="20" id="the-reference-log-reflog" d__=""><span class="header-section-number">20</span> The Reference Log, “reflog”</h1>
<p></p>
<p d__="">All this time you’ve been committing things, branching, doing 
whatever. And Git’s been watching you, listening like Big Brother, 
recording everything you do.</p>
<p d__="">And you can use this to your benefit.</p>
<p d__="">Let’s say you’ve done something like a hard reset because you wanted to abandon the branch you were on.</p>
<p d__="">But then, wait! You actually needed something from one of 
those commits you just reset past! Is there any way to get back to it? 
There’s no branch there, and you can’t remember the commit ID. And since
 it’s not an ancestor to anything, <code s__="13">git log</code> won’t help you.</p>
<p d__="">How can you get it back?</p>
<p d__=""><code s__="13">git reflog</code> to the rescue!</p>
<p d__="">The reflog contains a record of all manner of things you’ve done along with commit IDs, and it keeps them for 90 days<a href="#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup s__="13" d__="">30</sup></a>. After that time, orphan commits (that is commits with no branch above them) will be garbage collected.</p>
<h2 data-number="20.1" id="what-can-we-use-it-for" d__=""><span class="header-section-number">20.1</span> What Can We Use It For?</h2>
<p d__="">You can use it for all kinds of things.</p>
<ul>
<li d__="">Looking at orphan commits</li>
<li d__="">Recreating deleted branches</li>
<li d__="">Recovering from a bad reset</li>
<li d__="">Exploring the order of operations on the repo, even if they’re on other branches</li>
<li d__="">And more!</li>
</ul>
<p d__="">Basically it gives you a way to look back on the linear history of the repo, and tells you the commit UUIDs along the way.</p>
<p d__="">This means if you want to, say, hard reset the repo to some earlier state, you could look up that earlier commit in the reflog<a href="#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup s__="13" d__="">31</sup></a>.</p>
<h2 data-number="20.2" id="looking-back-at-an-orphan-commit" d__=""><span class="header-section-number">20.2</span> Looking Back at an Orphan Commit</h2>
<p d__="">Let’s run an example where we do the following:</p>
<ol type="1">
<li d__="">Commit a file, <code s__="13">foo.txt</code>, on the <code s__="13">main</code> branch.</li>
<li d__="">Make a new branch, <code s__="13">topic1</code>.</li>
<li d__="">In this new branch, add another file, <code s__="13">bar.txt</code>, and commit it.</li>
<li d__="">Modify <code s__="13">bar.txt</code> and commit the modification.</li>
<li d__="">Decide, at this point, you’re giving up on <code s__="13">topic1</code>. Switch back to the <code s__="13">main</code> branch and force delete <code s__="13">topic1</code>.</li>
<li d__="">Decide, at this point, that actually you need to look back at that commit in <code s__="13">topic1</code> for some reason. But you deleted the branch. Whoops.</li>
<li d__="">Look in the reflog for the commit on <code s__="13">topic1</code> that you want.</li>
<li d__="">Switch to that commit (detaching the <code s__="13">HEAD</code>).</li>
</ol>
<p d__="">And here that is in Git, at least the first five steps:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb221-1" d__=""><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>$ echo 'Line 1' &gt; foo.txt                  # Create foo.txt</span>
<span id="cb221-2" d__=""><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>$ git add foo.txt</span>
<span id="cb221-3" d__=""><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>$ git commit -m 'added foo.txt'</span>
<span id="cb221-4" d__=""><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>  [main (root-commit) 90bd7cc] added foo.txt</span>
<span id="cb221-5" d__=""><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion($)</span>
<span id="cb221-6" d__=""><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>   create mode 100644 foo.txt</span>
<span id="cb221-7" d__=""><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>$ git switch -c topic1                     # Switch to topic1</span>
<span id="cb221-8" d__=""><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a>  Switched to a new branch 'topic1'</span>
<span id="cb221-9" d__=""><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a>$ echo 'Line 1' &gt; bar.txt                  # Create bar.txt</span>
<span id="cb221-10" d__=""><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a>$ git add bar.txt</span>
<span id="cb221-11" d__=""><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a>$ git commit -m 'added bar.txt'</span>
<span id="cb221-12" d__=""><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a>  [topic1 4219f83] added bar.txt</span>
<span id="cb221-13" d__=""><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion($)</span>
<span id="cb221-14" d__=""><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a>   create mode 100644 bar.txt</span>
<span id="cb221-15" d__=""><a href="#cb221-15" aria-hidden="true" tabindex="-1"></a>$ echo 'Line 2' &gt;&gt; bar.txt                 # Modify bar.txt</span>
<span id="cb221-16" d__=""><a href="#cb221-16" aria-hidden="true" tabindex="-1"></a>$ git add bar.txt</span>
<span id="cb221-17" d__=""><a href="#cb221-17" aria-hidden="true" tabindex="-1"></a>$ git commit -m 'appended to bar.txt'</span>
<span id="cb221-18" d__=""><a href="#cb221-18" aria-hidden="true" tabindex="-1"></a>  [topic1 bf8b8cf] appended to bar.txt</span>
<span id="cb221-19" d__=""><a href="#cb221-19" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion($)</span>
<span id="cb221-20" d__=""><a href="#cb221-20" aria-hidden="true" tabindex="-1"></a>$ git switch -                             # Switch back to main</span>
<span id="cb221-21" d__=""><a href="#cb221-21" aria-hidden="true" tabindex="-1"></a>  Switched to branch 'main'</span>
<span id="cb221-22" d__=""><a href="#cb221-22" aria-hidden="true" tabindex="-1"></a>$ git branch -D topic1                     # Delete topic1</span>
<span id="cb221-23" d__=""><a href="#cb221-23" aria-hidden="true" tabindex="-1"></a>  Deleted branch topic1 (was bf8b8cf).</span></code></pre></div>
<p d__="">At this point let’s say we want to look back at the commits we made on <code s__="13">bar.txt</code>. Good luck with <code s__="13">git log</code>!</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb222-1" d__=""><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb222-2" d__=""><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>commit 90bd7cc6c3c530798872827ba02cb7db4fd422c2 (HEAD -&gt; main)</span>
<span id="cb222-3" d__=""><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>Author: User &lt;user@example.com&gt;</span>
<span id="cb222-4" d__=""><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a>Date:   Fri Oct 4 16:24:56 2024 -0700</span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-6" d__=""><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a>    added foo.txt</span></code></pre></div>
<p d__="">That’s it? Where’s all the <code s__="13">bar.txt</code> stuff? Well, it was on the <code s__="13">topic1</code> commits, which were descendants from this commit <code s__="13">90bd7</code>. Because <code s__="13">git log</code> only shows ancestors, we’re not seeing any of the <code s__="13">bar.txt</code> changes.</p>
<p d__="">So, finally, we arrive at the entire topic of this chapter: the reflog. Let’s take a peek.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb223-1" d__=""><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>$ git reflog</span>
<span id="cb223-2" d__=""><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>  90bd7cc (HEAD -&gt; main) HEAD@{0}: checkout: moving from topic1 to</span>
<span id="cb223-3" d__=""><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>                                             main</span>
<span id="cb223-4" d__=""><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>  bf8b8cf HEAD@{1}: commit: appended to bar.txt</span>
<span id="cb223-5" d__=""><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>  4219f83 HEAD@{2}: commit: added bar.txt</span>
<span id="cb223-6" d__=""><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>  90bd7cc (HEAD -&gt; main) HEAD@{3}: checkout: moving from main to</span>
<span id="cb223-7" d__=""><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>                                             topic1</span>
<span id="cb223-8" d__=""><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>  90bd7cc (HEAD -&gt; main) HEAD@{4}: commit (initial): added foo.txt</span></code></pre></div>
<p d__="">Hey, that’s more like it! I see the changes I made to <code s__="13">bar.txt</code> in there! And I see the commit UUID on the left! This means I can switch to that commit!</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb224-1" d__=""><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach bf8b8cf</span>
<span id="cb224-2" d__=""><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>  HEAD is now at bf8b8cf appended to bar.txt</span>
<span id="cb224-3" d__=""><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb224-4" d__=""><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>  commit bf8b8cf826bbf667cdd088cfcecbc1086c24de3b (HEAD)</span>
<span id="cb224-5" d__=""><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>  Author: Brian "Beej Jorgensen" Hall &lt;beej@beej.us&gt;</span>
<span id="cb224-6" d__=""><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>  Date:   Fri Oct 4 16:24:56 2024 -0700</span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-8" d__=""><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a>      appended to bar.txt</span>
<span id="cb224-9"><a href="#cb224-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-10" d__=""><a href="#cb224-10" aria-hidden="true" tabindex="-1"></a>  commit 4219f83f22f8a90cb8d57128501facb58b292003</span>
<span id="cb224-11" d__=""><a href="#cb224-11" aria-hidden="true" tabindex="-1"></a>  Author: Brian "Beej Jorgensen" Hall &lt;beej@beej.us&gt;</span>
<span id="cb224-12" d__=""><a href="#cb224-12" aria-hidden="true" tabindex="-1"></a>  Date:   Fri Oct 4 16:24:56 2024 -0700</span>
<span id="cb224-13"><a href="#cb224-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-14" d__=""><a href="#cb224-14" aria-hidden="true" tabindex="-1"></a>      added bar.txt</span>
<span id="cb224-15"><a href="#cb224-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-16" d__=""><a href="#cb224-16" aria-hidden="true" tabindex="-1"></a>  commit 90bd7cc6c3c530798872827ba02cb7db4fd422c2 (main)</span>
<span id="cb224-17" d__=""><a href="#cb224-17" aria-hidden="true" tabindex="-1"></a>  Author: Brian "Beej Jorgensen" Hall &lt;beej@beej.us&gt;</span>
<span id="cb224-18" d__=""><a href="#cb224-18" aria-hidden="true" tabindex="-1"></a>  Date:   Fri Oct 4 16:24:56 2024 -0700</span>
<span id="cb224-19"><a href="#cb224-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-20" d__=""><a href="#cb224-20" aria-hidden="true" tabindex="-1"></a>      added foo.txt</span></code></pre></div>
<p d__="">There’s the log… and we have the file contents?</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb225-1" d__=""><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>$ cat bar.txt</span>
<span id="cb225-2" d__=""><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>  Line 1</span>
<span id="cb225-3" d__=""><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>  Line 2</span></code></pre></div>
<p d__="">Yup!</p>
<p d__="">Let’s switch back to <code s__="13">main</code> and see what happens.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb226-1" d__=""><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>$ git switch -</span>
<span id="cb226-2" d__=""><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>  Warning: you are leaving 2 commits behind, not connected to</span>
<span id="cb226-3" d__=""><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>  any of your branches:</span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-5" d__=""><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>    bf8b8cf appended to bar.txt</span>
<span id="cb226-6" d__=""><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a>    4219f83 added bar.txt</span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-8" d__=""><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a>  If you want to keep them by creating a new branch, this may be a good</span>
<span id="cb226-9" d__=""><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a>  time to do so with:</span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-11" d__=""><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a>    git branch &lt;new-branch-name&gt; bf8b8cf</span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-13" d__=""><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a>  Switched to branch 'main'</span></code></pre></div>
<p d__="">This is Git telling us, “Hey, I’m going to garbage collect 
these two commits after the 90 days are up. If you want to keep them, 
attach a branch to them.”</p>
<p d__="">And it’s helpfully telling us how to do that.</p>
<p d__="">So even though we force deleted <code s__="13">topic1</code> earlier, we could now simply recreate it if we didn’t mean to do that. Let’s do that.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb227-1" d__=""><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>$ git branch topic1 bf8b8cf</span>
<span id="cb227-2" d__=""><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>$ git switch topic1</span>
<span id="cb227-3" d__=""><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>  Switched to branch 'topic1'</span>
<span id="cb227-4" d__=""><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>$ cat bar.txt</span>
<span id="cb227-5" d__=""><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>  Line 1</span>
<span id="cb227-6" d__=""><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>  Line 2</span></code></pre></div>
<p d__="">As you can see, the reflog can get you out of all kinds of trouble when you thought you’d lost commits for good.</p>
<h2 data-number="20.3" id="reflog-selectors" d__=""><span class="header-section-number">20.3</span> Reflog Selectors</h2>
<p></p>
<p d__="">Let’s take a look at that example reflog output again:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb228-1" d__=""><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>$ git reflog</span>
<span id="cb228-2" d__=""><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>  598c84e (HEAD -&gt; main) HEAD@{0}: checkout: moving from topic1 to</span>
<span id="cb228-3" d__=""><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>                                             main</span>
<span id="cb228-4" d__=""><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>  dc3d6a3 HEAD@{1}: commit: appended to bar.txt</span>
<span id="cb228-5" d__=""><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>  0789880 HEAD@{2}: commit: added bar.txt</span>
<span id="cb228-6" d__=""><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>  598c84e (HEAD -&gt; main) HEAD@{3}: checkout: moving from main to</span>
<span id="cb228-7" d__=""><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a>                                             topic1</span>
<span id="cb228-8" d__=""><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a>  598c84e (HEAD -&gt; main) HEAD@{4}: commit (initial): added foo.txt</span></code></pre></div>
<p d__="">See that <code s__="13">HEAD@{3}</code>-type stuff in there? You can use those to check out specific commits (instead of using the UUID, for example).</p>
<p d__="">Now, <code s__="13">HEAD@{3}</code> <strong>doesn’t</strong> mean “3 commits before <code s__="13">HEAD</code>”. But it is an identifier you can use to switch to a particular commit.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb229-1" d__=""><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>$ git switch --detach HEAD@{1}</span>
<span id="cb229-2" d__=""><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>  HEAD is now at dc3d6a3 appended to bar.txt</span></code></pre></div>
<p d__="">Just like that.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="21" id="patch-mode-applying-partial-changes" d__=""><span class="header-section-number">21</span> Patch Mode: Applying Partial Changes</h1>
<p></p>
<p d__="">A lot of Git commands obey the <code s__="13">-p</code> switch that puts them in <strong><em>patch mode</em></strong>. This is a powerful mode that allows you to select <em>some</em> of the changes for a particular command, but not <em>all</em> of the changes.</p>
<p d__="">Commands that use <code s__="13">-p</code> include <code s__="13">add</code>, <code s__="13">reset</code>, <code s__="13">stash</code>, <code s__="13">restore</code>, <code s__="13">commit</code>, and more.</p>
<p d__="">Basically any time you have changes to a file and you’re thinking, “I want to do something with just <em>some</em> of these changes”, patch mode will help you out.</p>
<p d__="">Some terminology: Git calls a collection of close changes a <em>hunk</em>. An example might be if you modified function <code s__="13">foo()</code> by adding a few lines and modified function <code s__="13">bar()</code> by adding a few lines, you would likely have two hunks, one for each group of changes.</p>
<p d__="">Patch mode allows you to select which hunks will be operated on.</p>
<h2 data-number="21.1" id="adding-files-in-patch-mode" d__=""><span class="header-section-number">21.1</span> Adding Files in Patch Mode</h2>
<p></p>
<p d__="">Let’s say you had a commit that added <code s__="13">Line 1</code> to <code s__="13">Line 8</code> in a file:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb230-1" d__=""><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb230-2" d__=""><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb230-3" d__=""><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb230-4" d__=""><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb230-5" d__=""><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb230-6" d__=""><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb230-7" d__=""><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb230-8" d__=""><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a>Line 8</span></code></pre></div>
<p d__="">And we make a couple changes, adding a line to the top and bottom:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb231-1" d__=""><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>Line BEGIN</span>
<span id="cb231-2" d__=""><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb231-3" d__=""><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb231-4" d__=""><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb231-5" d__=""><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb231-6" d__=""><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb231-7" d__=""><a href="#cb231-7" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb231-8" d__=""><a href="#cb231-8" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb231-9" d__=""><a href="#cb231-9" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb231-10" d__=""><a href="#cb231-10" aria-hidden="true" tabindex="-1"></a>Line END</span></code></pre></div>
<p d__="">And I’m about to add and commit, but I realize that I only want to add <code s__="13">Line BEGIN</code> at this time, and not <code s__="13">Line END</code>.</p>
<p d__="">If I did a regular <code s__="13">git add</code>, it would add both changes to the stage. But if I do <code s__="13">git add -p</code>, we can select one or the other. Let’s try it.</p>
<p d__="">First let’s have a look at our diff.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb232-1" d__=""><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>$ git diff</span>
<span id="cb232-2" d__=""><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/foo.txt b/foo.txt</span>
<span id="cb232-3" d__=""><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>  index a982fdc..125f6ac 100644</span>
<span id="cb232-4" d__=""><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>  --- a/foo.txt</span>
<span id="cb232-5" d__=""><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>  +++ b/foo.txt</span>
<span id="cb232-6" d__=""><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a>  @@ -1,3 +1,4 @@</span>
<span id="cb232-7" d__=""><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a>  +Line BEGIN</span>
<span id="cb232-8" d__=""><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a>   Line 1</span>
<span id="cb232-9" d__=""><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a>   Line 2</span>
<span id="cb232-10" d__=""><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a>   Line 3</span>
<span id="cb232-11" d__=""><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a>  @@ -6,3 +7,4 @@ Line 5</span>
<span id="cb232-12" d__=""><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a>   Line 6</span>
<span id="cb232-13" d__=""><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a>   Line 7</span>
<span id="cb232-14" d__=""><a href="#cb232-14" aria-hidden="true" tabindex="-1"></a>   Line 8</span>
<span id="cb232-15" d__=""><a href="#cb232-15" aria-hidden="true" tabindex="-1"></a>  +Line END</span></code></pre></div>
<p d__="">Poring over that, you see we’ve added <code s__="13">Line BEGIN</code> to the top and <code s__="13">Line END</code> to the bottom. (Recall that lines with <code s__="13">+</code> in front of them are additions in diff.)</p>
<p d__="">Now let’s do a patch add.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb233-1" d__=""><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>$ git add -p</span>
<span id="cb233-2" d__=""><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/foo.txt b/foo.txt</span>
<span id="cb233-3" d__=""><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>  index a982fdc..125f6ac 100644</span>
<span id="cb233-4" d__=""><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>  --- a/foo.txt</span>
<span id="cb233-5" d__=""><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a>  +++ b/foo.txt</span>
<span id="cb233-6" d__=""><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a>  @@ -1,3 +1,4 @@</span>
<span id="cb233-7" d__=""><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a>  +Line BEGIN</span>
<span id="cb233-8" d__=""><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a>   Line 1</span>
<span id="cb233-9" d__=""><a href="#cb233-9" aria-hidden="true" tabindex="-1"></a>   Line 2</span>
<span id="cb233-10" d__=""><a href="#cb233-10" aria-hidden="true" tabindex="-1"></a>   Line 3</span>
<span id="cb233-11" d__=""><a href="#cb233-11" aria-hidden="true" tabindex="-1"></a>  (1/2) Stage this hunk [y,n,q,a,d,j,J,g,/,e,p,?]? </span></code></pre></div>
<p d__="">Well, that’s a lot of options! The easy ones are <code s__="13">y</code> for “yes” and <code s__="13">n</code> for “no”. And also you can type <code s__="13">?</code> to get more detailed help.</p>
<p d__="">Also we see that this is hunk 1 of 2, which makes sense 
because we have one change at the top of the file and another at the 
bottom.</p>
<p d__="">In our case, we do want to keep this first hunk, so we’ll answer <code s__="13">y</code>.</p>
<p d__="">And then we get to hunk 2 of 2:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb234-1" d__=""><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>(1/2) Stage this hunk [y,n,q,a,d,j,J,g,/,e,p,?]? y</span>
<span id="cb234-2" d__=""><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>@@ -6,3 +7,4 @@ Line 5</span>
<span id="cb234-3" d__=""><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a> Line 6</span>
<span id="cb234-4" d__=""><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a> Line 7</span>
<span id="cb234-5" d__=""><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a> Line 8</span>
<span id="cb234-6" d__=""><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a>+Line END</span>
<span id="cb234-7" d__=""><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>(2/2) Stage this hunk [y,n,q,a,d,K,g,/,e,p,?]?</span></code></pre></div>
<p d__="">And for this one, I’m going to say <code s__="13">n</code> to not stage it. Then we’re back out to the shell prompt.</p>
<p d__="">Now I’m going to type <code s__="13">git status</code> to see where we are, but first I want you to think about what it’s going to tell us.</p>
<p d__="">We have one of the changes staged, and the other change not 
staged. What state are files in when they have unstaged changes? And 
when there are staged changes? We have both right now, right?</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb235-1" d__=""><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb235-2" d__=""><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb235-3" d__=""><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb235-4" d__=""><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb235-5" d__=""><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-7" d__=""><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb235-8" d__=""><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb235-9" d__=""><a href="#cb235-9" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working directory)</span>
<span id="cb235-10" d__=""><a href="#cb235-10" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">Sure enough! Because we only did a partial add of the changes 
in the file, the added changes are on the stage, and the not-added 
changes are still out in the working directory. It <em>has</em> to be this way because we haven’t staged <em>all</em> our changes!</p>
<p d__="">At this point we can go ahead and commit the partially-added changes that are on the stage.</p>
<h2 data-number="21.2" id="resetting-files-in-patch-mode" d__=""><span class="header-section-number">21.2</span> Resetting Files in Patch Mode</h2>
<p></p>
<p d__="">Kind of the opposite of <code s__="13">git add -p</code> is <code s__="13">git reset -p</code>. You can use <code s__="13">reset -p</code> to selectively change hunks <em>on the stage</em>.</p>
<p d__="">It’s that last part that makes it a bit weird, but you can think of <code s__="13">add -p</code> as selectively adding hunks to the stage from the working tree, and <code s__="13">reset -p</code> as selectively removing hunks from the stage relative to a particular commit.</p>
<p d__="">That is, I can reset to an earlier commit, but choose what hunks to reset.</p>
<blockquote>
<p d__=""><strong>This is not a hard, soft, or mixed reset.</strong> It’s its own thing. If you try to specify a certain type of reset in addition to <code s__="13">-p</code>, Git will complain. Arguably this should be a different command entirely, but that’s Git for ya!</p>
</blockquote>
<p d__="">Let’s say I have two commits. In the first one, I added <code s__="13">Line 1</code> through <code s__="13">Line 8</code>, and in the second commit I added <code s__="13">Line BEGIN</code> and <code s__="13">Line END</code>, just like in the earlier example.</p>
<p d__="">But now I decide I want to reset the <code s__="13">Line END</code>, but it’s part of another commit. I can break it out with <code s__="13">git reset -p</code>. Let’s do it.</p>
<p d__="">Here’s my log:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb236-1" d__=""><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>commit d2d5899a253d5ce277d4d5981d03a43e68da6677 (HEAD -&gt; main)</span>
<span id="cb236-2" d__=""><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb236-3" d__=""><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>Date:   Fri Oct 11 16:12:26 2024 -0700</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-5" d__=""><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>    updated</span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-7" d__=""><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>commit aae754f46130b6d86680e74caa98642becc88d6e</span>
<span id="cb236-8" d__=""><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb236-9" d__=""><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>Date:   Fri Oct 11 16:12:04 2024 -0700</span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-11" d__=""><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>    added</span></code></pre></div>
<p d__="">I want to do a partial reset to the earlier commit <code s__="13">aae75</code>.
 And I’m going to say “no” I don’t want to reset the first hunk, and 
“yes” I want to reset the second. Here’s what it looks like:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb237-1" d__=""><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>$ git reset -p aae75</span>
<span id="cb237-2" d__=""><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>  diff --git b/foo.txt a/foo.txt</span>
<span id="cb237-3" d__=""><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>  index 125f6ac..a982fdc 100644</span>
<span id="cb237-4" d__=""><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>  --- b/foo.txt</span>
<span id="cb237-5" d__=""><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>  +++ a/foo.txt</span>
<span id="cb237-6" d__=""><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a>  @@ -1,4 +1,3 @@</span>
<span id="cb237-7" d__=""><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a>  -Line BEGIN</span>
<span id="cb237-8" d__=""><a href="#cb237-8" aria-hidden="true" tabindex="-1"></a>   Line 1</span>
<span id="cb237-9" d__=""><a href="#cb237-9" aria-hidden="true" tabindex="-1"></a>   Line 2</span>
<span id="cb237-10" d__=""><a href="#cb237-10" aria-hidden="true" tabindex="-1"></a>   Line 3</span>
<span id="cb237-11" d__=""><a href="#cb237-11" aria-hidden="true" tabindex="-1"></a>  (1/2) Apply this hunk to index [y,n,q,a,d,j,J,g,/,e,p,?]? n</span>
<span id="cb237-12" d__=""><a href="#cb237-12" aria-hidden="true" tabindex="-1"></a>  @@ -7,4 +6,3 @@ Line 5</span>
<span id="cb237-13" d__=""><a href="#cb237-13" aria-hidden="true" tabindex="-1"></a>   Line 6</span>
<span id="cb237-14" d__=""><a href="#cb237-14" aria-hidden="true" tabindex="-1"></a>   Line 7</span>
<span id="cb237-15" d__=""><a href="#cb237-15" aria-hidden="true" tabindex="-1"></a>   Line 8</span>
<span id="cb237-16" d__=""><a href="#cb237-16" aria-hidden="true" tabindex="-1"></a>  -Line END</span>
<span id="cb237-17" d__=""><a href="#cb237-17" aria-hidden="true" tabindex="-1"></a>  (2/2) Apply this hunk to index [y,n,q,a,d,K,g,/,e,p,?]? y</span></code></pre></div>
<p d__="">The first question is asking, “Do you want to remove ‘Line 
BEGIN’?” And I said “no”. And the second question is asking “Do you want
 to remove ‘Line END’?” And I said “yes”.</p>
<p d__="">Where are we?</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb238-1" d__=""><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb238-2" d__=""><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb238-3" d__=""><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb238-4" d__=""><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>    (use "git restore --staged &lt;file&gt;..." to unstage)</span>
<span id="cb238-5" d__=""><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-7" d__=""><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb238-8" d__=""><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb238-9" d__=""><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working directory)</span>
<span id="cb238-10" d__=""><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">Hmm. Let’s check the difference between the stage and <code s__="13">HEAD</code>.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb239-1" d__=""><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>$ git diff --staged</span>
<span id="cb239-2" d__=""><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/foo.txt b/foo.txt</span>
<span id="cb239-3" d__=""><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>  index 125f6ac..e0e1d89 100644</span>
<span id="cb239-4" d__=""><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>  --- a/foo.txt</span>
<span id="cb239-5" d__=""><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>  +++ b/foo.txt</span>
<span id="cb239-6" d__=""><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a>  @@ -7,4 +7,3 @@ Line 5</span>
<span id="cb239-7" d__=""><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>   Line 6</span>
<span id="cb239-8" d__=""><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a>   Line 7</span>
<span id="cb239-9" d__=""><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a>   Line 8</span>
<span id="cb239-10" d__=""><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a>  -Line END</span></code></pre></div>
<p d__="">That’s telling us that, compared to <code s__="13">HEAD</code>, the stage has the <code s__="13">Line END</code> removed. Which is great, because that’s what we asked for with <code s__="13">reset -p</code>. So we’re on track.</p>
<p d__="">But why is <code s__="13">foo.txt</code> modified? Let’s see:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb240-1" d__=""><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>$ git diff</span>
<span id="cb240-2" d__=""><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>  diff --git a/foo.txt b/foo.txt</span>
<span id="cb240-3" d__=""><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  index e0e1d89..125f6ac 100644</span>
<span id="cb240-4" d__=""><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>  --- a/foo.txt</span>
<span id="cb240-5" d__=""><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>  +++ b/foo.txt</span>
<span id="cb240-6" d__=""><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a>  @@ -7,3 +7,4 @@ Line 5</span>
<span id="cb240-7" d__=""><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>   Line 6</span>
<span id="cb240-8" d__=""><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a>   Line 7</span>
<span id="cb240-9" d__=""><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a>   Line 8</span>
<span id="cb240-10" d__=""><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a>  +Line END</span></code></pre></div>
<p d__="">This is telling us that, compared to the stage, the working tree has <code s__="13">Line END</code> added to the end.</p>
<p d__="">And sure enough, if we look at the <code s__="13">foo.txt</code> file in the working tree, <em>it still has <code s__="13">Line END</code> in it</em>.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb241-1" d__=""><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>$ cat foo.txt</span>
<span id="cb241-2" d__=""><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>  Line BEGIN</span>
<span id="cb241-3" d__=""><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  Line 1</span>
<span id="cb241-4" d__=""><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>  Line 2</span>
<span id="cb241-5" d__=""><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>  Line 3</span>
<span id="cb241-6" d__=""><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>  Line 4</span>
<span id="cb241-7" d__=""><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a>  Line 5</span>
<span id="cb241-8" d__=""><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a>  Line 6</span>
<span id="cb241-9" d__=""><a href="#cb241-9" aria-hidden="true" tabindex="-1"></a>  Line 7</span>
<span id="cb241-10" d__=""><a href="#cb241-10" aria-hidden="true" tabindex="-1"></a>  Line 8</span>
<span id="cb241-11" d__=""><a href="#cb241-11" aria-hidden="true" tabindex="-1"></a>  Line END</span></code></pre></div>
<p d__="">What does it all mean? Well, it means <code s__="13">reset -p</code> messed with the stage, but not with the working tree. Our working tree is still the same as it was with the last commit. (<code s__="13">git diff HEAD</code> will show no changes.)</p>
<p d__="">Now, admittedly, it’s likely this isn’t what you want. Maybe you wanted to reset the hunk <strong>and</strong> get your working tree reset to that hunk, as well.</p>
<p d__="">But we can still get there! Remember that the reset hunk is on the stage ready to be committed! Let’s do that!</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb242-1" d__=""><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m "remove END"</span>
<span id="cb242-2" d__=""><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>  [main 46badfe] remove END</span>
<span id="cb242-3" d__=""><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 deletion(-)</span></code></pre></div>
<p d__="">There. Now the stage and <code s__="13">HEAD</code> are the same, both having had <code s__="13">Line END</code> removed. But <code s__="13">Line END</code> still exists in our working tree, like <code s__="13">status</code> informs us:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb243-1" d__=""><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb243-2" d__=""><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb243-3" d__=""><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb243-4" d__=""><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span id="cb243-5" d__=""><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>    (use "git restore &lt;file&gt;..." to discard changes in working directory)</span>
<span id="cb243-6" d__=""><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p d__="">So how do we get the reset change back into our working tree? The answer is right there in the hints.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb244-1" d__=""><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>$ git restore foo.txt</span></code></pre></div>
<p d__="">There. Now we’re all on the same page with the <code s__="13">Line END</code> removed entirely.</p>
<blockquote>
<p d__=""><strong>There’s another way to synchronize the stage and working tree during a patch reset.</strong> After you do the <code s__="13">reset -p</code>, you can copy the file <code s__="13">foo.txt</code> from the stage to the working tree with:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb245-1" d__=""><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>git checkout -- foo.txt</span></code></pre></div>
<!-- ` -->
<p d__="">That will make the stage and working tree the same, so everything will all be on the same page when the commit is complete.</p>
</blockquote>
<h2 data-number="21.3" id="other-patch-mode-commands" d__=""><span class="header-section-number">21.3</span> Other Patch Mode Commands</h2>
<p d__="">You can use <code s__="13">-p</code> with <code s__="13">stash</code>, <code s__="13">restore</code>, <code s__="13">commit</code>,
 and more. The UI behaves basically the same way as described above. See
 the manual pages for any particular command to learn more about it.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="22" id="cherry-pick-bringing-in-specific-commits" d__=""><span class="header-section-number">22</span> Cherry-Pick: Bringing in Specific Commits</h1>
<p></p>
<p d__="">Let’s say you’re working on <code s__="13">branch1</code> and you have made a bug fix to <code s__="13">branch2</code>. You’re not ready to merge <em>all</em> the changes in from <code s__="13">branch2</code> into <code s__="13">branch1</code>, but you really want just that bug fixed.</p>
<p d__="">Luckily, there’s a way to do that! You can merge a single commit into your branch with <code s__="13">git cherry-pick</code>. You just have to tell it which commit to bring in.</p>
<h2 data-number="22.1" id="cherry-pick-example" d__=""><span class="header-section-number">22.1</span> Cherry-Pick Example</h2>
<p d__="">Let’s have a file on the <code s__="13">main</code> branch called <code s__="13">foo.txt</code> that has the following contents stored in an initial commit:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb246-1" d__=""><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb246-2" d__=""><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb246-3" d__=""><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb246-4" d__=""><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb246-5" d__=""><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb246-6" d__=""><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb246-7" d__=""><a href="#cb246-7" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb246-8" d__=""><a href="#cb246-8" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb246-9" d__=""><a href="#cb246-9" aria-hidden="true" tabindex="-1"></a>Line 9</span>
<span id="cb246-10" d__=""><a href="#cb246-10" aria-hidden="true" tabindex="-1"></a>Line 10</span></code></pre></div>
<p d__="">Very exciting file, that.</p>
<p d__="">Now let’s switch to another branch, call it <code s__="13">branch</code>, inspirationally.</p>
<p d__="">And on this branch, we do some things. First, we add a couple lines to the end and commit.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb247-1" d__=""><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb247-2" d__=""><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb247-3" d__=""><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb247-4" d__=""><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb247-5" d__=""><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb247-6" d__=""><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb247-7" d__=""><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb247-8" d__=""><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb247-9" d__=""><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a>Line 9</span>
<span id="cb247-10" d__=""><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a>Line 10</span>
<span id="cb247-11" d__=""><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a>Branch: Line 101</span>
<span id="cb247-12" d__=""><a href="#cb247-12" aria-hidden="true" tabindex="-1"></a>Branch: Line 102</span></code></pre></div>
<p d__="">And then we add a line to the middle, and commit again.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb248-1" d__=""><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb248-2" d__=""><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb248-3" d__=""><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb248-4" d__=""><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb248-5" d__=""><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a>BRANCH: INSERTED LINE 5</span>
<span id="cb248-6" d__=""><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb248-7" d__=""><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb248-8" d__=""><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb248-9" d__=""><a href="#cb248-9" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb248-10" d__=""><a href="#cb248-10" aria-hidden="true" tabindex="-1"></a>Line 9</span>
<span id="cb248-11" d__=""><a href="#cb248-11" aria-hidden="true" tabindex="-1"></a>Line 10</span>
<span id="cb248-12" d__=""><a href="#cb248-12" aria-hidden="true" tabindex="-1"></a>Branch: Line 101</span>
<span id="cb248-13" d__=""><a href="#cb248-13" aria-hidden="true" tabindex="-1"></a>Branch: Line 102</span></code></pre></div>
<p d__=""><strong>Additionally</strong> let’s create a branch here called <code s__="13">checkpoint</code> to make this demo a little easier. You don’t <em>have</em>
 to do this, but it’ll enable us to cherry-pick this commit by its 
branch name instead of by its commit UUID. Or you could skip this step 
and use the UUID.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb249-1" d__=""><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>$ git branch checkpoint</span></code></pre></div>
<blockquote>
<p d__=""><strong>This doesn’t switch branches.</strong> It just makes a new branch on this commit. <code s__="13">HEAD</code> is still pointing to <code s__="13">branch</code> like before.</p>
</blockquote>
<p d__="">Lastly, let’s add a couple more lines to the end, and commit one last time.</p>
<p d__="">So here’s the file as it exists on <code s__="13">branch</code>:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb250-1" d__=""><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb250-2" d__=""><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb250-3" d__=""><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb250-4" d__=""><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb250-5" d__=""><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a>BRANCH: INSERTED LINE 5</span>
<span id="cb250-6" d__=""><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb250-7" d__=""><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb250-8" d__=""><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb250-9" d__=""><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb250-10" d__=""><a href="#cb250-10" aria-hidden="true" tabindex="-1"></a>Line 9</span>
<span id="cb250-11" d__=""><a href="#cb250-11" aria-hidden="true" tabindex="-1"></a>Line 10</span>
<span id="cb250-12" d__=""><a href="#cb250-12" aria-hidden="true" tabindex="-1"></a>Branch: Line 101</span>
<span id="cb250-13" d__=""><a href="#cb250-13" aria-hidden="true" tabindex="-1"></a>Branch: Line 102</span>
<span id="cb250-14" d__=""><a href="#cb250-14" aria-hidden="true" tabindex="-1"></a>Branch: Line 103</span>
<span id="cb250-15" d__=""><a href="#cb250-15" aria-hidden="true" tabindex="-1"></a>Branch: Line 104</span></code></pre></div>
<p d__="">And let’s look at the log to see what we have:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb251-1" d__=""><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>commit 9336292f73b4ace717644336f72458681c1bb761 (HEAD -&gt; branch)</span>
<span id="cb251-2" d__=""><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>Author: Branch User Name &lt;branch-user@example.com&gt;</span>
<span id="cb251-3" d__=""><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-5" d__=""><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>    branch: added line 103-104</span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7" d__=""><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>commit 407f212f12f79902818431a174706cfdc30d509b (checkpoint)</span>
<span id="cb251-8" d__=""><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a>Author: Branch User Name &lt;branch-user@example.com&gt;</span>
<span id="cb251-9" d__=""><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-11" d__=""><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a>    branch: inserted line 5</span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-13" d__=""><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a>commit 9533e0bdd5cba7d65401c3180b34b01700a7906e</span>
<span id="cb251-14" d__=""><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a>Author: Branch User Name &lt;branch-user@example.com&gt;</span>
<span id="cb251-15" d__=""><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-17" d__=""><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a>    branch: added line 101-102</span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-19" d__=""><a href="#cb251-19" aria-hidden="true" tabindex="-1"></a>commit d6953bd746c813f5ba545cf0fd6044fd78e2c617 (main)</span>
<span id="cb251-20" d__=""><a href="#cb251-20" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb251-21" d__=""><a href="#cb251-21" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb251-22"><a href="#cb251-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-23" d__=""><a href="#cb251-23" aria-hidden="true" tabindex="-1"></a>    added</span></code></pre></div>
<p d__="">Okay—that’s the set-up part of the demo. Now it’s time to cherry-pick!</p>
<p d__="">What we’re going to want to do for the demo is switch back to <code s__="13">main</code> and then cherry-pick the one commit that inserts line 5 in the middle. You can always use its UUID (<code s__="13">407f2</code>) for this, but we left behind that branch <code s__="13">checkpoint</code> there we can use instead.</p>
<p d__="">Let’s do it.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb252-1" d__=""><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>$ git switch main</span>
<span id="cb252-2" d__=""><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a>  Switched to branch 'main'</span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-4" d__=""><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a>$ git cherry-pick checkpoint</span>
<span id="cb252-5" d__=""><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb252-6" d__=""><a href="#cb252-6" aria-hidden="true" tabindex="-1"></a>  [main 9254663] branch: inserted line 5</span>
<span id="cb252-7" d__=""><a href="#cb252-7" aria-hidden="true" tabindex="-1"></a>   Date: Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb252-8" d__=""><a href="#cb252-8" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span></code></pre></div>
<p d__="">What that <em>should</em> have done is bring in that newly-inserted line 5, and none of the other changes. Let’s look at <code s__="13">foo.txt</code> from <code s__="13">main</code>:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb253-1" d__=""><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>Line 1</span>
<span id="cb253-2" d__=""><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>Line 2</span>
<span id="cb253-3" d__=""><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a>Line 3</span>
<span id="cb253-4" d__=""><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a>Line 4</span>
<span id="cb253-5" d__=""><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a>BRANCH: INSERTED LINE 5</span>
<span id="cb253-6" d__=""><a href="#cb253-6" aria-hidden="true" tabindex="-1"></a>Line 5</span>
<span id="cb253-7" d__=""><a href="#cb253-7" aria-hidden="true" tabindex="-1"></a>Line 6</span>
<span id="cb253-8" d__=""><a href="#cb253-8" aria-hidden="true" tabindex="-1"></a>Line 7</span>
<span id="cb253-9" d__=""><a href="#cb253-9" aria-hidden="true" tabindex="-1"></a>Line 8</span>
<span id="cb253-10" d__=""><a href="#cb253-10" aria-hidden="true" tabindex="-1"></a>Line 9</span>
<span id="cb253-11" d__=""><a href="#cb253-11" aria-hidden="true" tabindex="-1"></a>Line 10</span></code></pre></div>
<p d__="">And there it is!</p>
<blockquote>
<p d__=""><strong>Wait—wasn’t that just a merge?</strong> Not quite! Notice that we had added lines 101-102 in <code s__="13">branch</code> <em>before</em> we inserted line 5. And yet that earlier commit is not reflected in <code s__="13">main</code>. We <em>cherry-picked</em> that single commit with line 5 out of the stream of commits, ignoring the other ones before and after it!</p>
</blockquote>
<p d__="">Now let’s look at <code s__="13">git log</code> on <code s__="13">main</code>:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb254-1" d__=""><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>commit 92546636d05fa85218ca18a0cd705ddc14fa8b64 (HEAD -&gt; main)</span>
<span id="cb254-2" d__=""><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a>Author: Branch User Name &lt;branch-user@example.com&gt;</span>
<span id="cb254-3" d__=""><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-5" d__=""><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a>    branch: inserted line 5</span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-7" d__=""><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a>commit d6953bd746c813f5ba545cf0fd6044fd78e2c617</span>
<span id="cb254-8" d__=""><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a>Author: User Name &lt;user@example.com&gt;</span>
<span id="cb254-9" d__=""><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a>Date:   Sun Oct 20 13:08:30 2024 -0700</span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-11" d__=""><a href="#cb254-11" aria-hidden="true" tabindex="-1"></a>    added</span></code></pre></div>
<p d__="">There are two amazing things to notice here:</p>
<ol type="1">
<li><p d__="">The author information was preserved in the log message. Notice it’s <code s__="13">branch-user@example.com</code> and not <code s__="13">user@example.com</code>, even though it was the latter who did the cherry-pick. This might not be entirely surprising, except…</p></li>
<li><p d__="">The cherry-picked commit UUID is different in <code s__="13">main</code> than in <code s__="13">branch</code>! In <code s__="13">branch</code>, it’s <code s__="13">407f2</code>, and here it’s <code s__="13">92546</code>. But it <strong>has</strong> to be that way because it’s got all new content. That is, there’s no other commit anywhere in the commit graph where <code s__="13">foo.txt</code> looks like this, so it has to have a unique UUID<a href="#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup s__="13" d__="">32</sup></a>.</p></li>
</ol>
<p d__="">But not every cherry-pick will go as smoothly as that!</p>
<h2 data-number="22.2" id="cherry-pick-conflicts" d__=""><span class="header-section-number">22.2</span> Cherry-Pick Conflicts</h2>
<p></p>
<p d__="">Yes, you can get conflicts with a cherry-pick, of course. This
 might happen because you’ve changed some of the same lines as the 
commit you’re cherry-picking, or maybe because the cherry-picked commit 
has some contextual lines of code that you don’t have.</p>
<p d__="">In any case, conflict resolution happens in the much the same way as with <code s__="13">merge</code> or <code s__="13">rebase</code>. If you need to, refamiliarize yourself with the content from those chapters.</p>
<p d__="">But by now I hope the process seems familiar. First, make the file <em>Right</em>, then add it, and then you’ll <em>continue</em> (like with a <code s__="13">rebase</code>) with <code s__="13">git cherry-pick --continue</code>. Keep doing that until everything’s merged together cleanly.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="23" id="whos-to-blame-for-this-code" d__=""><span class="header-section-number">23</span> Who’s to Blame for this Code?</h1>
<p></p>
<p d__="">Let’s say you find something in the shared codebase that’s just wrong. Or, charitably, we’ll say you found something <em>interesting</em>.</p>
<p d__="">And you want to know who was to blame for that <em>incredible</em> code.</p>
<p d__="">This is where a simple Git command can enlighten you.</p>
<p d__="">Here’s some example truncated output (so that it fits in the book margins):</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb255-1" d__=""><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>$ git blame --date=short foo.py</span>
<span id="cb255-2" d__=""><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08  4) def encode_data(message, value):</span>
<span id="cb255-3" d__=""><a href="#cb255-3" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08  5)     encoded_message = message.enco</span>
<span id="cb255-4" d__=""><a href="#cb255-4" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08  6)     encoded_value = value.to_bytes</span>
<span id="cb255-5" d__=""><a href="#cb255-5" aria-hidden="true" tabindex="-1"></a>  3b0b0e76 (Chris 2024-10-09  7)     length = len(encoded_message) </span>
<span id="cb255-6" d__=""><a href="#cb255-6" aria-hidden="true" tabindex="-1"></a>  3b0b0e76 (Chris 2024-10-09  8)     encoded_length = length.to_byt</span>
<span id="cb255-7" d__=""><a href="#cb255-7" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08  9)</span>
<span id="cb255-8" d__=""><a href="#cb255-8" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08 10)     data = encoded_length + encode</span>
<span id="cb255-9" d__=""><a href="#cb255-9" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08 11)</span>
<span id="cb255-10" d__=""><a href="#cb255-10" aria-hidden="true" tabindex="-1"></a>  8c96991f (Alice 2024-10-08 12)     return data</span></code></pre></div>
<p d__="">I have the <code s__="13">--date=short</code> switch in there to compress it even more so it fits in the book. Otherwise it would show a full time stamp.</p>
<p d__="">What we see in this fabricated example is that Alice has 
checked in the majority of this function, but the next day Chris came in
 and modified or added those additional lines in the middle.</p>
<p d__="">And now we know.</p>
<h2 data-number="23.1" id="fancier-blaming" d__=""><span class="header-section-number">23.1</span> Fancier Blaming</h2>
<p d__="">You can use the <code s__="13">--color-lines</code> switch to 
get color output, alternating colors between commits. Very exciting. If 
you want that to always happen, you can set the <code s__="13">color.blame.repeatedLines</code> config option.</p>
<p d__="">We already saw <code s__="13">--date=short</code> to chop the date down a bit.</p>
<p d__="">You can show the email address of the contributor with <code s__="13">-e</code> or <code s__="13">--show-email</code>.</p>
<p d__="">You can reliably detect lines that were moved or copied within a file with <code s__="13">-M</code>. And you can do the same thing across multiple files with <code s__="13">-C</code>.</p>
<p d__="">Finally, your IDE (like VS Code) might support blame, either 
natively or via an extension. Some people just have this feature turned 
on all the time.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="24" id="configuration" d__=""><span class="header-section-number">24</span> Configuration</h1>
<p d__="">Waaaaay back at the beginning of this book, we did some Git configuration. We did this:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb256-1" d__=""><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.name "Your Name"</span>
<span id="cb256-2" d__=""><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.email "your-email@example.com"</span></code></pre></div>
<p d__="">When we did, it added that configuration information to a file
 and the info in that file applies to all the Git repos on your system.</p>
<p d__="">Unless you override them with a local config, that is. But stay tuned for more on that later.</p>
<p d__="">Let’s look at one of those lines again:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb257-1" d__=""><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.name "Your Name"</span>
<span id="cb257-2" d__=""><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a>                              ↑          ↑</span>
<span id="cb257-3" d__=""><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a>                          variable     value</span></code></pre></div>
<p d__="">There are two main things in this line.</p>
<ol type="1">
<li d__="">A <em>variable</em>, that is, the thing we’re setting the value of.</li>
<li d__="">A <em>value</em>, the value we’re giving that variable.</li>
</ol>
<p d__="">In that case, the variable is <code s__="13">user.name</code> and the value is <code s__="13">"Your Name"</code>.</p>
<blockquote>
<p d__=""><strong>What those two variables, <code s__="13">user.name</code> and <code s__="13">user.email</code>, are doing</strong>
 is they’re setting the values that will go in your commit messages! 
That’s your identity when you commit! A side note here it that it’s 
incredibly easy to impersonate anyone else in the world just by putting 
their name and email there. To mitigate this, one option is to <a href="https://git-scm.com/book/en/v2/Git-Tools-Signing-Your-Work" d__="">digitally sign your commits</a><a href="#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup s__="13" d__="">33</sup></a>, but that’s beyond the scope of this guide.</p>
</blockquote>
<p d__="">If the commands in this chapter are giving you errors, see the section on <a href="#config-old" d__="">older Git versions</a>, below.</p>
<h2 data-number="24.1" id="local-configuration" d__=""><span class="header-section-number">24.1</span> Local Configuration</h2>
<p d__="">In those <code s__="13">git config</code> lines, above, you might have noticed the <code s__="13">--global</code> switch:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb258-1" d__=""><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.name "Your Name"</span></code></pre></div>
<p d__="">Unless you explicitly say <code s__="13">--global</code>, Git assumes you mean the local configuration.</p>
<p d__="">What is the local configuration? It’s the configuration that applies to the repo that you’re currently in, and no others.</p>
<p><em d__="">Configuration options in the local config override the global config!</em></p>
<p d__="">Here’s a practical example of why you might do this. Let’s say
 you have a personal email for your fun projects, and a contractor email
 that you use for work-for-hire. But since you’re an independent 
contractor, you have all these projects on one computer.</p>
<p d__="">However, you want to use your work identity (name and email) for your contract work and your hacker identify for your fun work.</p>
<p d__="">One thing you might do is set the following globally:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb259-1" d__=""><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.name "HAx0rBYnit3"</span>
<span id="cb259-2" d__=""><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a>$ git config set --global user.email "l333T@example.com"</span></code></pre></div>
<p d__="">and that would be the default for all your repos. And then you might have a new repo for a job:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb260-1" d__=""><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>$ git init corporate_job_12</span>
<span id="cb260-2" d__=""><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>  Initialized empty Git repository in /user/corporate_job_12/.git/</span></code></pre></div>
<p d__="">And we pop in there, and we set the local config just for that repo (it’s local because we’re not specifying <code s__="13">--global</code>):</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb261-1" d__=""><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a>$ cd corporate_job_12</span>
<span id="cb261-2" d__=""><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>$ git config set user.name "Professional Name"</span>
<span id="cb261-3" d__=""><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a>$ git config set user.email "professional@example.com"</span></code></pre></div>
<p d__="">And now, just in the <code s__="13">corporate_job_12</code> directory, we’ll be using our professional name and email in our commits. Everywhere else we’ll be using our elite hacker name.</p>
<p d__="">You can override all the global configs on a per-repo basis by specifying local configs.</p>
<p d__="">Finally, the local config for a repo is found in the <code s__="13">.git/config</code> file out of the repo’s root directory.</p>
<h2 data-number="24.2" id="listing-the-current-config" d__=""><span class="header-section-number">24.2</span> Listing the Current Config</h2>
<p d__="">You can view the current config with <code s__="13">git config list</code>. Add the <code s__="13">--global</code> flag if you want to see the global config.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb262-1" d__=""><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a>$ git config list</span>
<span id="cb262-2" d__=""><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>  user.name=HAx0rBYnit3</span>
<span id="cb262-3" d__=""><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a>  user.email=l333T@example.com</span>
<span id="cb262-4" d__=""><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a>  init.defaultbranch=main</span>
<span id="cb262-5" d__=""><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a>  core.repositoryformatversion=0</span>
<span id="cb262-6" d__=""><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a>  core.filemode=true</span>
<span id="cb262-7" d__=""><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a>  core.bare=false</span>
<span id="cb262-8" d__=""><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a>  core.logallrefupdates=true</span>
<span id="cb262-9" d__=""><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a>  user.name=Professional Name</span>
<span id="cb262-10" d__=""><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a>  user.email=professional@example.com</span></code></pre></div>
<p d__="">You can see in there that <code s__="13">user.name</code> and <code s__="13">user.email</code> appear twice. The first is from the global config, which is overridden later by the value in the local config.</p>
<h2 data-number="24.3" id="getting-setting-and-deleting-variables" d__=""><span class="header-section-number">24.3</span> Getting, Setting, and Deleting Variables</h2>
<p d__="">An example “get”:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb263-1" d__=""><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>$ git config get user.name</span>
<span id="cb263-2" d__=""><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a>  Professional Name</span></code></pre></div>
<p d__="">Note that it is only giving the active value (the local one in this case) even though we saw with <code s__="13">git config list</code> that both the global and local values were there.</p>
<p d__="">And we’ve already seen a “set”:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb264-1" d__=""><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>$ git config set user.name "Alfred Manfrengensenton"</span></code></pre></div>
<p d__="">The double quotes are there so that the shell delivers the 
name as a single argument. Normally it splits all arguments on spaces. 
You could also use single quotes which is useful if the value has 
special shell characters in it. The grotesquely oversimplified rule, 
with apologies to shell enthusiasts, is to use quotes around the value 
if it has a space in it.</p>
<p d__="">Set will overwrite any previously-existing value of the name variable name.</p>
<p d__="">And last but not least, we can delete a variable with <code s__="13">unset</code>:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb265-1" d__=""><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>$ git config unset user.name</span></code></pre></div>
<h2 data-number="24.4" id="some-popular-variables" d__=""><span class="header-section-number">24.4</span> Some Popular Variables</h2>
<p d__="">To see which variables you can set, look in the manual page 
for the appropriate command. You can usually get there by looking at the
 first hit on your favorite search engine for <code s__="13">man git whatever</code>. For example, you might find configuration variables for <code s__="13">git pull</code> by searching for <code s__="13">man git pull</code> and bringing up the first hit.</p>
<p d__="">That said, there’s a <a href="https://git-scm.com/docs/git-config#_variables" d__="">big ol’ list of them in the <code s__="13">git config</code> manual page that you can peruse</a><a href="#fn34" class="footnote-ref" id="fnref34" role="doc-noteref"><sup s__="13" d__="">34</sup></a>.</p>
<p d__="">But here are some fun, common ones.</p>
<table>
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th d__="">Variable</th>
<th d__="">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code s__="13" d__="">user.name</code></td>
<td d__="">Your name</td>
</tr>
<tr class="even">
<td><code s__="13" d__="">user.email</code></td>
<td d__="">Your email</td>
</tr>
<tr class="odd">
<td><code s__="13" d__="">pull.rebase</code></td>
<td d__="">Set to <code s__="13">true</code> to have a pull try to rebase. Set to <code s__="13">false</code> to have it try to merge.</td>
</tr>
<tr class="even">
<td><code s__="13" d__="">core.editor</code></td>
<td d__="">Your default editor for commit messages, etc. Set to <code s__="13">vim</code>, <code s__="13">nano</code>, <code s__="13">code</code>, <code s__="13">emacs</code>, or whatever.</td>
</tr>
<tr class="odd">
<td><code s__="13" d__="">merge.tool</code></td>
<td d__="">Your default merge tool, e.g.&nbsp;<code s__="13">meld</code> or whatever.</td>
</tr>
<tr class="even">
<td><code s__="13" d__="">diff.tool</code></td>
<td d__="">Your default diff tool, e.g.&nbsp;<code s__="13">vimdiff</code></td>
</tr>
<tr class="odd">
<td><code s__="13" d__="">difftool.prompt</code></td>
<td d__="">Set to <code s__="13">false</code> to stop Git from always asking you if you want to launch your difftool.</td>
</tr>
<tr class="even">
<td><code s__="13" d__="">color.ui</code></td>
<td d__="">Set to <code s__="13">true</code> for more colorful Git output</td>
</tr>
<tr class="odd">
<td><code s__="13" d__="">core.autocrlf</code></td>
<td d__="">Set to <code s__="13">true</code> if you’re on Windows <strong>and</strong> not in WSL <strong>and</strong> the remote repo has Unix-style newlines <strong>and</strong> you want to use Windows-style newlines in your working directory. On other systems, set to <code s__="13">input</code>. This is all about working around Window’s ancient newlines.</td>
</tr>
<tr class="even">
<td><code s__="13" d__="">commit.gpgsign</code></td>
<td d__="">Set to <code s__="13">true</code> if you’ve configured GPG commit signing and want to always sign.</td>
</tr>
<tr class="odd">
<td><code s__="13" d__="">help.autocorrect</code></td>
<td d__="">Set to <code s__="13">0</code> to show the command Git thinks you meant to type if you misspelled it. Set to <code s__="13">immediate</code> to have it run the corrected command right now. Set to <code s__="13">prompt</code> to ask you if you want to run it.</td>
</tr>
</tbody>
</table>
<p d__="">Again, there are a <em>lot</em> more of these. Peruse the docs for more.</p>
<h2 data-number="24.5" id="editing-the-config-directly" d__=""><span class="header-section-number">24.5</span> Editing the Config Directly</h2>
<p d__="">You can launch an editor (the one specified in the <code s__="13">core.editor</code> variable) to edit the config file directly. Some people might find this easier.</p>
<p d__="">I can launch the editor like this:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb266-1" d__=""><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>$ git config --edit</span></code></pre></div>
<p d__="">Add the <code s__="13">--global</code> flag to edit the global config file.</p>
<blockquote>
<p d__=""><strong>Like with the other commands, there’s a new version of this one.</strong> On newer Git installs, you can just say <code s__="13">git config edit</code> without the minus-minus.</p>
</blockquote>
<p d__="">When you get into the editor, you’ll see a config file that might look something like this:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode numberSource default numberLines"><code class="sourceCode default" s__="13"><span id="cb267-1" d__=""><a href="#cb267-1"></a>[core]</span>
<span id="cb267-2" d__=""><a href="#cb267-2"></a>    repositoryformatversion = 0</span>
<span id="cb267-3" d__=""><a href="#cb267-3"></a>    filemode = true</span>
<span id="cb267-4" d__=""><a href="#cb267-4"></a>    bare = false</span>
<span id="cb267-5" d__=""><a href="#cb267-5"></a>    logallrefupdates = true</span>
<span id="cb267-6"><a href="#cb267-6"></a></span>
<span id="cb267-7" d__=""><a href="#cb267-7"></a>[user]</span>
<span id="cb267-8" d__=""><a href="#cb267-8"></a>    name = Your Name</span>
<span id="cb267-9" d__=""><a href="#cb267-9"></a>    email = user@example.com</span></code></pre></div>
<p d__="">If you look, you can see where <code s__="13">user.name</code> and <code s__="13">user.email</code> ended up. That’s how the config file is organized.</p>
<p d__="">So you can edit it here and save those changes. Some people 
might find this easier than adding or modifying variables on the command
 line.</p>
<blockquote>
<p d__=""><strong>If you corrupt your config with sloppy editing, you’re in for an interesting time.</strong> You won’t be able to run <code s__="13">git config edit</code> again. You’ll have to manually fix the config file in your favorite text editor.</p>
<p d__="">The local config file can be found relative to the root directory for the repo in question in <code s__="13">.git/config</code>.</p>
<p d__="">The global config file can be found at <code s__="13">~/.gitconfig</code> on Unix-like systems and <code s__="13">C:\Users\YourName\.gitconfig</code> on Windows.</p>
<p d__="">Bring the appropriate file up in your editor, fix the mistake, save it, and then <code s__="13">git config edit</code> should work again.</p>
</blockquote>
<h2 data-number="24.6" id="conditional-configuration" d__=""><span class="header-section-number">24.6</span> Conditional Configuration</h2>
<p d__="">This is more than I want to talk about, but it’s neat enough to point out.</p>
<p d__="">In Git config files, you can <em>include</em> other config files. This gives you a way, if your config files are bananas, to break them apart logically.</p>
<p d__="">You can also do <em>conditional includes</em>. That is, you can choose to include a file based on some condition being true.</p>
<p d__="">Testable conditions are:</p>
<ul>
<li d__="">Which directory this repo is in</li>
<li d__="">If you’re on a particular branch</li>
<li d__="">If there is a particular remote configured</li>
</ul>
<p d__="">This gives you all kinds of power. Personally, all of it is 
more than I need, and I’ve never used this feature, but that’s just me.</p>
<p d__=""><a href="https://git-scm.com/docs/git-config#_conditional_includes" d__="">Get more info and examples in the official book</a><a href="#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup s__="13" d__="">35</sup></a>.</p>
<h2 data-number="24.7" id="config-old" d__=""><span class="header-section-number">24.7</span> Older Git Versions</h2>
<p d__="">I’m assuming you have a recent version of Git installed. But if you don’t, these commands might be different.</p>
<p d__="">The <a href="https://git-scm.com/docs/git-config#_deprecated_modes" d__="">Git manual page for <code s__="13">git config</code> has a complete summary of the changes</a><a href="#fn36" class="footnote-ref" id="fnref36" role="doc-noteref"><sup s__="13" d__="">36</sup></a>.</p>
<p d__="">And here are the modern commands we use in this chapter:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb268-1" d__=""><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>git config get user.email                     # Get</span>
<span id="cb268-2" d__=""><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>git config set user.email "user@example.com"  # Set</span>
<span id="cb268-3" d__=""><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>git config unset user.email                   # Delete</span>
<span id="cb268-4" d__=""><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a>git config list                               # List</span>
<span id="cb268-5" d__=""><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a>git config edit                               # Edit</span></code></pre></div>
<p d__="">And here are the older equivalents:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb269-1" d__=""><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a>git config user.email                     # Get</span>
<span id="cb269-2" d__=""><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a>git config user.email "user@example.com"  # Set</span>
<span id="cb269-3" d__=""><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a>git config --unset user.email             # Delete</span>
<span id="cb269-4" d__=""><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a>git config --list                         # List</span>
<span id="cb269-5" d__=""><a href="#cb269-5" aria-hidden="true" tabindex="-1"></a>git config --edit                         # Edit</span></code></pre></div>
<p d__="">Use the new ones if you can!</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="25" id="git-aliases" d__=""><span class="header-section-number">25</span> Git Aliases</h1>
<p d__="">Some of these Git commands might be painstaking to type. So far, we haven’t had to do anything <em>too</em> complicated, but we might eventually.</p>
<p d__="">For example, let’s say you want to see the names of the files that were modified with <code s__="13">git log</code>. It’s no problem; you can tell it to do that.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb270-1" d__=""><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>$ git log --name-only</span></code></pre></div>
<p d__="">And that’ll work.</p>
<p d__="">But let’s say for the sake of example that you find yourself doing that a <em>lot</em>. It would get irksome.</p>
<p d__="">Wouldn’t it be easier if you could just make up a new command, like <code s__="13">git logn</code> that would do the same thing?</p>
<p d__="">That’s what aliases are for.</p>
<p d__="">This chapter assumes you’ve read the <a href="#configuration" d__="">Configuration chapter</a>. In particular, if these commands don’t work, you should look at <a href="#config-old" d__="">configuration of Older Git Versions</a>.</p>
<h2 data-number="25.1" id="creating-an-alias" d__=""><span class="header-section-number">25.1</span> Creating an Alias</h2>
<p d__="">You do this through the configuration interface. Basically what you want to set is the variable <code s__="13">alias.myname</code> where <code s__="13">myname</code> is the name of the new command.</p>
<p d__="">Let’s say you want to make <code s__="13">git logn</code> an alias for <code s__="13">git log --name-only</code>. You can do it like this:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb271-1" d__=""><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>$ git config set --global alias.logn 'log --name-only'</span></code></pre></div>
<p d__="">And at this point, you can run:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb272-1" d__=""><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>$ git logn</span></code></pre></div>
<p d__="">and it will be an alias for <code s__="13">git log --name-only</code>, effectively running that command.</p>
<p d__="">I speculate that Git has a number of built-in commands (like <code s__="13">log</code> and <code s__="13">push</code>) and if you try to have it run something that is not a built-in, it tries to find it as an <code s__="13">alias</code> variable. And if it does, it substitutes that instead. 99% sure that’s what’s happening under the hood.</p>
<p d__="">Since aliases are just regular configuration variables, getting, setting, and deleting them happens as described in the <a href="#configuration" d__="">config chapter</a>.</p>
<h2 data-number="25.2" id="displaying-aliases" d__=""><span class="header-section-number">25.2</span> Displaying Aliases</h2>
<p d__="">Since aliases are just config variables, you can just get them in order to see what they are.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb273-1" d__=""><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a>$ git config get alias.logx</span></code></pre></div>
<p d__="">If you want to see all of them, you can run this command:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb274-1" d__=""><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>$ git config get --all --show-names --regexp '^alias\.'</span></code></pre></div>
<p d__="">which is super annoying. I suggest you alias it. Wheee!</p>
<blockquote>
<p><strong d__="">Older versions of Git use this command instead:</strong></p>
<pre class="display"><code s__="13" d__="">$ git config --get-regexp ^alias\.</code></pre>
<!-- ` -->
</blockquote>
<h2 data-number="25.3" id="some-neat-sample-aliases" d__=""><span class="header-section-number">25.3</span> Some Neat Sample Aliases</h2>
<p d__="">Some of the following are split into multiple lines so they 
fit in the book. You can put them on a single line, or type them as-is 
with the <code s__="13">\</code> escape that tells the shell to continue the command on the next line.</p>
<p d__=""><strong>Add all changed files</strong> with <code s__="13">git adda</code>. Do this carefully since you might add more than you wanted!</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb276-1" d__=""><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>$ git config set alias.aa "add --all"</span></code></pre></div>
<p d__=""><strong>More compact log showing the commit graph</strong> with <code s__="13">git logc</code>.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb277-1" d__=""><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a>$ git config set alias.logc "log --oneline --graph --decorate"</span></code></pre></div>
<p d__=""><strong>Diff the stage with the repo</strong> with <code s__="13">git diffs</code>.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb278-1" d__=""><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a>$ git config set alias.diffs "diff --staged"</span></code></pre></div>
<p d__=""><strong>Make <code s__="13">git aliases</code> show all aliases</strong> with <code s__="13">git aliases</code>.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb279-1" d__=""><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a>$ git config set alias.aliases \</span>
<span id="cb279-2" d__=""><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a>    "config get --all --show-names --regexp '^alias\.'"</span></code></pre></div>
<p d__=""><strong>Make a very colorful and customized log</strong> with <code s__="13">git lol</code>.</p>
<p d__="">(Make sure to get the spacing exactly as-is on this copy-paste or the shell and/or Git will be unhappy.)</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb280-1" d__=""><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>$ git config set alias.lol "log --graph"\</span>
<span id="cb280-2" d__=""><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>" --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s"\</span>
<span id="cb280-3" d__=""><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>" %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span></code></pre></div>
<p d__="">For that last one, we’re making heavy use of <code s__="13">--pretty</code> formatting which gives tons of control over the output. <a href="https://git-scm.com/docs/git-log#_pretty_formats" d__="">See the “Pretty Formats” section of the <code s__="13">git log</code> manual page for more info</a><a href="#fn37" class="footnote-ref" id="fnref37" role="doc-noteref"><sup s__="13" d__="">37</sup></a>.</p>
<h2 data-number="25.4" id="seeing-gits-alias-expansion" d__=""><span class="header-section-number">25.4</span> Seeing Git’s Alias Expansion</h2>
<p d__="">Let’s say you’ve added an alias, but it’s not working. When 
you run it, it just gives some error and it’s not super clear what’s 
going on.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb281-1" d__=""><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a>$ git logx</span>
<span id="cb281-2" d__=""><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a>fatal: unrecognized argument: --foobar</span></code></pre></div>
<p d__="">You can ask Git to give you more information by adding <code s__="13">GIT_TRACE=1</code> to the beginning of the command line.</p>
<blockquote>
<p d__=""><strong>This sets the environment variable <code s__="13">GIT_TRACE</code> to <code s__="13">1</code>,</strong> but it only does it for this one command. It’s not persistent. Git knows to look for <code s__="13">GIT_TRACE</code> and that it should alter its behavior if it finds it.</p>
</blockquote>
<p d__="">Here’s some example output:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb282-1" d__=""><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>$ GIT_TRACE=1 git logx</span>
<span id="cb282-2" d__=""><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a>  14:09:28.502707 git.c:758               trace: exec: git-logx</span>
<span id="cb282-3" d__=""><a href="#cb282-3" aria-hidden="true" tabindex="-1"></a>  14:09:28.502750 run-command.c:666       trace: run_command: git-l</span>
<span id="cb282-4" d__=""><a href="#cb282-4" aria-hidden="true" tabindex="-1"></a>  14:09:28.502905 git.c:416               trace: alias expansion: l</span>
<span id="cb282-5" d__=""><a href="#cb282-5" aria-hidden="true" tabindex="-1"></a>  14:09:28.502913 git.c:816               trace: exec: git log --fo</span>
<span id="cb282-6" d__=""><a href="#cb282-6" aria-hidden="true" tabindex="-1"></a>  14:09:28.502916 run-command.c:666       trace: run_command: git l</span>
<span id="cb282-7" d__=""><a href="#cb282-7" aria-hidden="true" tabindex="-1"></a>  14:09:28.502926 run-command.c:758       trace: start_command: /us</span>
<span id="cb282-8" d__=""><a href="#cb282-8" aria-hidden="true" tabindex="-1"></a>  14:09:28.504192 git.c:472               trace: built-in: git log </span>
<span id="cb282-9" d__=""><a href="#cb282-9" aria-hidden="true" tabindex="-1"></a>  fatal: unrecognized argument: --foobar</span></code></pre></div>
<p d__="">Unfortunately I had to truncate the lines on the right so they
 fit in the print version of the book, and that’s what we really want to
 look at. We’ll get there in a moment.</p>
<p d__="">For now, let’s look on the left. What we see there is a 
timestamp and some information about which part of the Git code is 
sending the trace out. And the it ends with our error.</p>
<p d__="">Let’s scroll to the right and just look at the lines following the <code s__="13">trace:</code>.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb283-1" d__=""><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a>trace: exec: git-logx</span>
<span id="cb283-2" d__=""><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a>trace: run_command: git-logx</span>
<span id="cb283-3" d__=""><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a>trace: alias expansion: logx =&gt; log --foobar</span>
<span id="cb283-4" d__=""><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a>trace: exec: git log --foobar</span>
<span id="cb283-5" d__=""><a href="#cb283-5" aria-hidden="true" tabindex="-1"></a>trace: run_command: git log --foobar</span>
<span id="cb283-6" d__=""><a href="#cb283-6" aria-hidden="true" tabindex="-1"></a>trace: start_command: /usr/lib/git-core/git log --foobar</span>
<span id="cb283-7" d__=""><a href="#cb283-7" aria-hidden="true" tabindex="-1"></a>trace: built-in: git log --foobar</span></code></pre></div>
<p d__="">It might take some sifting through, but let’s look just at the lines with <code s__="13">run_command</code> and <code s__="13">alias expansion</code> in them:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb284-1" d__=""><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a>trace: run_command: git-logx</span>
<span id="cb284-2" d__=""><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a>trace: alias expansion: logx =&gt; log --foobar</span>
<span id="cb284-3" d__=""><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a>trace: run_command: git log --foobar</span></code></pre></div>
<p d__="">And there we can see exactly what’s being expanded into what. And that might be useful for debugging it.</p>
<p d__="">It’s probably a bit of overkill for this simple example, but 
there are some aliases of extraordinary complexity for which this 
technique might help.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="26" id="changing-identity" d__=""><span class="header-section-number">26</span> Changing Identity</h1>
<p d__="">There are a few ways you’re identified when you do work with Git.</p>
<p d__="">They are held in:</p>
<ul>
<li d__="">the <code s__="13">user.name</code> and <code s__="13">user.email</code> configuration variables</li>
<li d__="">the SSH key you use to authenticate with a remote server like GitHub</li>
<li d__="">the GPG key you use for signing commits (rare)</li>
</ul>
<p d__="">It’s all well-and-good if you only ever use a single identity,
 but sometimes you might want to use different ones. For example, maybe 
for your personal fun work, you use one identity and SSH key, but then 
you got a contract job and you want to use your professional email and 
have to connect to a different server with a different SSH key.</p>
<p d__="">Let’s check out what the defaults are for all these, as well as how to change them on a per repo basis.</p>
<h2 data-number="26.1" id="changing-the-user-configuration-variables" d__=""><span class="header-section-number">26.1</span> Changing the User Configuration Variables</h2>
<p d__="">You’ll want to do this if you have, say, some repos for work 
and some for play, or if you have multiple work or play emails you want 
to use on a per-repo basis.</p>
<blockquote>
<p d__=""><strong>Everyone, including me, will tell you that you shouldn’t use your work-assigned laptop for play</strong>,
 and you double-especially shouldn’t do that if your “play” is other 
work-for-hire. That said, contractors often have multiple things going 
on at once (and they own their hardware), and sometimes people doing 
their own for-fun work might want to use different emails on different 
projects.</p>
</blockquote>
<p d__="">We’ve already covered this in the configuration chapter, but 
it’s easy enough to change your local identify that’s attached to each 
commit. Just change <code s__="13">user.name</code> and <code s__="13">user.email</code> to whatever you want.</p>
<p d__="">In the repo in question, set the local configuration to override your global config:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb285-1" d__=""><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>$ git config set user.name "My Alter Ego User Name"</span>
<span id="cb285-2" d__=""><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a>$ git config set user.email "alterego@example.com"</span></code></pre></div>
<p d__="">And then when you make commits in this repo, that’s the 
identity that will be attached to them. Commits in other repos will 
still obey your global username and email (unless you’ve overridden 
them, as well).</p>
<h2 data-number="26.2" id="changing-the-ssh-authentication-key" d__=""><span class="header-section-number">26.2</span> Changing the SSH Authentication Key</h2>
<p d__="">You’ll want to do this if you’re connecting to someone’s 
private remote (e.g.&nbsp;they’re running a Gitea site of their own or 
something), and you need to set up a different SSH key just to access 
that site. But you want to keep using your same SSH key for your 
personal GitHub. How can we use the GitHub one for all my repos, and the
 alternate SSH key just for this one repo?</p>
<p d__="">This is slightly more involved, and <a href="https://superuser.com/questions/232373/how-to-tell-git-which-private-key-to-use" d__="">there are a few ways to do this</a><a href="#fn38" class="footnote-ref" id="fnref38" role="doc-noteref"><sup s__="13" d__="">38</sup></a>, but I’ll share my favorite here.</p>
<p d__="">First some background. When the <code s__="13">ssh</code> command runs, it needs to know which identity it is running as. It uses a default identity (which is in a file called <code s__="13">~/.ssh/id_something</code>, like <code s__="13">id_ed25519</code>) unless you specify another one.</p>
<p d__="">You can do this one the command line with the <code s__="13">-i</code> switch to <code s__="13">ssh</code>.</p>
<p d__="">Let’s say you have two private keys in your <code s__="13">.ssh</code> direcrtory, <code s__="13">id_ed25519</code> and <code s__="13">id_alterego_ed25519</code>. The first one is the default key SSH uses. But if we want to use the other one, we can specify it:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb286-1" d__=""><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>$ ssh -i ~/.ssh/id_alterego_ed25519 example.com</span></code></pre></div>
<p d__="">Admittedly, that’s a pain in the butt to type, so some people 
set up their SSH config to use a particular key with a particular host 
name. But we’re not going down that route.</p>
<p d__="">Instead, let’s tell Git to use a particular identity by setting the <code s__="13">core.sshCommand</code> variable locally for this repo. This variable just holds the SSH command that Git uses to connect, which would normally be <code s__="13">ssh</code>. Let’s override:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb287-1" d__=""><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a>$ git config set core.sshCommand \</span>
<span id="cb287-2" d__=""><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a>    "ssh -i ~/.ssh/id_alterego_ed25519 -F none"</span></code></pre></div>
<p d__="">(The command above is split into two lines to fit in the margins—it is normally a single line and the <code s__="13">\</code> is Bash’s line continuation.)</p>
<p d__="">And—wait a second—what’s that <code s__="13">-F none</code> on
 there? That’s just a safety that’s telling SSH to ignore its default 
configuration file. Remember how above I said people sometimes set an 
identity by domain in their SSH config? This would override that since 
overriding is what we’re trying to do here.</p>
<p d__="">The reason I like this approach is that you can easily do it 
on a per-repo basis, and the config is stored with the repo (instead of 
in an environment variable or in SSH’s somewhat-unrelated 
configuration).</p>
<h2 data-number="26.3" id="changing-your-gpg-signing-key" d__=""><span class="header-section-number">26.3</span> Changing your GPG Signing Key</h2>
<p d__="">We haven’t talked about this yet, but if you use your GPG key 
for signing you can specify which key is used if you get its fingerprint
 (or probably email or any other unique identifier recognized by GPG).</p>
<p d__="">First find the secret key you’re interested in:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb288-1" d__=""><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a>$ gpg --list-secret-keys --keyid-format LONG</span>
<span id="cb288-2" d__=""><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a>  /user/.gnupg/pubring.kbx</span>
<span id="cb288-3" d__=""><a href="#cb288-3" aria-hidden="true" tabindex="-1"></a>  ------------------------------</span>
<span id="cb288-4" d__=""><a href="#cb288-4" aria-hidden="true" tabindex="-1"></a>  sec   rsa4096/0123456789ABCDEF 2022-01-01 [SC] [expires: 2025-01-</span>
<span id="cb288-5" d__=""><a href="#cb288-5" aria-hidden="true" tabindex="-1"></a>        9993456789ABCDEF0123456789ABCDEF01234567</span>
<span id="cb288-6" d__=""><a href="#cb288-6" aria-hidden="true" tabindex="-1"></a>  uid     [ultimate] Personal User Name &lt;personal@example.com&gt;</span>
<span id="cb288-7" d__=""><a href="#cb288-7" aria-hidden="true" tabindex="-1"></a>  ssb   rsa4096/9993456789ABCDEF 2022-01-01 [E] [expires: 2025-01-0</span>
<span id="cb288-8" d__=""><a href="#cb288-8" aria-hidden="true" tabindex="-1"></a>  sec   ed25519/ABCDEF0123456789 2022-01-01 [SC] [expires: 2025-01-</span>
<span id="cb288-9" d__=""><a href="#cb288-9" aria-hidden="true" tabindex="-1"></a>        FFFDEF0123456789ABCDEF0123456789ABCDEF01</span>
<span id="cb288-10" d__=""><a href="#cb288-10" aria-hidden="true" tabindex="-1"></a>  uid     [ultimate] Professional User Name &lt;professional@example.c</span>
<span id="cb288-11" d__=""><a href="#cb288-11" aria-hidden="true" tabindex="-1"></a>  ssb   rsa4096/FFFDEF0123456789 2022-12-06 [E] [expires: 2024-12-0</span></code></pre></div>
<p d__="">(Output has been cropped on the right to fit in the book.)</p>
<p d__="">Look for the identity you want to use. In this case, let’s say we want to use “Professional User Name”. We look for the <code s__="13">sec</code> line that’s associated with it (above it), and we copy that part of the secret line after the type of encryption (usually <code s__="13">rsa4096</code> or <code s__="13">ed25519</code>). Here that’s <code s__="13">ABCDEF0123456789</code> in this fabricated example.</p>
<p d__="">And then we locally configure this repo to use that key in particular.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb289-1" d__=""><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>git config set user.signingkey ABCDEF0123456789</span></code></pre></div>
<p d__="">Then when you sign the commits, that key will be used.</p>
<h2 data-number="26.4" id="changing-your-ssh-signing-key" d__=""><span class="header-section-number">26.4</span> Changing your SSH Signing Key</h2>
<p d__="">This is also something we haven’t talked about yet. But if it’s all set up for you, read on.</p>
<p d__="">There are two parts to this:</p>
<ol type="1">
<li><p d__="">Change the key to use (similar to how it’s done in the GPG section, above).</p></li>
<li><p d__="">Make sure your <code s__="13">allowed_signers</code> file has your current email and key in it. (You only have to do this if you want to verify signatures locally.)</p></li>
</ol>
<p d__="">Part one is easy. Just find the path to your public key in your <code s__="13">~/.ssh</code> directory and set the config variable <code s__="13">user.signingkey</code> to that.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb290-1" d__=""><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>git config set user.signingkey '~/.ssh/id_ed25519_signing_key.pub'</span></code></pre></div>
<p d__="">Part two is if you have your <code s__="13">allowed_signers</code> file set up. You’ll have to make sure it contains a line that has your current <code s__="13">user.email</code> config variable and a copy of the public key to use.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="27" id="amending-commits" d__=""><span class="header-section-number">27</span> Amending Commits</h1>
<p d__="">Git gives you the power to relatively easily amend the last commit.</p>
<blockquote>
<p d__=""><strong>Caution!</strong> This section talks about changing 
history, and let’s not forget The One Rule Of Changing History: thou 
shalt not change history of anything that you’ve pushed, lest someone 
else might have already pulled thy earlier changes, causing your commit 
histories to become woefully out of sync and much shouting.</p>
<p d__="">In short, if you pushed a change, assume someone else has 
pulled it already and amending your commit (changing history) would 
cause lots of pain.</p>
<p d__="">In shorter, if you pushed, it’s too late. No more amending the commit.</p>
</blockquote>
<p d__="">So what are some use cases?</p>
<ul>
<li d__="">Maybe you botched the commit message and you want to rewrite it.</li>
<li d__="">Maybe you forgot to add some files.</li>
</ul>
<p d__="">That kind of thing that none of us have ever done ever, right?</p>
<h2 data-number="27.1" id="amending-the-commit-message" d__=""><span class="header-section-number">27.1</span> Amending the Commit Message</h2>
<p d__="">This one is pretty easy. Let’s take an example of a commit 
that I’ve botched. Note that this is completely committed at this 
point—I’ve already run <code s__="13">git commit</code>. But, crucially, I haven’t pushed yet.</p>
<p d__="">Let’s get a status and see the log:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb291-1" d__=""><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb291-2" d__=""><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb291-3" d__=""><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a>  nothing to commit, working tree clean</span>
<span id="cb291-4" d__=""><a href="#cb291-4" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb291-5" d__=""><a href="#cb291-5" aria-hidden="true" tabindex="-1"></a>  commit d7fba6838a689c3de15a27e272e8e4123d7c2460 (HEAD -&gt; main)</span>
<span id="cb291-6" d__=""><a href="#cb291-6" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb291-7" d__=""><a href="#cb291-7" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Nov 21 20:39:04 2024 -0800</span>
<span id="cb291-8"><a href="#cb291-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-9" d__=""><a href="#cb291-9" aria-hidden="true" tabindex="-1"></a>    addded</span></code></pre></div>
<p d__="">That’s one “d” too many in the commit message. Fixing it up is as easy as this:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb292-1" d__=""><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a>$ git commit --amend</span></code></pre></div>
<p d__="">And that brings me right into my editor where I can change the message.</p>
<p d__="">If I don’t want to use the editor, I can do it on the command line:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb293-1" d__=""><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>$ git commit --amend -m "the new commit message"</span></code></pre></div>
<p d__="">Note that doing this preserves the author of the commit. 
(Which is probably what you want 99.9999% of the time since you were 
probably already the author.) If you want to change the identity, you’ll
 have to reconfigure your identity with <code s__="13">git config</code> and then run:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb294-1" d__=""><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a>$ git commit --amend --reset-author</span></code></pre></div>
<h2 data-number="27.2" id="adding-some-files-to-the-commit" d__=""><span class="header-section-number">27.2</span> Adding some Files to the Commit</h2>
<p d__="">Ugh! You just made that commit but you forgot to add one of the files to it! You got <code s__="13">foo.c</code> and <code s__="13">bar.c</code> in there, but you left out <code s__="13">baz.h</code>!</p>
<p d__="">Let’s look.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb295-1" d__=""><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>$ ls</span>
<span id="cb295-2" d__=""><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>  bar.c  baz.h  foo.c</span>
<span id="cb295-3" d__=""><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a>$ git log --name-only</span>
<span id="cb295-4" d__=""><a href="#cb295-4" aria-hidden="true" tabindex="-1"></a>  commit b307686933dca3db718e6a3e3f8226be11e7e278 (HEAD -&gt; main)</span>
<span id="cb295-5" d__=""><a href="#cb295-5" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb295-6" d__=""><a href="#cb295-6" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Nov 21 20:47:08 2024 -0800</span>
<span id="cb295-7"><a href="#cb295-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-8" d__=""><a href="#cb295-8" aria-hidden="true" tabindex="-1"></a>      added</span>
<span id="cb295-9"><a href="#cb295-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-10" d__=""><a href="#cb295-10" aria-hidden="true" tabindex="-1"></a>  bar.c</span>
<span id="cb295-11" d__=""><a href="#cb295-11" aria-hidden="true" tabindex="-1"></a>  foo.c</span></code></pre></div>
<p d__="">OK, so how can we get <code s__="13">baz.h</code> in there? Like this:</p>
<ol type="1">
<li d__=""><code s__="13">git add baz.h</code> to add it to the stage.</li>
<li d__=""><code s__="13">git commit --amend</code> to get it into the commit.</li>
</ol>
<p d__="">This will bring you into an editor to edit the commit message. You can just save it as is. Or you can specify the <code s__="13">-m</code> option on the command line to give a new message.</p>
<p d__="">Alternately, if you’re just adding files, you might not need to change the commit message at all. In that case you can just run:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb296-1" d__=""><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a>$ git commit --amend --no-edit</span></code></pre></div>
<p d__="">That’ll run the amend and not edit the commit message at all.</p>
<p d__="">And there we have it—you can easily amend the last commit. Just be sure you haven’t pushed it before you do.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="28" id="difftool-1" d__=""><span class="header-section-number">28</span> Difftool</h1>
<p d__="">Admittedly, this diff output is hard to read. I swear, though, you do get used to it. I use it all the time.</p>
<p d__="">That said, it can be nicer to see something more <em>visual</em>, you know, like the old version on the left and the new version on the right in a way that’s visually easier to comprehend.</p>
<blockquote>
<p d__=""><strong>If you’re using VS Code or some other IDEs, you get 
some nice diffing for free and don’t necessarily need to pay attention 
to this section.</strong> See more in the VS Code chapter.</p>
</blockquote>
<p d__="">First, the bad news is that Git doesn’t support this out of the box.</p>
<p d__="">The good news is that there are a lot of third-party tools 
that do, and you can easily hook them up so that they work with Git 
super easily.</p>
<p d__="">How easy?</p>
<p d__="">Once you set it up, you’ll be able to just write <code s__="13">difftool</code> instead of <code s__="13">diff</code> on the command line. For example:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb297-1" d__=""><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a>$ git difftool HEAD~3^!</span></code></pre></div>
<p d__="">And what does that get you? For me, where I use Vim and have 
Vimdiff set up as my difftool, it gives me a screen like in Figure 28.1.</p>
<figure>
<img src="Beej's%20Guide%20to%20Git_files/img_difftool.svg" title="Vimdiff as the difftool." alt="Vimdiff as the difftool.">
<figcaption aria-hidden="true" s__="14" d__="">Vimdiff as the difftool.</figcaption>
</figure>
<p d__="">This might be a little tough to see in black and white, but 
what we have is the old version on the left and the new version on the 
right. The lines of minus signs on the left indicate lines that don’t 
exist in the old version, and we can see highlighted lines on the right 
that exist in the new version.</p>
<p d__="">But if you just try to run <code s__="13">git difftool</code> out of the box, it won’t work. You have to configure it first.</p>
<h2 data-number="28.1" id="configuring" d__=""><span class="header-section-number">28.1</span> Configuring</h2>
<p d__="">Firstly, Git normally prompts you before launching a third-party difftool. This is annoying, so let’s turn it off globally:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb298-1" d__=""><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a>$ git config --global difftool.prompt false</span></code></pre></div>
<p d__="">Secondly, we need to tell it which tool to use.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb299-1" d__=""><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a>$ git config --global diff.tool vimdiff</span></code></pre></div>
<p d__="">And that might be enough. If <code s__="13">vimdiff</code> (or whichever diff tool you’re using) is in your <code s__="13">PATH</code><a href="#fn39" class="footnote-ref" id="fnref39" role="doc-noteref"><sup s__="13" d__="">39</sup></a>, you should be in business and you’re good to go.</p>
<p d__="">If it’s not in your <code s__="13">PATH</code>, maybe because you installed it locally in your home directory tree somewhere, you can either add it to your <code s__="13">PATH</code> (search the Net for how to do this), <em>or</em> you can specify the full path to your particular difftool. Here’s an example with <code s__="13">vimdiff</code>, which is redundant for me because <code s__="13">/usr/bin</code> is already in my <code s__="13">PATH</code>.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb300-1" d__=""><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a>$ git config --global difftool.vimdiff.path /usr/bin/vimdiff</span></code></pre></div>
<p d__="">If you’re using a different difftool other than <code s__="13">vimdiff</code>, replace that part of the config line with the name of the command.</p>
<p d__="">Again, you only have to set the path if the tool isn’t installed in a standard place.</p>
<h2 data-number="28.2" id="available-difftools" d__=""><span class="header-section-number">28.2</span> Available Difftools</h2>
<p d__="">There are a number of diff tools out there you can choose 
from. Here’s a partial list, with the caveat that I’ve only ever used 
Vimdiff.</p>
<ul>
<li><a href="https://www.araxis.com/merge/index.en" d__="">Araxis Merge</a><a href="#fn40" class="footnote-ref" id="fnref40" role="doc-noteref"><sup s__="13" d__="">40</sup></a></li>
<li><a href="https://www.scootersoftware.com/" d__="">Beyond Compare</a><a href="#fn41" class="footnote-ref" id="fnref41" role="doc-noteref"><sup s__="13" d__="">41</sup></a></li>
<li><a href="https://sourcegear.com/diffmerge/" d__="">DiffMerge</a><a href="#fn42" class="footnote-ref" id="fnref42" role="doc-noteref"><sup s__="13" d__="">42</sup></a></li>
<li><a href="https://kdiff3.sourceforge.net/" d__="">Kdiff3</a><a href="#fn43" class="footnote-ref" id="fnref43" role="doc-noteref"><sup s__="13" d__="">43</sup></a></li>
<li><a href="https://apps.kde.org/kompare/" d__="">Kompare</a><a href="#fn44" class="footnote-ref" id="fnref44" role="doc-noteref"><sup s__="13" d__="">44</sup></a></li>
<li><a href="https://meldmerge.org/" d__="">Meld</a><a href="#fn45" class="footnote-ref" id="fnref45" role="doc-noteref"><sup s__="13" d__="">45</sup></a></li>
<li><a href="https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge" d__="">P4Merge</a><a href="#fn46" class="footnote-ref" id="fnref46" role="doc-noteref"><sup s__="13" d__="">46</sup></a></li>
<li d__="">Vimdiff (comes with <a href="https://www.vim.org/" d__="">Vim</a><a href="#fn47" class="footnote-ref" id="fnref47" role="doc-noteref"><sup s__="13" d__="">47</sup></a>)</li>
<li><a href="https://winmerge.org/?lang=en" d__="">WinMerge</a><a href="#fn48" class="footnote-ref" id="fnref48" role="doc-noteref"><sup s__="13" d__="">48</sup></a></li>
</ul>
<p d__="">Some of these are free, some are paid, and some are free trial.</p>
<p d__="">And remember, VS Code has this functionality without using difftool.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="29" id="mergetool" d__=""><span class="header-section-number">29</span> Mergetool</h1>
<p d__="">Do you hate all those <code s__="13">&gt;&gt;&gt;&gt;&gt;</code>, <code s__="13">=====</code>, and <code s__="13">&lt;&lt;&lt;&lt;&lt;</code> things that Git puts in your files during a merge conflict?</p>
<p d__="">If so, using a <em>merge tool</em> might be what you’re after.
 A merge tool will give you a graphical display showing your changes, 
the conflicting changes, and the desired result of the merge. And it 
shows it in an easy-to-digest form.</p>
<blockquote>
<p d__=""><strong>Personally, I dislike merge tools.</strong> That seems
 nuts, but let me explain a moment. When you’re in a merge conflict, the
 only thing you have to do is edit those files with the <code s__="13">=====</code> delimiters and make them <em>Right</em>, remember? You have to modify the file until it is correct, ripping out those delimiters as you go.</p>
<p d__="">It’s just you and the file, that’s it. No intermediaries 
messing with the contents. And when you’re done, what you have is your 
final answer.</p>
<p d__="">But merge tools are intermediaries by their very nature. And 
we must trust that we’re using them correctly to get the job done. And, 
for me, even after I’ve used them probably correctly, I still feel like I
 have to manually inspect the result to make sure it’s <em>Right</em>.</p>
<p d__="">The benefit I do see is that with a merge tool you typically 
get a side-by-side view of the changes, as opposed to the up-and-down 
view you effectively get when editing the conflicting file. This can 
make the merge tool easier to use when you have a number of big 
conflicting hunks in a file.</p>
<p d__="">But in real life, I never use one. Also in real life, <em>lots</em> of people use them.</p>
</blockquote>
<h2 data-number="29.1" id="merge-tool-operations" d__=""><span class="header-section-number">29.1</span> Merge Tool Operations</h2>
<p d__="">Merge tools operate on a file-by-file basis. So when you’re using on, you’re using it on a particular conflicting file.</p>
<p d__="">They all tend to show you at least three panels:</p>
<ul>
<li d__="">Your conflicting changes</li>
<li d__="">Their conflicting changes</li>
<li d__="">The result file that is <em>Right</em></li>
</ul>
<p d__="">And they all tend to have the same core operations:</p>
<ul>
<li d__=""><strong>Go to next conflict</strong>—all panels will move to the next conflict.</li>
<li><strong d__="">Go to previous conflict</strong></li>
<li d__=""><strong>Choose yours</strong>—copy <em>your</em> conflicting changes into the final result, i.e.&nbsp;your changes are <em>Right</em>.</li>
<li d__=""><strong>Choose theirs</strong>—copy <em>their</em> conflicting changes into the final result, i.e.&nbsp;your changes are <em>Right</em>.</li>
</ul>
<p d__="">In terms of usage, here’s what we’re going to do, assuming 
that the merge tool starts you at the first conflict when it is 
launched:</p>
<ol type="1">
<li d__="">Choose either “yours” or “theirs” to keep the <em>Right</em> changes.</li>
<li d__="">Go to the next conflict.</li>
<li d__="">Repeat from Step 1 until all conflicts are resolved.</li>
</ol>
<p d__="">After you’ve gone through all the conflicts and chosen one or the other, make sure the final result is <em>Right</em> and then save/finish the result.</p>
<p d__="">The merge tool will have staged the result for you, ready to commit and finish the merge.</p>
<h2 data-number="29.2" id="some-example-merge-tools" d__=""><span class="header-section-number">29.2</span> Some Example Merge Tools</h2>
<p d__="">There are a lot of them, and I’ll include some links here in alphabetical order. Cross-platform unless otherwise noted.</p>
<ul>
<li d__=""><a href="https://www.araxis.com/merge/index.en" d__="">Araxis Merge</a><a href="#fn49" class="footnote-ref" id="fnref49" role="doc-noteref"><sup s__="13" d__="">49</sup></a>—Windows, Mac</li>
<li><a href="https://www.scootersoftware.com/" d__="">Beyond Compare</a><a href="#fn50" class="footnote-ref" id="fnref50" role="doc-noteref"><sup s__="13" d__="">50</sup></a></li>
<li d__=""><a href="https://www.devart.com/codecompare/" d__="">Code Compare</a><a href="#fn51" class="footnote-ref" id="fnref51" role="doc-noteref"><sup s__="13" d__="">51</sup></a>—Windows</li>
<li><a href="https://invent.kde.org/sdk/kdiff3" d__="">KDiff3</a><a href="#fn52" class="footnote-ref" id="fnref52" role="doc-noteref"><sup s__="13" d__="">52</sup></a></li>
<li><a href="https://meldmerge.org/" d__="">Meld</a><a href="#fn53" class="footnote-ref" id="fnref53" role="doc-noteref"><sup s__="13" d__="">53</sup></a></li>
<li><a href="https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge" d__="">P4Merge</a><a href="#fn54" class="footnote-ref" id="fnref54" role="doc-noteref"><sup s__="13" d__="">54</sup></a></li>
<li><a href="https://www.vim.org/" d__="">Vimdiff</a><a href="#fn55" class="footnote-ref" id="fnref55" role="doc-noteref"><sup s__="13" d__="">55</sup></a></li>
<li d__=""><a href="https://winmerge.org/" d__="">WinMerge</a><a href="#fn56" class="footnote-ref" id="fnref56" role="doc-noteref"><sup s__="13" d__="">56</sup></a>—Windows</li>
</ul>
<p d__="">In addition, IDEs like VS Code and IntelliJ often have their 
own built-in merge tools that work independent of Git (no need to 
configure anything in Git).</p>
<h2 data-number="29.3" id="using-vimdiff-as-a-merge-tool" d__=""><span class="header-section-number">29.3</span> Using Vimdiff as a Merge Tool</h2>
<p d__="">We’ll do a quick run-through of using Vimdiff as a merge tool 
since it covers all the bases and has some tricky configuration. Other 
third-party tools (except VS Code and other IDEs with this functionality
 built-in) would have a similar configuration. Search the Internet for 
the proper config for other tools.</p>
<blockquote>
<p d__=""><strong>This isn’t a Vim tutorial.</strong> So I’m just going 
to assume you know how to do things like save files and quit. I will say
 that to switch windows in Vim you use <code s__="13">CTRL-W</code> followed by a cursor direction, such as <code s__="13">CTRL-W</code> followed by <code s__="13">h</code> to move to the window to the left.</p>
</blockquote>
<p d__="">First things first, let’s set up the configuration.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb301-1" d__=""><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a>$ git config --global set merge.tool vimdiff</span>
<span id="cb301-2" d__=""><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>$ git config --global set mergetool.vimdiff.cmd \</span>
<span id="cb301-3" d__=""><a href="#cb301-3" aria-hidden="true" tabindex="-1"></a>                             'vimdiff "$LOCAL" "$REMOTE" "$MERGED"'</span></code></pre></div>
<p d__="">(Second command split to fit in the book margins—it could be on a single line.)</p>
<p d__="">Once that’s in place, let’s say we have a merge conflict.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb302-1" d__=""><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a>$ git merge branch</span>
<span id="cb302-2" d__=""><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a>  Auto-merging foo.txt</span>
<span id="cb302-3" d__=""><a href="#cb302-3" aria-hidden="true" tabindex="-1"></a>  CONFLICT (content): Merge conflict in foo.txt</span>
<span id="cb302-4" d__=""><a href="#cb302-4" aria-hidden="true" tabindex="-1"></a>  Automatic merge failed; fix conflicts and then commit the result.</span></code></pre></div>
<p d__="">At this point, we’re in a classic run-of-the-mill merge conflict.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb303-1" d__=""><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb303-2" d__=""><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb303-3" d__=""><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a>  You have unmerged paths.</span>
<span id="cb303-4" d__=""><a href="#cb303-4" aria-hidden="true" tabindex="-1"></a>    (fix conflicts and run "git commit")</span>
<span id="cb303-5" d__=""><a href="#cb303-5" aria-hidden="true" tabindex="-1"></a>    (use "git merge --abort" to abort the merge)</span>
<span id="cb303-6"><a href="#cb303-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-7" d__=""><a href="#cb303-7" aria-hidden="true" tabindex="-1"></a>  Unmerged paths:</span>
<span id="cb303-8" d__=""><a href="#cb303-8" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to mark resolution)</span>
<span id="cb303-9" d__=""><a href="#cb303-9" aria-hidden="true" tabindex="-1"></a>      both modified:   foo.txt</span>
<span id="cb303-10"><a href="#cb303-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-11" d__=""><a href="#cb303-11" aria-hidden="true" tabindex="-1"></a>  no changes added to commit (use "git add" and/or "git commit -a")</span></code></pre></div>
<p d__="">But since we’ve set up our merge tool, let’s use it:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb304-1" d__=""><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a>$ git mergetool</span></code></pre></div>
<blockquote>
<p d__=""><strong>If Git is prompting you to ask if you really want to run the merge tool</strong> (which you presumably do since you just ran <code s__="13">git mergetool</code>), you can turn off that “feature” with this config command:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb305-1" d__=""><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>$ git config --global set mergetool.prompt false</span></code></pre></div>
</blockquote>
<!-- ` -->
<p d__="">This is going to bring up a Vim window with three panels. The 
left is your local changes, the middle is the file as it exists in the 
repo, and the right is the result of the merge.</p>
<p d__="">The goal is to make the one on the right look <em>Right</em>. Now, you could just do that outright by modifying the file there, but at that point, why even use a merge tool?</p>
<p d__="">So we’ll follow the steps we outlined earlier.</p>
<p d__="">When we first run <code s__="13">git mergetool</code>, we get dropped at the first conflict with the cursor in the left window. The left window holds the changes we made.</p>
<p d__="">In the middle window, we’ll see the corresponding changes that are in the repo.</p>
<p d__="">And in the right repo, we see what will be staged when we’re done. Right now in the right window, we see all the <code s__="13">=====</code> and <code s__="13">&lt;&lt;&lt;&lt;&lt;</code> stuff. But we’ll change that in a moment.</p>
<p d__=""><em>Move the cursor to the right window.</em> This is where the action will be.</p>
<p d__="">Make sure the cursor is on a highlighted section (which 
probably will be in multiple colors). This highlighted section is what 
we’ll replace.</p>
<p d__="">Let’s choose which change to use.</p>
<p d__="">If you want to keep your changes (and ditch the ones in the repo), use this Vim command:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb306-1" d__=""><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a>:diffget LOCAL</span></code></pre></div>
<p d__="">If you want to discard your changes (and keep the ones in the repo), use this command:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb307-1" d__=""><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>:diffget REMOTE</span></code></pre></div>
<p d__="">When you run one of those, you’ll see the content in the right window change to what you wanted.</p>
<p d__="">And then you can go to the next conflict with <code s__="13">]c</code>. (or to the previous with <code s__="13">[c</code>.)</p>
<p d__="">Do this until the right window is <em>Right</em>. Note that you are also free to edit the right window directly all you want.</p>
<p d__="">When you’re done, save the right window and quit all the windows.</p>
<p d__=""><strong>Importantly</strong> the second you exit the merge 
tool, Git will stage whatever you saved in the rightmost window. If you 
exited too soon and got stuff staged before you were done, use <code s__="13">git checkout --merge</code> with the file in question to get it off the stage and back to “both modified” state.</p>
<p d__="">If there are multiple conflicting files, Git will bring up the merge tool again to handle the next file in line.</p>
<p d__="">And when you’re done, the changes are made and you can finish the merge with a commit as per usual.</p>
<p d__="">But wait—what’s that <code s__="13">.orig</code> file that wasn’t there before? Read on!</p>
<h2 data-number="29.4" id="backing-up-the-originals" d__=""><span class="header-section-number">29.4</span> Backing up the Originals</h2>
<p d__="">By default, when using a merge tool, Git will keep a backup of
 the file before the merge tool touched it. You’ll see these with a <code s__="13">.orig</code> extension, like so:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb308-1" d__=""><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>foo.txt.orig</span>
<span id="cb308-2" d__=""><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a>bar.txt.orig</span></code></pre></div>
<p d__="">You can add these to your <code s__="13">.gitignore</code> if you want to, or you can prevent the creation of them in the first place with this configuration variable:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb309-1" d__=""><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a>$ git config --global set mergetool.keepBackup false</span></code></pre></div>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="30" id="making-playground" d__=""><span class="header-section-number">30</span> Appendix: Making a Playground</h1>
<p></p>
<p d__="">In programming circles in general, a <em>playground</em> is a place you can go to mess with code and tech and not worry about messing up your production system.</p>
<p d__="">And there are places you can go online to find these, but with Git, I find it’s just as easy to make your own local repo.</p>
<p d__="">Here’s a way to make a new local repo called <code s__="13">playground</code> out of the current directory. (You should <strong>not</strong> be under a Git repo at this time; create the playground outside other existing repos.)</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb310-1" d__=""><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a>$ git init playground</span>
<span id="cb310-2" d__=""><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>  Initialized empty Git repository in /user/playground/.git/</span></code></pre></div>
<p d__=""><code s__="13">playground</code> isn’t a special name. You can call it <code s__="13">foo</code> or anything. I’ll just use it for this example.</p>
<p d__="">What that command did was create a new subdirectory called <code s__="13">playground</code> and create a Git repo in it.</p>
<p d__="">Let’s continue at the end: how do you delete the repo? You just remove the directory.</p>
<pre><code s__="13" d__="">$ rm -rf playground   # delete the playground repo</code></pre>
<p d__="">And let’s create it again:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb312-1" d__=""><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a>$ git init playground</span></code></pre></div>
<p d__="">We have all the power!</p>
<blockquote>
<p d__=""><strong>Note:</strong> This repo only exists on this computer;
 it has no remotes and no way to push. You could add that stuff later, 
if you wanted, but playgrounds tend to be temporary areas where you’re 
just trying things out.</p>
</blockquote>
<p d__="">Let’s go into the playground and check it out.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb313-1" d__=""><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a>$ cd playground</span>
<span id="cb313-2" d__=""><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>$ ls -la</span>
<span id="cb313-3" d__=""><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a>  total 4</span>
<span id="cb313-4" d__=""><a href="#cb313-4" aria-hidden="true" tabindex="-1"></a>  drwxr-xr-x  3 user group   18 Jul 13 14:43 .</span>
<span id="cb313-5" d__=""><a href="#cb313-5" aria-hidden="true" tabindex="-1"></a>  drwxr-xr-x 22 user group 4096 Jul 13 14:43 ..</span>
<span id="cb313-6" d__=""><a href="#cb313-6" aria-hidden="true" tabindex="-1"></a>  drwxr-xr-x  7 user group  119 Jul 13 14:43 .git</span></code></pre></div>
<p d__="">There’s a directory there called <code s__="13">.git</code> that has all the metadata in it.</p>
<blockquote>
<p d__=""><strong>Note:</strong> If we wanted to change this directory from a Git repo to just a normal directory, we could run this:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb314-1" d__=""><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a>$ rm -rf .git       # Delete the .git directory</span></code></pre></div>
<!-- ` -->
<p d__="">Again, we have all the power! But let’s show some restraint and not do that yet.</p>
</blockquote>
<p d__="">What can we do?</p>
<p d__="">What <em>can’t</em> we do? Let’s make a file and see where we stand:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb315-1" d__=""><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a>$ echo "Hello, world" &gt; hello.txt   # Create a file</span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-3" d__=""><a href="#cb315-3" aria-hidden="true" tabindex="-1"></a>$ ls -l</span>
<span id="cb315-4"><a href="#cb315-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-5" d__=""><a href="#cb315-5" aria-hidden="true" tabindex="-1"></a>  total 4</span>
<span id="cb315-6" d__=""><a href="#cb315-6" aria-hidden="true" tabindex="-1"></a>  -rw-r--r-- 1 user group 13 Jul 13 14:47 hello.txt</span>
<span id="cb315-7"><a href="#cb315-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-8" d__=""><a href="#cb315-8" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb315-9"><a href="#cb315-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-10" d__=""><a href="#cb315-10" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb315-11"><a href="#cb315-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-12" d__=""><a href="#cb315-12" aria-hidden="true" tabindex="-1"></a>  No commits yet</span>
<span id="cb315-13"><a href="#cb315-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-14" d__=""><a href="#cb315-14" aria-hidden="true" tabindex="-1"></a>  Untracked files:</span>
<span id="cb315-15" d__=""><a href="#cb315-15" aria-hidden="true" tabindex="-1"></a>    (use "git add &lt;file&gt;..." to include in what will be committed)</span>
<span id="cb315-16" d__=""><a href="#cb315-16" aria-hidden="true" tabindex="-1"></a>      hello.txt</span>
<span id="cb315-17"><a href="#cb315-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-18" d__=""><a href="#cb315-18" aria-hidden="true" tabindex="-1"></a>  nothing added to commit but untracked files present (use "git</span>
<span id="cb315-19" d__=""><a href="#cb315-19" aria-hidden="true" tabindex="-1"></a>  add" to track)</span></code></pre></div>
<p d__="">Now we have an untracked file.</p>
<p d__="">We can <code s__="13">git add</code> it, we can <code s__="13">git commit</code> it, we can create branches, we can merge them and make conflicts and resolve them and <code s__="13">git rebase</code> and <code s__="13">git reset</code> and all kinds of stuff.</p>
<p d__="">We don’t have a remote, so the only things we can’t do involve pushing and pulling.</p>
<p d__="">But it turns out we can even make that happen! Let’s see how.</p>
<h2 data-number="30.1" id="cloning-bare-repos" d__=""><span class="header-section-number">30.1</span> Cloning Bare Repos</h2>
<p> </p>
<p d__="">A <em>bare repo</em> is one without a working tree. You can’t 
go in there to see files, because they don’t exist in there in a normal 
sense. The only thing that’s there is metadata and the commit snapshots.</p>
<p></p>
<p d__="">You can clone, push, and pull bare repos.</p>
<p d__="">Let’s make one (again, you could name it anything you want), noting the <code s__="13">--bare</code> command line option:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb316-1" d__=""><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a>$ git init --bare origin_repo</span>
<span id="cb316-2" d__=""><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a>  Initialized empty Git repository in /user/origin_repo/</span></code></pre></div>
<p d__="">If you look in there (to be clear, you have no reason to) you’ll just see metadata and directories.</p>
<p d__="">Before we can use it, we’d better clone it. For ease, we’ll do this from the same directory we created it.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb317-1" d__=""><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>$ git clone origin_repo playground</span>
<span id="cb317-2" d__=""><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>  Cloning into 'playground'...</span>
<span id="cb317-3" d__=""><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>  warning: You appear to have cloned an empty repository.</span>
<span id="cb317-4" d__=""><a href="#cb317-4" aria-hidden="true" tabindex="-1"></a>  done.</span></code></pre></div>
<p d__="">It is empty, naturally. We haven’t made any commits.</p>
<p d__="">Now we have two repos in this directory:</p>
<ul>
<li d__=""><code s__="13">origin_repo</code>: the bare repo we cloned, and:</li>
<li d__=""><code s__="13">playground</code>: the repo we cloned from it.</li>
</ul>
<p d__="">Let’s jump in there and see what’s up:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb318-1" d__=""><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a>$ cd playground</span>
<span id="cb318-2" d__=""><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a>$ git remote -v</span>
<span id="cb318-3" d__=""><a href="#cb318-3" aria-hidden="true" tabindex="-1"></a>  origin    /user/origin_repo (fetch)</span>
<span id="cb318-4" d__=""><a href="#cb318-4" aria-hidden="true" tabindex="-1"></a>  origin    /user/origin_repo (push)</span></code></pre></div>
<p d__="">We have remotes! Of course we do. We cloned this repo, and Git automatically sets up the <code s__="13">origin</code> remote.</p>
<p d__="">And remember that <code s__="13">origin</code> is just an alias for some remote that’s identified somehow. We’re used to seeing remotes that start with <code s__="13">https</code> or <code s__="13">ssh</code>, but here’s an example of a remote that’s just another subdirectory on your disk.</p>
<p></p>
<p d__="">Let’s make a file and commit it, and see if we can push!</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb319-1" d__=""><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a>$ echo "Hello, world" &gt; hello.txt</span>
<span id="cb319-2" d__=""><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a>$ git add hello.txt</span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-4" d__=""><a href="#cb319-4" aria-hidden="true" tabindex="-1"></a>$ git commit -m added</span>
<span id="cb319-5" d__=""><a href="#cb319-5" aria-hidden="true" tabindex="-1"></a>  [main (root-commit) 4a82a14] added</span>
<span id="cb319-6" d__=""><a href="#cb319-6" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span>
<span id="cb319-7" d__=""><a href="#cb319-7" aria-hidden="true" tabindex="-1"></a>   create mode 100644 hello.txt</span>
<span id="cb319-8"><a href="#cb319-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-9" d__=""><a href="#cb319-9" aria-hidden="true" tabindex="-1"></a>$ git push</span>
<span id="cb319-10" d__=""><a href="#cb319-10" aria-hidden="true" tabindex="-1"></a>  Enumerating objects: 3, done.</span>
<span id="cb319-11" d__=""><a href="#cb319-11" aria-hidden="true" tabindex="-1"></a>  Counting objects: 100% (3/3), done.</span>
<span id="cb319-12" d__=""><a href="#cb319-12" aria-hidden="true" tabindex="-1"></a>  Writing objects: 100% (3/3), 907 bytes | 907.00 KiB/s, done.</span>
<span id="cb319-13" d__=""><a href="#cb319-13" aria-hidden="true" tabindex="-1"></a>  Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)</span>
<span id="cb319-14" d__=""><a href="#cb319-14" aria-hidden="true" tabindex="-1"></a>  To /user/origin_repo</span>
<span id="cb319-15" d__=""><a href="#cb319-15" aria-hidden="true" tabindex="-1"></a>   * [new branch]      main -&gt; main</span>
<span id="cb319-16"><a href="#cb319-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-17" d__=""><a href="#cb319-17" aria-hidden="true" tabindex="-1"></a>$ git branch -va</span>
<span id="cb319-18" d__=""><a href="#cb319-18" aria-hidden="true" tabindex="-1"></a>  * main                4a82a14 added</span>
<span id="cb319-19" d__=""><a href="#cb319-19" aria-hidden="true" tabindex="-1"></a>    remotes/origin/main 4a82a14 added</span></code></pre></div>
<p d__="">And we’ve successfully pushed our file up to <code s__="13">origin</code>.</p>
<p d__="">Finally, let’s make another clone. First we’ll <code s__="13">cd</code> back down to where <code s__="13">origin_repo</code> is and clone again this time into <code s__="13">playground2</code>:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb320-1" d__=""><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a>$ git clone origin_repo playground2</span>
<span id="cb320-2" d__=""><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a>  Cloning into 'playground2'...</span>
<span id="cb320-3" d__=""><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a>  done.</span></code></pre></div>
<p d__="">Let’s <code s__="13">cd</code> in there and see what we have. It’s a clone of the repo, so we’d better see the <code s__="13">hello.txt</code> we pushed in there from <code s__="13">playground</code> earlier.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb321-1" d__=""><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a>$ cd playground2 </span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-3" d__=""><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a>$ ls</span>
<span id="cb321-4" d__=""><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a>  hello.txt</span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-6" d__=""><a href="#cb321-6" aria-hidden="true" tabindex="-1"></a>$ cat hello.txt </span>
<span id="cb321-7" d__=""><a href="#cb321-7" aria-hidden="true" tabindex="-1"></a>  Hello, world</span></code></pre></div>
<p d__=""><em>Voila!</em> It’s there!</p>
<p d__="">Since <code s__="13">playground</code> and <code s__="13">playground2</code> are both clones of the same repo, you can push from one and pull from the other to get the changes.</p>
<p></p>
<p d__="">You can even make conflicting changes and try to <code s__="13">git pull</code> or <code s__="13">git pull --rebase</code> and see how things go wrong and how to fix them.</p>
<p d__="">And if everything goes completely off the rails, you can just delete the directories and start again. It’s a playground!</p>
<h2 data-number="30.2" id="automating-playground-builds" d__=""><span class="header-section-number">30.2</span> Automating Playground Builds</h2>
<p> </p>
<p d__="">It can be tedious to continually destroy and recreate repos 
that you’re trying to learn from. I suggest putting your commands in a <em>shell script</em>, which is just a text file that contains the commands to run.</p>
<p d__="">Let’s say you make a new text file called <code s__="13">buildrepo.sh</code> and you put the following text in it:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb322-1" d__=""><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a>rm -rf playground    # Remove old playground</span>
<span id="cb322-2" d__=""><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a>git init playground  # Create a new one</span>
<span id="cb322-3" d__=""><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a>cd playground</span>
<span id="cb322-4" d__=""><a href="#cb322-4" aria-hidden="true" tabindex="-1"></a>echo "Hello, world!" &gt; hello.txt   # Create hello.txt</span>
<span id="cb322-5" d__=""><a href="#cb322-5" aria-hidden="true" tabindex="-1"></a>echo "foobar" &gt; foobar.txt         # Create foobar.txt</span>
<span id="cb322-6" d__=""><a href="#cb322-6" aria-hidden="true" tabindex="-1"></a>git add hello.txt foobar.txt</span>
<span id="cb322-7" d__=""><a href="#cb322-7" aria-hidden="true" tabindex="-1"></a>git commit -m added</span>
<span id="cb322-8" d__=""><a href="#cb322-8" aria-hidden="true" tabindex="-1"></a>echo "foobar again" &gt;&gt; foobar.txt  # Append text</span>
<span id="cb322-9" d__=""><a href="#cb322-9" aria-hidden="true" tabindex="-1"></a>git add foobar.txt</span>
<span id="cb322-10" d__=""><a href="#cb322-10" aria-hidden="true" tabindex="-1"></a>git commit -m updated</span></code></pre></div>
<p d__="">That’s just a bunch of shell commands. But here’s the fun bit: if you run <code s__="13">sh</code> (the shell) with <code s__="13">buildrepo.sh</code> as an argument, it will run all those commands in order!</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb323-1" d__=""><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a>$ sh buildrepo.sh</span>
<span id="cb323-2" d__=""><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>  Initialized empty Git repository in /user/playground/.git/</span>
<span id="cb323-3" d__=""><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a>  [main (root-commit) 2239237] added</span>
<span id="cb323-4" d__=""><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a>   2 files changed, 2 insertions(+)</span>
<span id="cb323-5" d__=""><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a>   create mode 100644 foobar.txt</span>
<span id="cb323-6" d__=""><a href="#cb323-6" aria-hidden="true" tabindex="-1"></a>   create mode 100644 hello.txt</span>
<span id="cb323-7" d__=""><a href="#cb323-7" aria-hidden="true" tabindex="-1"></a>  [main 0533186] updated</span>
<span id="cb323-8" d__=""><a href="#cb323-8" aria-hidden="true" tabindex="-1"></a>   1 file changed, 1 insertion(+)</span></code></pre></div>
<blockquote>
<p d__=""><strong>Protip:</strong> If you run <code s__="13">sh -x buildrepo.sh</code> it will also show you the commands it is running.</p>
</blockquote>
<p d__="">After that, we can <code s__="13">cd</code> in there and see what happened:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb324-1" d__=""><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>$ cd playground</span>
<span id="cb324-2" d__=""><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb324-3" d__=""><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a>  commit 05331869d77973dfbac38a31c40a44f99225e85d</span>
<span id="cb324-4" d__=""><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb324-5" d__=""><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a>  Date:   Sat Jul 13 15:19:42 2024 -0700</span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-7" d__=""><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a>      updated</span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-9" d__=""><a href="#cb324-9" aria-hidden="true" tabindex="-1"></a>  commit 2239237cc44d11e9479dcc610e5d02ad283766ce</span>
<span id="cb324-10" d__=""><a href="#cb324-10" aria-hidden="true" tabindex="-1"></a>  Author: User Name &lt;user@example.com&gt;</span>
<span id="cb324-11" d__=""><a href="#cb324-11" aria-hidden="true" tabindex="-1"></a>  Date:   Sat Jul 13 15:19:41 2024 -0700</span>
<span id="cb324-12"><a href="#cb324-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-13" d__=""><a href="#cb324-13" aria-hidden="true" tabindex="-1"></a>      added</span>
<span id="cb324-14"><a href="#cb324-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-15" d__=""><a href="#cb324-15" aria-hidden="true" tabindex="-1"></a>$ cat foobar.txt </span>
<span id="cb324-16" d__=""><a href="#cb324-16" aria-hidden="true" tabindex="-1"></a>  foobar</span>
<span id="cb324-17" d__=""><a href="#cb324-17" aria-hidden="true" tabindex="-1"></a>  foobar again</span></code></pre></div>
<p d__="">By putting the initialization commands in a shell script, it’s
 almost like having a “saved game” at that point. You can just rerun the
 shell script any time you want the same playground set up.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="31" id="editor-get-out" d__=""><span class="header-section-number">31</span> Appendix: Getting Out of Editors</h1>
<p></p>
<p d__="">If you try to <code s__="13">git commit</code> and don’t specify <code s__="13">-m</code> for a message, or if you <code s__="13">git pull</code> and there’s a non-fast-forward merge, or if you <code s__="13">git merge</code> and there’s a non-fast-forward merge and you don’t specify <code s__="13">-m</code>, or what I’m sure are a host of other reasons, you might get popped into an editor.</p>
<p d__="">And you might not be familiar with that editor.</p>
<p d__="">So here’s how to get out of it.</p>
<ul>
<li><p d__=""><strong>Nano</strong>: If the editor says “Nano” or “Pico” in the upper left, then edit the commit message (if you want), then then hit <code s__="13">CTRL-X</code>, and then hit <code s__="13">Y</code> to save, then <code s__="13">ENTER</code> to accept the given filename.</p></li>
<li><p d__=""><strong>Vim</strong>: If the screen has a bunch of <code s__="13">~</code> characters down the left and a crazy-looking file name at the bottom maybe with the word <code s__="13">All</code>, you’re in Vim or some other vi (“vee eye”) variant. Press <code s__="13">i</code>, then type a message (if you want), then hit the <code s__="13">ESC</code> key in the upper left, then type two capital <code s__="13">Z</code>s in a row. <code s__="13">ZZ</code>. That should save and exit. <a href="https://www.openvim.com/" d__="">Learning Vim</a><a href="#fn57" class="footnote-ref" id="fnref57" role="doc-noteref"><sup s__="13" d__="">57</sup></a> is beyond the scope of this guide, but this author thinks it’s worth it for the editing speed you can achieve.</p></li>
</ul>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="32" id="appendix-errors-and-scary-messages" d__=""><span class="header-section-number">32</span> Appendix: Errors and Scary Messages</h1>
<h2 data-number="32.1" id="detached-head" d__=""><span class="header-section-number">32.1</span> Detached Head</h2>
<p></p>
<p d__="">Did you get this alarmingly guillotinesque message?</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb325-1" d__=""><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a>You are in 'detached HEAD' state. You can look around, make</span>
<span id="cb325-2" d__=""><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>experimental changes and commit them, and you can discard any</span>
<span id="cb325-3" d__=""><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>commits you make in this state without impacting any branches by</span>
<span id="cb325-4" d__=""><a href="#cb325-4" aria-hidden="true" tabindex="-1"></a>switching back to a branch.</span>
<span id="cb325-5"><a href="#cb325-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-6" d__=""><a href="#cb325-6" aria-hidden="true" tabindex="-1"></a>If you want to create a new branch to retain commits you create,</span>
<span id="cb325-7" d__=""><a href="#cb325-7" aria-hidden="true" tabindex="-1"></a>you may do so (now or later) by using -c with the switch command.</span>
<span id="cb325-8" d__=""><a href="#cb325-8" aria-hidden="true" tabindex="-1"></a>Example:</span>
<span id="cb325-9"><a href="#cb325-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-10" d__=""><a href="#cb325-10" aria-hidden="true" tabindex="-1"></a>  git switch -c &lt;new-branch-name&gt;</span>
<span id="cb325-11"><a href="#cb325-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-12" d__=""><a href="#cb325-12" aria-hidden="true" tabindex="-1"></a>Or undo this operation with:</span>
<span id="cb325-13"><a href="#cb325-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-14" d__=""><a href="#cb325-14" aria-hidden="true" tabindex="-1"></a>  git switch -</span>
<span id="cb325-15"><a href="#cb325-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-16" d__=""><a href="#cb325-16" aria-hidden="true" tabindex="-1"></a>Turn off this advice by setting config variable advice.detachedHead</span>
<span id="cb325-17" d__=""><a href="#cb325-17" aria-hidden="true" tabindex="-1"></a>to false</span>
<span id="cb325-18"><a href="#cb325-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-19" d__=""><a href="#cb325-19" aria-hidden="true" tabindex="-1"></a>HEAD is now at 0da5af9 line 1</span></code></pre></div>
<p d__="">This means that you’ve checked out a commit directly instead of checking out a branch. That is, your <code s__="13">HEAD</code> is no longer attached to a branch, i.e.&nbsp;it is “detached”.</p>
<p d__="">To get out of this, you can:</p>
<ol type="1">
<li><p d__="">Undo the checkout that got you detached:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb326-1" d__=""><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>git switch -</span></code></pre></div></li>
<li><p d__="">Switch to another branch entirely:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb327-1" d__=""><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a>git switch main</span></code></pre></div></li>
<li><p d__="">Make a new branch here and check it out:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb328-1" d__=""><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>git switch -c newbranch</span></code></pre></div></li>
</ol>
<p d__="">And now your <code s__="13">HEAD</code> is no longer detached.</p>
<h2 data-number="32.2" id="upstream-branch-name-doesnt-match-current" d__=""><span class="header-section-number">32.2</span> Upstream Branch Name Doesn’t Match Current</h2>
<p d__="">Did you accidentally run <code s__="13">git branch -c newbranch</code> when you meant to run <code s__="13">git switch -c newbranch</code>? Because if you did, it could land you here:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb329-1" d__=""><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>fatal: The upstream branch of your current branch does not match</span>
<span id="cb329-2" d__=""><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>the name of your current branch.  To push to the upstream branch</span>
<span id="cb329-3" d__=""><a href="#cb329-3" aria-hidden="true" tabindex="-1"></a>on the remote, use</span>
<span id="cb329-4"><a href="#cb329-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-5" d__=""><a href="#cb329-5" aria-hidden="true" tabindex="-1"></a>    git push origin HEAD:main</span>
<span id="cb329-6"><a href="#cb329-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-7" d__=""><a href="#cb329-7" aria-hidden="true" tabindex="-1"></a>To push to the branch of the same name on the remote, use</span>
<span id="cb329-8"><a href="#cb329-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-9" d__=""><a href="#cb329-9" aria-hidden="true" tabindex="-1"></a>    git push origin HEAD</span>
<span id="cb329-10"><a href="#cb329-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-11" d__=""><a href="#cb329-11" aria-hidden="true" tabindex="-1"></a>To choose either option permanently, see push.default in 'git help config'.</span>
<span id="cb329-12"><a href="#cb329-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-13" d__=""><a href="#cb329-13" aria-hidden="true" tabindex="-1"></a>To avoid automatically configuring an upstream branch when its name</span>
<span id="cb329-14" d__=""><a href="#cb329-14" aria-hidden="true" tabindex="-1"></a>won't match the local branch, see option 'simple' of branch.autoSetupMerge</span>
<span id="cb329-15" d__=""><a href="#cb329-15" aria-hidden="true" tabindex="-1"></a>in 'git help config'.</span></code></pre></div>
<p d__="">Let’s check our branch names to see what’s going on:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb330-1" d__=""><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a>$ git branch -vv</span>
<span id="cb330-2" d__=""><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a>  main      fc645f2 [origin/main] line 2</span>
<span id="cb330-3" d__=""><a href="#cb330-3" aria-hidden="true" tabindex="-1"></a>* newbranch 7c21054 [origin/main: behind 1] line 1</span></code></pre></div>
<p d__="">That tells us our local branch names and, in brackets, the corresponding remote-tracking branch. Notice anything fishy?</p>
<p d__="">It seems <code s__="13">main</code> corresponds with <code s__="13">origin/main</code>.</p>
<p d__="">And that <code s__="13">newbranch</code> <strong>also</strong> corresponds with <code s__="13">origin/main</code>! How?!</p>
<p d__="">Well, when you did <code s__="13">git branch -c newbranch</code>, that <em>copies</em> the current branch (<code s__="13">main</code> in this example) into the other branch, <em>including its remote-tracking branch</em>. Bad news, since you really want <code s__="13">newbranch</code> to correlate to <code s__="13">origin/newbranch</code>, if anything.</p>
<p d__="">You have a few options.</p>
<ol type="1">
<li><p d__="">You want to push <code s__="13">newbranch</code> up to the <code s__="13">origin</code> and track it as <code s__="13">origin/newbranch</code>.</p>
<p d__="">Just do this to push and change the remote-tracking branch name:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb331-1" d__=""><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>$ git push -u origin newbranch</span></code></pre></div></li>
<li><p d__="">You just want this to be a local branch and don’t need it on the remote.</p>
<p d__="">In this case, just unset the upstream:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb332-1" d__=""><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>$ git branch --unset-upstream newbranch</span></code></pre></div></li>
</ol>
<h2 data-number="32.3" id="current-branch-has-no-upstream-branch" d__=""><span class="header-section-number">32.3</span> Current Branch Has No Upstream Branch</h2>
<p d__="">Trying to push and getting this message?</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb333-1" d__=""><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>fatal: The current branch topic1 has no upstream branch.</span>
<span id="cb333-2" d__=""><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a>To push the current branch and set the remote as upstream, use</span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-4" d__=""><a href="#cb333-4" aria-hidden="true" tabindex="-1"></a>    git push --set-upstream origin topic1</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-6" d__=""><a href="#cb333-6" aria-hidden="true" tabindex="-1"></a>To have this happen automatically for branches without a tracking</span>
<span id="cb333-7" d__=""><a href="#cb333-7" aria-hidden="true" tabindex="-1"></a>upstream, see 'push.autoSetupRemote' in 'git help config'</span></code></pre></div>
<p d__="">This just means there’s no upstream tracking branch for <code s__="13">topic1</code>—it’s just a local branch.</p>
<p d__="">If you do want to push this branch, just follow the suggested instruction.</p>
<p d__="">If you are pushing from the wrong branch by accident, switch to the right one first.</p>
<!-- BG_NEW_CHAPTER -->
<h1 data-number="33" id="appendix-other-references" d__=""><span class="header-section-number">33</span> Appendix: Other References</h1>
<p><strong d__="">“Your book stinks. What other references can I use?”</strong></p>
<p d__="">Here are more! I found these by searching the Internet for Git
 book recommendations. The only ones I’ve used are the man pages and <em>Pro Git</em>.</p>
<ul>
<li><strong d__="">The man pages</strong>
<ul>
<li><p d__="">If you have the manual pages (historically known as the 
“man pages”) installed on your system, and you probably do, you can get 
help for particular Git commands right from the command line.</p>
<p d__="">For example, if you want to know about <code s__="13">git config</code>, you can type:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode default"><code class="sourceCode default" s__="13"><span id="cb334-1" d__=""><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>$ man git-config</span></code></pre></div>
<p d__="">(The minus between “git” and “config” might or might not be 
required depending on your system, but I’ve never found a place where it
 doesn’t work.)</p>
<p d__="">Once you’re in there, the arrow keys, space bar, and page up/down probably work to navigate, and hitting <code s__="13">q</code> or <code s__="13">Escape</code> probably quits. It depends on the pager your system uses.</p>
<p d__="">These manual pages are very comprehensive, and don’t tend to 
be easy to read. But all the information is there! They can also be 
found in <em>The Git Reference Manual</em>, below.</p></li>
</ul></li>
<li><strong d__="">Free Stuff!</strong>
<ul>
<li><a href="https://git-scm.com/book/en/v2"><em d__="">Pro Git</em></a><a href="#fn58" class="footnote-ref" id="fnref58" role="doc-noteref"><sup s__="13" d__="">58</sup></a></li>
<li><a href="https://git-scm.com/docs"><em d__="">The Git Reference Manual</em></a><a href="#fn59" class="footnote-ref" id="fnref59" role="doc-noteref"><sup s__="13" d__="">59</sup></a></li>
<li><a href="https://shafiul.github.io/gitbook/index.html"><em d__="">The Git Community Book</em></a><a href="#fn60" class="footnote-ref" id="fnref60" role="doc-noteref"><sup s__="13" d__="">60</sup></a></li>
<li><a href="https://learngitbranching.js.org/"><em d__="">Learn Git Branching</em></a><a href="#fn61" class="footnote-ref" id="fnref61" role="doc-noteref"><sup s__="13" d__="">61</sup></a></li>
<li><a href="https://github.com/apps/github-learning-lab"><em d__="">GitHub Learning Lab</em></a><a href="#fn62" class="footnote-ref" id="fnref62" role="doc-noteref"><sup s__="13" d__="">62</sup></a></li>
<li><a href="https://www.codecademy.com/learn/learn-git"><em d__="">Learn Git and GitHub</em></a><a href="#fn63" class="footnote-ref" id="fnref63" role="doc-noteref"><sup s__="13" d__="">63</sup></a></li>
<li><a href="https://www.atlassian.com/git/tutorials"><em d__="">Learn Git</em></a><a href="#fn64" class="footnote-ref" id="fnref64" role="doc-noteref"><sup s__="13" d__="">64</sup></a></li>
<li><a href="https://gitimmersion.com/"><em d__="">Git Immersion</em></a><a href="#fn65" class="footnote-ref" id="fnref65" role="doc-noteref"><sup s__="13" d__="">65</sup></a></li>
<li><a href="https://github.com/pluralsight/git-internals-pdf?tab=readme-ov-file"><em d__="">Git Internals</em></a><a href="#fn66" class="footnote-ref" id="fnref66" role="doc-noteref"><sup s__="13" d__="">66</sup></a></li>
<li><a href="http://sethrobertson.github.io/GitPostProduction/gpp.html"><em d__="">Post-Production Editing Using Git</em></a><a href="#fn67" class="footnote-ref" id="fnref67" role="doc-noteref"><sup s__="13" d__="">67</sup></a></li>
</ul></li>
<li><strong d__="">For Money</strong>
<ul>
<li><a href="https://www.manning.com/books/learn-git-in-a-month-of-lunches"><em d__="">Learn Git in a Month of Lunches</em></a><a href="#fn68" class="footnote-ref" id="fnref68" role="doc-noteref"><sup s__="13" d__="">68</sup></a></li>
<li><a href="https://www.amazon.com/Introducing-GitHub-Non-Technical-Peter-Bell/dp/1491949740"><em d__="">Getting Started with GitHub</em></a><a href="#fn69" class="footnote-ref" id="fnref69" role="doc-noteref"><sup s__="13" d__="">69</sup></a></li>
<li><a href="https://www.amazon.com/Git-Pocket-Guide-Working-Introduction/dp/1449325866"><em d__="">Git Pocket Guide</em></a><a href="#fn70" class="footnote-ref" id="fnref70" role="doc-noteref"><sup s__="13" d__="">70</sup></a></li>
<li><a href="https://www.amazon.com/Version-Control-Git-collaborative-development/dp/1449316387"><em d__="">Version Control with Git</em></a><a href="#fn71" class="footnote-ref" id="fnref71" role="doc-noteref"><sup s__="13" d__="">71</sup></a></li>
<li><a href="https://www.amazon.com/Git-Practice-Techniques-Mike-McQuaid/dp/1617291978"><em d__="">Git in Practice</em></a><a href="#fn72" class="footnote-ref" id="fnref72" role="doc-noteref"><sup s__="13" d__="">72</sup></a></li>
<li><a href="https://www.amazon.com/Git-Teams-User-Centered-Efficient-Workflows/dp/1491911182"><em d__="">Git for Teams</em></a><a href="#fn73" class="footnote-ref" id="fnref73" role="doc-noteref"><sup s__="13" d__="">73</sup></a></li>
<li><a href="https://pragprog.com/titles/tsgit/pragmatic-version-control-using-git/"><em d__="">Pragmatic Version Control using Git</em></a><a href="#fn74" class="footnote-ref" id="fnref74" role="doc-noteref"><sup s__="13" d__="">74</sup></a></li>
<li><a href="https://www.amazon.com/Mastering-Git-proficiency-productivity-collaboration/dp/1783553758"><em d__="">Mastering Git</em></a><a href="#fn75" class="footnote-ref" id="fnref75" role="doc-noteref"><sup s__="13" d__="">75</sup></a></li>
</ul></li>
</ul>
<p d__="">If you know of more, mail them to <a href="mailto:beej@beej.us" d__="">beej@beej.us</a>.</p>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p d__="">https://learn.microsoft.com/en-us/windows/wsl/<a href="#fnref1" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn2"><p d__="">https://beej.us/guide/bggit/<a href="#fnref2" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn3"><p d__="">https://github.com/<a href="#fnref3" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn4"><p d__="">https://gitlab.com<a href="#fnref4" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn5"><p d__="">https://docs.gitea.com/<a href="#fnref5" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn6"><p d__="">https://learn.microsoft.com/en-us/windows/wsl/<a href="#fnref6" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn7"><p d__="">https://www.vim.org/<a href="#fnref7" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn8"><p d__="">https://github.com/<a href="#fnref8" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn9"><p d__="">https://cli.github.com/<a href="#fnref9" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn10"><p d__="">https://github.com/cli/cli#installation<a href="#fnref10" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn11"><p d__="">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent<a href="#fnref11" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn12"><p d__="">https://www.baeldung.com/linux/ssh-private-key-git-command<a href="#fnref12" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn13"><p d__="">https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens<a href="#fnref13" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn14"><p d__="">https://en.wikipedia.org/wiki/Hexadecimal<a href="#fnref14" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn15"><p d__="">https://git-scm.com/book/en/v2/Git-Tools-Submodules<a href="#fnref15" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn16"><p d__="">https://github.com/github/gitignore<a href="#fnref16" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn17"><p d__="">The <code s__="13">--staged</code> flag is more modern. Older versions of Git used <code s__="13">git diff --cached</code>.<a href="#fnref17" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn18"><p d__="">https://docs.github.com/en/enterprise-
server@3.9/account-and-profile/setting-up-and-managing-your-personal-
account-on-github/managing-access-to-your-personal-repositories/
inviting-collaborators-to-a-personal-repository<a href="#fnref18" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn19"><p d__="">https://en.wikipedia.org/wiki/Stack_(abstract_data_type)<a href="#fnref19" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn20"><p d__="">https://github.com/beejjorgensen/git-example-repo<a href="#fnref20" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn21"><p d__="">https://en.wikipedia.org/wiki/XZ_Utils_backdoor<a href="#fnref21" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn22"><p d__="">A diff shows the difference between two files.<a href="#fnref22" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn23"><p d__="">https://en.wikipedia.org/wiki/Social_Security_number#SSNs_used_in_advertising<a href="#fnref23" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn24"><p d__="">https://support.github.com/request?q=pull+request+removals<a href="#fnref24" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn25"><p d__="">Git cleans up “unreachable” commits after some time has elapsed, so they won’t be <em>instantly</em> destroyed. But they’re on borrowed time unless you create a new branch to hold them.<a href="#fnref25" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn26"><p d__="">You can leave off the <code s__="13">--mixed</code> since it’s the default.<a href="#fnref26" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn27"><p d__="">No guarantees. You shouldn’t rewrite commit history that is already public!! It makes a big mess!<a href="#fnref27" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn28"><p d__="">Perhaps using <code s__="13">git reflog</code> and <code s__="13">git cherry-pick</code> or <code s__="13">git cherry-pick -n</code> and potentially <code s__="13">git add -p</code>,
 all of which are covered in later chapters. Along with judicious use of
 rebase, old commits or parts of old commits can be applied while 
keeping the commit history clean.<a href="#fnref28" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn29"><p d__="">https://en.wikipedia.org/wiki/Battle_of_Mobile_Bay#“Damn_the_torpedoes”<a href="#fnref29" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn30"><p d__="">By default it’s 90 days. You can configure this with the <code s__="13">gc.reflogExpire</code> config option.<a href="#fnref30" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn31"><p d__="">Keeping in mind to never rewrite history on anything you’ve pushed, of course.<a href="#fnref31" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn32"><p d__="">Even if the changes were identical, the UUID 
would still be different because the hash takes all kinds of other 
metadata into account.<a href="#fnref32" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn33"><p d__="">https://git-scm.com/book/en/v2/Git-Tools-Signing-Your-Work<a href="#fnref33" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn34"><p d__="">https://git-scm.com/docs/git-config#_variables<a href="#fnref34" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn35"><p d__="">https://git-scm.com/docs/git-config#_conditional_includes<a href="#fnref35" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn36"><p d__="">https://git-scm.com/docs/git-config#_deprecated_modes<a href="#fnref36" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn37"><p d__="">https://git-scm.com/docs/git-log#_pretty_formats<a href="#fnref37" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn38"><p d__="">https://superuser.com/questions/232373/how-to-tell-git-which-private-key-to-use<a href="#fnref38" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn39"><p d__="">Setting the <code s__="13">PATH</code> is 
outside the scope of this tutorial, but the short of it is if you can 
run the diff tool command on the command line (e.g.&nbsp;by running <code s__="13">vimdiff</code>), then it is in the <code s__="13">PATH</code>. If it says <code s__="13">command not found</code> or some such, then it is <strong>not</strong> in the <code s__="13">PATH</code>. Search the Intertubes for how to add something to the <code s__="13">PATH</code> in Bash. Or set the Git path config explicitly, as shown in the following paragraph.<a href="#fnref39" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn40"><p d__="">https://www.araxis.com/merge/index.en<a href="#fnref40" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn41"><p d__="">https://www.scootersoftware.com/<a href="#fnref41" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn42"><p d__="">https://sourcegear.com/diffmerge/<a href="#fnref42" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn43"><p d__="">https://kdiff3.sourceforge.net/<a href="#fnref43" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn44"><p d__="">https://apps.kde.org/kompare/<a href="#fnref44" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn45"><p d__="">https://meldmerge.org/<a href="#fnref45" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn46"><p d__="">https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge<a href="#fnref46" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn47"><p d__="">https://www.vim.org/<a href="#fnref47" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn48"><p d__="">https://winmerge.org/?lang=en<a href="#fnref48" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn49"><p d__="">https://www.araxis.com/merge/index.en<a href="#fnref49" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn50"><p d__="">https://www.scootersoftware.com/<a href="#fnref50" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn51"><p d__="">https://www.devart.com/codecompare/<a href="#fnref51" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn52"><p d__="">https://invent.kde.org/sdk/kdiff3<a href="#fnref52" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn53"><p d__="">https://meldmerge.org/<a href="#fnref53" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn54"><p d__="">https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge<a href="#fnref54" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn55"><p d__="">https://www.vim.org/<a href="#fnref55" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn56"><p d__="">https://winmerge.org/<a href="#fnref56" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn57"><p d__="">https://www.openvim.com/<a href="#fnref57" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn58"><p d__="">https://git-scm.com/book/en/v2<a href="#fnref58" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn59"><p d__="">https://git-scm.com/docs<a href="#fnref59" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn60"><p d__="">https://shafiul.github.io/gitbook/index.html<a href="#fnref60" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn61"><p d__="">https://learngitbranching.js.org/<a href="#fnref61" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn62"><p d__="">https://github.com/apps/github-learning-lab<a href="#fnref62" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn63"><p d__="">https://www.codecademy.com/learn/learn-git<a href="#fnref63" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn64"><p d__="">https://www.atlassian.com/git/tutorials<a href="#fnref64" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn65"><p d__="">https://gitimmersion.com/<a href="#fnref65" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn66"><p d__="">https://github.com/pluralsight/git-internals-pdf?tab=readme-ov-file<a href="#fnref66" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn67"><p d__="">http://sethrobertson.github.io/GitPostProduction/gpp.html<a href="#fnref67" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn68"><p d__="">https://www.manning.com/books/learn-git-in-a-month-of-lunches<a href="#fnref68" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn69"><p d__="">https://www.amazon.com/Introducing-GitHub-Non-Technical-Peter-Bell/dp/1491949740<a href="#fnref69" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn70"><p d__="">https://www.amazon.com/Git-Pocket-Guide-Working-Introduction/dp/1449325866<a href="#fnref70" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn71"><p d__="">https://www.amazon.com/Version-Control-Git-collaborative-development/dp/1449316387<a href="#fnref71" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn72"><p d__="">https://www.amazon.com/Git-Practice-Techniques-Mike-McQuaid/dp/1617291978<a href="#fnref72" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn73"><p d__="">https://www.amazon.com/Git-Teams-User-Centered-Efficient-Workflows/dp/1491911182<a href="#fnref73" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn74"><p d__="">https://pragprog.com/titles/tsgit/pragmatic-version-control-using-git/<a href="#fnref74" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
<li id="fn75"><p d__="">https://www.amazon.com/Mastering-Git-proficiency-productivity-collaboration/dp/1783553758<a href="#fnref75" class="footnote-back" role="doc-backlink" d__="">↩︎</a></p></li>
</ol>
</section>


</body><iframe class="cleanslate hidden" src="Beej's%20Guide%20to%20Git_files/commandline.html" id="cmdline_iframe" loading="lazy" style="height: 0px !important;"></iframe></html>